<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>
  Class: SXP::Reader::SPARQL
  
    &mdash; Web portal for RDF.rb.
  
</title>

  <link rel="stylesheet" href="../../css/style.css" type="text/css" media="screen" charset="utf-8" />

  <link rel="stylesheet" href="../../css/common.css" type="text/css" media="screen" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  relpath = '../..';
  if (relpath != '') relpath += '/';
</script>

  <script type="text/javascript" charset="utf-8" src="../../js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="../../js/app.js"></script>


  </head>
  <body>
    <script type="text/javascript" charset="utf-8">
      if (window.top.frames.main) document.body.className = 'frames';
    </script>
    
    <div id="header">
      <div id="menu">
  
    <a href="../../_index.html">Index (S)</a> &raquo; 
    <span class='title'><span class='object_link'><a href="../../SXP.html" title="SXP (module)">SXP</a></span></span> &raquo; <span class='title'><span class='object_link'><a href="../Reader.html" title="SXP::Reader (class)">Reader</a></span></span>
     &raquo; 
    <span class="title">SPARQL</span>
  
  
  <div class="noframes"><span class="title">(</span><a href="." target="_top">no frames</a><span class="title">)</span></div>
</div>

      <div id="search">
  
    <a id="class_list_link" href="#">Class List</a>
  
    <a id="method_list_link" href="#">Method List</a>
  
    <a id="file_list_link" href="#">File List</a>
  
</div>
      <div class="clear"></div>
    </div>
    
    <iframe id="search_frame"></iframe>
    
    <div id="content"><h1>Class: SXP::Reader::SPARQL
  
  
  
</h1>

<dl class="box">
  
    <dt class="r1">Inherits:</dt>
    <dd class="r1">
      <span class="inheritName"><span class='object_link'><a href="Extended.html" title="SXP::Reader::Extended (class)">Extended</a></span></span>
      
        <ul class="fullTree">
          <li><span class='object_link'><a href="../../Object.html" title="Object (class)">Object</a></span></li>
          
            <li class="next"><span class='object_link'><a href="../Reader.html" title="SXP::Reader (class)">SXP::Reader</a></span></li>
          
            <li class="next"><span class='object_link'><a href="Basic.html" title="SXP::Reader::Basic (class)">Basic</a></span></li>
          
            <li class="next"><span class='object_link'><a href="Extended.html" title="SXP::Reader::Extended (class)">Extended</a></span></li>
          
            <li class="next">SXP::Reader::SPARQL</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
      </dd>
    
  
  
    
  
    
  
  
  
    <dt class="r2 last">Defined in:</dt>
    <dd class="r2 last">vendor/bundler/ruby/1.8/gems/sxp-0.0.14/lib/sxp/reader/sparql.rb<span class="defines">,<br />
  vendor/bundler/ruby/1.9.1/gems/sxp-0.0.14/lib/sxp/reader/sparql.rb</span>
</dd>
  
</dl>
<div class="clear"></div>

<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    <p>A SPARQL Syntax Expressions (SSE) parser.</p>

<p>Requires <a href="http://rdf.rubyforge.org/">RDF.rb</a>.</p>

  </div>
</div>
<div class="tags">
  
  <h3>See Also:</h3>
  <ul class="see">
    
      <li><a href="http://openjena.org/wiki/SSE" target="_parent" title="http://openjena.org/wiki/SSE">http://openjena.org/wiki/SSE</a></li>
    
  </ul>

</div>
  <h2>Constant Summary</h2>
  
    <dl class="constants">
      
        <dt id="A-constant" class="">A =
          <div class="docstring">
  <div class="discussion">
    <p>Alias for rdf:type</p>

  </div>
</div>
<div class="tags">
  
</div>
        </dt>
        <dd><pre class="code"><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>^a$</span><span class='regexp_end'>/</span></span></pre></dd>
      
        <dt id="BASE-constant" class="">BASE =
          <div class="docstring">
  <div class="discussion">
    <p>Base token, causes next URI to be treated as the <code>base_uri</code> for further URI expansion</p>

  </div>
</div>
<div class="tags">
  
</div>
        </dt>
        <dd><pre class="code"><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>^base$</span><span class='regexp_end'>/i</span></span></pre></dd>
      
        <dt id="PREFIX-constant" class="">PREFIX =
          <div class="docstring">
  <div class="discussion">
    <p>Prefix token, causes following prefix and URI pairs to be used for transforming
<span class='object_link'><a href="#PNAME-constant" title="SXP::Reader::SPARQL::PNAME (constant)">PNAME</a></span> tokens into URIs.</p>

  </div>
</div>
<div class="tags">
  
</div>
        </dt>
        <dd><pre class="code"><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>^prefix$</span><span class='regexp_end'>/i</span></span></pre></dd>
      
        <dt id="NIL-constant" class="">NIL =
          
        </dt>
        <dd><pre class="code"><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>^nil$</span><span class='regexp_end'>/i</span></span></pre></dd>
      
        <dt id="FALSE-constant" class="">FALSE =
          
        </dt>
        <dd><pre class="code"><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>^false$</span><span class='regexp_end'>/i</span></span></pre></dd>
      
        <dt id="TRUE-constant" class="">TRUE =
          
        </dt>
        <dd><pre class="code"><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>^true$</span><span class='regexp_end'>/i</span></span></pre></dd>
      
        <dt id="EXPONENT-constant" class="">EXPONENT =
          
        </dt>
        <dd><pre class="code"><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>[eE][+-]?[0-9]+</span><span class='regexp_end'>/</span></span></pre></dd>
      
        <dt id="DECIMAL-constant" class="">DECIMAL =
          
        </dt>
        <dd><pre class="code"><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>^[+-]?(\d*)?\.\d*$</span><span class='regexp_end'>/</span></span></pre></dd>
      
        <dt id="DOUBLE-constant" class="">DOUBLE =
          
        </dt>
        <dd><pre class="code"><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>^[+-]?(\d*)?\.\d*</span><span class='embexpr_beg'>#{</span><span class='const'>EXPONENT</span><span class='rbrace'>}</span><span class='tstring_content'>$</span><span class='regexp_end'>/</span></span></pre></dd>
      
        <dt id="BNODE_ID-constant" class="">BNODE_ID =
          <div class="docstring">
  <div class="discussion">
    <p>BNode with identifier</p>

  </div>
</div>
<div class="tags">
  
</div>
        </dt>
        <dd><pre class="code"><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>^_:([A-Za-z][A-Za-z0-9]*)</span><span class='regexp_end'>/</span></span></pre></dd>
      
        <dt id="BNODE_NEW-constant" class="">BNODE_NEW =
          <div class="docstring">
  <div class="discussion">
    <p>Anonymous BNode</p>

  </div>
</div>
<div class="tags">
  
</div>
        </dt>
        <dd><pre class="code"><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>^_:$</span><span class='regexp_end'>/</span></span></pre></dd>
      
        <dt id="VAR_ID-constant" class="">VAR_ID =
          <div class="docstring">
  <div class="discussion">
    <p>Distinguished variable with an optional name</p>

  </div>
</div>
<div class="tags">
  
</div>
        </dt>
        <dd><pre class="code"><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>^\?([A-Za-z][A-Za-z0-9]*)?</span><span class='regexp_end'>/</span></span></pre></dd>
      
        <dt id="ND_VAR-constant" class="">ND_VAR =
          <div class="docstring">
  <div class="discussion">
    <p>Non-distinguished variable with an optional identifier</p>

  </div>
</div>
<div class="tags">
  
</div>
        </dt>
        <dd><pre class="code"><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>^\?\?([0-9]*)</span><span class='regexp_end'>/</span></span></pre></dd>
      
        <dt id="URIREF-constant" class="">URIREF =
          <div class="docstring">
  <div class="discussion">
    <p>A URI reference, subject to expansion using <code>base_uri</code></p>

  </div>
</div>
<div class="tags">
  
</div>
        </dt>
        <dd><pre class="code"><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>^&lt;([^&gt;]+)&gt;</span><span class='regexp_end'>/</span></span></pre></dd>
      
        <dt id="PNAME-constant" class="">PNAME =
          <div class="docstring">
  <div class="discussion">
    <p>A QName, subject to expansion to URIs using <span class='object_link'><a href="#PREFIX-constant" title="SXP::Reader::SPARQL::PREFIX (constant)">PREFIX</a></span></p>

  </div>
</div>
<div class="tags">
  
</div>
        </dt>
        <dd><pre class="code"><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>([^:]*):([^:]*)</span><span class='regexp_end'>/</span></span></pre></dd>
      
        <dt id="RDF_TYPE-constant" class="">RDF_TYPE =
          
        </dt>
        <dd><pre class="code"><span class='lparen'>(</span><span class='id a'>a</span> <span class='op'>=</span> <span class='const'>RDF</span><span class='period'>.</span><span class='id type'>type</span><span class='period'>.</span><span class='id dup'>dup</span><span class='semicolon'>;</span> <span class='id a'>a</span><span class='period'>.</span><span class='id lexical'>lexical</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>a</span><span class='tstring_end'>'</span></span><span class='semicolon'>;</span> <span class='id a'>a</span><span class='rparen'>)</span><span class='period'>.</span><span class='id freeze'>freeze</span></pre></dd>
      
    </dl>
  


  
  
  
  
  <h3 class="inherited">Constants inherited from <span class='object_link'><a href="Extended.html" title="SXP::Reader::Extended (class)">Extended</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="Extended.html#ATOM-constant" title="SXP::Reader::Extended::ATOM (constant)">ATOM</a></span>, <span class='object_link'><a href="Extended.html#LPARENS-constant" title="SXP::Reader::Extended::LPARENS (constant)">LPARENS</a></span>, <span class='object_link'><a href="Extended.html#RPARENS-constant" title="SXP::Reader::Extended::RPARENS (constant)">RPARENS</a></span></p>

  
  
  
  
  <h3 class="inherited">Constants inherited from <span class='object_link'><a href="Basic.html" title="SXP::Reader::Basic (class)">Basic</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="Basic.html#ATOM-constant" title="SXP::Reader::Basic::ATOM (constant)">ATOM</a></span>, <span class='object_link'><a href="Basic.html#DECIMAL-constant" title="SXP::Reader::Basic::DECIMAL (constant)">DECIMAL</a></span>, <span class='object_link'><a href="Basic.html#INTEGER-constant" title="SXP::Reader::Basic::INTEGER (constant)">INTEGER</a></span>, <span class='object_link'><a href="Basic.html#LPARENS-constant" title="SXP::Reader::Basic::LPARENS (constant)">LPARENS</a></span>, <span class='object_link'><a href="Basic.html#RATIONAL-constant" title="SXP::Reader::Basic::RATIONAL (constant)">RATIONAL</a></span>, <span class='object_link'><a href="Basic.html#RPARENS-constant" title="SXP::Reader::Basic::RPARENS (constant)">RPARENS</a></span></p>

  
  
  
  
  
  <h2>Instance Attribute Summary <small>(<a href="#" class="summary_toggle">collapse</a>)</small></h2>
  <ul class="summary">
    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#base_uri-instance_method" title="#base_uri (instance method)">- (Object) <strong>base_uri</strong> </a>
    

    
  </span>
  
  
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Base URI as specified or when parsing parsing a BASE token using the immediately following
token, which must be a URI.</p></div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#prefixes-instance_method" title="#prefixes (instance method)">- (Hash{Object =&gt; RDF::URI}) <strong>prefixes</strong> </a>
    

    
  </span>
  
  
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Prefixes defined while parsing.</p></div></span>
  
</li>

    
  </ul>



  
  
  
  
  
  
  
  
  
  
  
  <h3 class="inherited">Attributes inherited from <span class='object_link'><a href="../Reader.html" title="SXP::Reader (class)">SXP::Reader</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="../Reader.html#input-instance_method" title="SXP::Reader#input (method)">input</a></span>, <span class='object_link'><a href="../Reader.html#options-instance_method" title="SXP::Reader#options (method)">options</a></span></p>

  

  
    <h2>
      Instance Method Summary
      <small>(<a href="#" class="summary_toggle">collapse</a>)</small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#initialize-instance_method" title="#initialize (instance method)">- (SPARQL) <strong>initialize</strong>(input, options = {}, &amp;block) </a>
    

    
  </span>
  
    <span class="note title constructor">constructor</span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Initializes the reader.</p></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#prefix-instance_method" title="#prefix (instance method)">- (RDF::URI) <strong>prefix</strong>(name, uri = nil) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Defines the given named URI prefix for this parser.</p></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#read_atom-instance_method" title="#read_atom (instance method)">- (Object) <strong>read_atom</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Reads an SSE Atom.</p></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#read_rdf_literal-instance_method" title="#read_rdf_literal (instance method)">- (RDF::Literal) <strong>read_rdf_literal</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Reads literals corresponding to SPARQL/Turtle/Notation-3 syntax.</p></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#read_rdf_uri-instance_method" title="#read_rdf_uri (instance method)">- (RDF::URI) <strong>read_rdf_uri</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Reads a URI in SPARQL/Turtle/Notation-3 syntax.</p></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#read_token-instance_method" title="#read_token (instance method)">- (Object) <strong>read_token</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Reads SSE Tokens, including <span class='object_link'><a href="../../RDF/Literal.html" title="RDF::Literal (class)">RDF::Literal</a></span>, <span class='object_link'><a href="../../RDF/URI.html" title="RDF::URI (class)">RDF::URI</a></span> and RDF::Node.</p></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#skip_comments-instance_method" title="#skip_comments (instance method)">- <strong>skip_comments</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#variable-instance_method" title="#variable (instance method)">- (RDF::Query::Variable) <strong>variable</strong>(id, distinguished = true) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Return variable allocated to an ID.</p></div></span>
  
</li>

      
    </ul>
  


  
  
  
  
  
  
  
  
  
  
  
  
  <h3 class="inherited">Methods inherited from <span class='object_link'><a href="Basic.html" title="SXP::Reader::Basic (class)">Basic</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="Basic.html#read_character-instance_method" title="SXP::Reader::Basic#read_character (method)">#read_character</a></span>, <span class='object_link'><a href="Basic.html#read_literal-instance_method" title="SXP::Reader::Basic#read_literal (method)">#read_literal</a></span>, <span class='object_link'><a href="Basic.html#read_string-instance_method" title="SXP::Reader::Basic#read_string (method)">#read_string</a></span></p>

  
  
  
  
  
  
  
  <h3 class="inherited">Methods inherited from <span class='object_link'><a href="../Reader.html" title="SXP::Reader (class)">SXP::Reader</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="../Reader.html#each-instance_method" title="SXP::Reader#each (method)">#each</a></span>, <span class='object_link'><a href="../Reader.html#eof%3F-instance_method" title="SXP::Reader#eof? (method)">#eof?</a></span>, <span class='object_link'><a href="../Reader.html#peek_char-instance_method" title="SXP::Reader#peek_char (method)">#peek_char</a></span>, <span class='object_link'><a href="../Reader.html#read-class_method" title="SXP::Reader.read (method)">read</a></span>, <span class='object_link'><a href="../Reader.html#read-instance_method" title="SXP::Reader#read (method)">#read</a></span>, <span class='object_link'><a href="../Reader.html#read_all-class_method" title="SXP::Reader.read_all (method)">read_all</a></span>, <span class='object_link'><a href="../Reader.html#read_all-instance_method" title="SXP::Reader#read_all (method)">#read_all</a></span>, <span class='object_link'><a href="../Reader.html#read_char-instance_method" title="SXP::Reader#read_char (method)">#read_char</a></span>, <span class='object_link'><a href="../Reader.html#read_character-instance_method" title="SXP::Reader#read_character (method)">#read_character</a></span>, <span class='object_link'><a href="../Reader.html#read_chars-instance_method" title="SXP::Reader#read_chars (method)">#read_chars</a></span>, <span class='object_link'><a href="../Reader.html#read_file-class_method" title="SXP::Reader.read_file (method)">read_file</a></span>, <span class='object_link'><a href="../Reader.html#read_files-class_method" title="SXP::Reader.read_files (method)">read_files</a></span>, <span class='object_link'><a href="../Reader.html#read_integer-instance_method" title="SXP::Reader#read_integer (method)">#read_integer</a></span>, <span class='object_link'><a href="../Reader.html#read_list-instance_method" title="SXP::Reader#read_list (method)">#read_list</a></span>, <span class='object_link'><a href="../Reader.html#read_literal-instance_method" title="SXP::Reader#read_literal (method)">#read_literal</a></span>, <span class='object_link'><a href="../Reader.html#read_sharp-instance_method" title="SXP::Reader#read_sharp (method)">#read_sharp</a></span>, <span class='object_link'><a href="../Reader.html#read_string-instance_method" title="SXP::Reader#read_string (method)">#read_string</a></span>, <span class='object_link'><a href="../Reader.html#read_url-class_method" title="SXP::Reader.read_url (method)">read_url</a></span>, <span class='object_link'><a href="../Reader.html#skip_line-instance_method" title="SXP::Reader#skip_line (method)">#skip_line</a></span></p>

  <div id="constructor_details" class="method_details_list">
  <h2>Constructor Details</h2>
  
    <div class="method_details first">
  <p class="signature first" id="initialize-instance_method">
  
    - (<tt><span class='object_link'><a href="" title="SXP::Reader::SPARQL (class)">SPARQL</a></span></tt>) <strong>initialize</strong>(input, options = {}, &amp;block) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>Initializes the reader.</p>

  </div>
</div>
<div class="tags">
  <h3>Parameters:</h3>
<ul class="param">
  
    <li>
      
        <span class='name'>input</span>
      
      
        <span class='type'>(<tt>IO</tt>, <tt>StringIO</tt>, <tt><span class='object_link'><a href="../../String.html" title="String (class)">String</a></span></tt>)</span>
      
      
      
    </li>
  
    <li>
      
        <span class='name'>options</span>
      
      
        <span class='type'>(<tt>Hash{<span class='object_link'><a href="../../Symbol.html" title="Symbol (class)">Symbol</a></span> =&gt; <span class='object_link'><a href="../../Object.html" title="Object (class)">Object</a></span>}</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>{}</tt>)</em>
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


76
77
78
79
80
81
82
83
84
85</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'vendor/bundler/ruby/1.8/gems/sxp-0.0.14/lib/sxp/reader/sparql.rb', line 76</span>

<span class='kw'>def</span> <span class='id initialize'>initialize</span><span class='lparen'>(</span><span class='id input'>input</span><span class='comma'>,</span> <span class='id options'>options</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id block'>block</span><span class='rparen'>)</span>
  <span class='kw'>super</span> <span class='lbrace'>{</span> <span class='ivar'>@prefixes</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='semicolon'>;</span> <span class='ivar'>@bnodes</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='semicolon'>;</span> <span class='ivar'>@list_depth</span> <span class='op'>=</span> <span class='int'>0</span> <span class='rbrace'>}</span>

  <span class='kw'>if</span> <span class='id block_given?'>block_given?</span>
    <span class='kw'>case</span> <span class='id block'>block</span><span class='period'>.</span><span class='id arity'>arity</span>
      <span class='kw'>when</span> <span class='int'>1</span> <span class='kw'>then</span> <span class='id block'>block</span><span class='period'>.</span><span class='id call'>call</span><span class='lparen'>(</span><span class='kw'>self</span><span class='rparen'>)</span>
      <span class='kw'>else</span> <span class='kw'>self</span><span class='period'>.</span><span class='id instance_eval'>instance_eval</span><span class='lparen'>(</span><span class='op'>&amp;</span><span class='id block'>block</span><span class='rparen'>)</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
  
</div>

  <div id="instance_attr_details" class="attr_details">
    <h2>Instance Attribute Details</h2>
    
      
      <span id="base_uri=-instance_method"></span>
      <span id="base_uri-instance_method"></span>
      <div class="method_details first">
  <p class="signature first" id="base_uri-instance_method">
  
    - (<tt><span class='object_link'><a href="../../Object.html" title="Object (class)">Object</a></span></tt>) <strong>base_uri</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>Base URI as specified or when parsing parsing a BASE token using the immediately following
token, which must be a URI.</p>

  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


42
43
44</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'vendor/bundler/ruby/1.8/gems/sxp-0.0.14/lib/sxp/reader/sparql.rb', line 42</span>

<span class='kw'>def</span> <span class='id base_uri'>base_uri</span>
  <span class='ivar'>@base_uri</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id="prefixes=-instance_method"></span>
      <span id="prefixes-instance_method"></span>
      <div class="method_details ">
  <p class="signature " id="prefixes-instance_method">
  
    - (<tt>Hash{<span class='object_link'><a href="../../Object.html" title="Object (class)">Object</a></span> =&gt; <span class='object_link'><a href="../../RDF/URI.html" title="RDF::URI (class)">RDF::URI</a></span>}</tt>) <strong>prefixes</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>Prefixes defined while parsing</p>

  </div>
</div>
<div class="tags">
  <h3>Returns:</h3>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Hash{<span class='object_link'><a href="../../Object.html" title="Object (class)">Object</a></span> =&gt; <span class='object_link'><a href="../../RDF/URI.html" title="RDF::URI (class)">RDF::URI</a></span>}</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


47
48
49</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'vendor/bundler/ruby/1.8/gems/sxp-0.0.14/lib/sxp/reader/sparql.rb', line 47</span>

<span class='kw'>def</span> <span class='id prefixes'>prefixes</span>
  <span class='ivar'>@prefixes</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>


  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>
    
    
      <div class="method_details first">
  <p class="signature first" id="prefix-instance_method">
  
    
      <span class="overload">- (<tt><span class='object_link'><a href="../../RDF/URI.html" title="RDF::URI (class)">RDF::URI</a></span></tt>) <strong>prefix</strong>(name, uri) </span>
    
      <span class="overload">- (<tt><span class='object_link'><a href="../../RDF/URI.html" title="RDF::URI (class)">RDF::URI</a></span></tt>) <strong>prefix</strong>(name) </span>
    
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>Defines the given named URI prefix for this parser.</p>

  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <h3>Examples:</h3>
    
      <h4><div class='inline'><p>Defining a URI prefix</p></div></h4>
      <pre class="example code"><span class='id parser'>parser</span><span class='period'>.</span><span class='id prefix'>prefix</span> <span class='symbol'>:dc</span><span class='comma'>,</span> <span class='const'>RDF</span><span class='op'>::</span><span class='const'>URI</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>http://purl.org/dc/terms/</span><span class='tstring_end'>'</span></span><span class='rparen'>)</span></pre>
    
      <h4><div class='inline'><p>Returning a URI prefix</p></div></h4>
      <pre class="example code"><span class='id parser'>parser</span><span class='period'>.</span><span class='id prefix'>prefix</span><span class='lparen'>(</span><span class='symbol'>:dc</span><span class='rparen'>)</span>    <span class='comment'>#=&gt; RDF::URI('http://purl.org/dc/terms/')</span></pre>
    
  </div>

  <h3>Overloads:</h3>
  <ul class="overload">
    
      
      <li class="overload_item">
        <span class="signature">- (<tt><span class='object_link'><a href="../../RDF/URI.html" title="RDF::URI (class)">RDF::URI</a></span></tt>) <strong>prefix</strong>(name, uri) </span>
        <div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  <h3>Parameters:</h3>
<ul class="param">
  
    <li>
      
        <span class='name'>name</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../../Symbol.html" title="Symbol (class)">Symbol</a></span></tt>, <tt>#to_s</tt>)</span>
      
      
      
    </li>
  
    <li>
      
        <span class='name'>uri</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../../RDF/URI.html" title="RDF::URI (class)">RDF::URI</a></span></tt>, <tt>#to_s</tt>)</span>
      
      
      
    </li>
  
</ul>

</div>
      </li>
    
      
      <li class="overload_item">
        <span class="signature">- (<tt><span class='object_link'><a href="../../RDF/URI.html" title="RDF::URI (class)">RDF::URI</a></span></tt>) <strong>prefix</strong>(name) </span>
        <div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  <h3>Parameters:</h3>
<ul class="param">
  
    <li>
      
        <span class='name'>name</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../../Symbol.html" title="Symbol (class)">Symbol</a></span></tt>, <tt>#to_s</tt>)</span>
      
      
      
    </li>
  
</ul>

</div>
      </li>
    
  </ul>
<h3>Returns:</h3>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../../RDF/URI.html" title="RDF::URI (class)">RDF::URI</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


66
67
68
69</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'vendor/bundler/ruby/1.8/gems/sxp-0.0.14/lib/sxp/reader/sparql.rb', line 66</span>

<span class='kw'>def</span> <span class='id prefix'>prefix</span><span class='lparen'>(</span><span class='id name'>name</span><span class='comma'>,</span> <span class='id uri'>uri</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='rparen'>)</span>
  <span class='id name'>name</span> <span class='op'>=</span> <span class='id name'>name</span><span class='period'>.</span><span class='id to_s'>to_s</span><span class='period'>.</span><span class='id empty?'>empty?</span> <span class='op'>?</span> <span class='kw'>nil</span> <span class='op'>:</span> <span class='lparen'>(</span><span class='id name'>name</span><span class='period'>.</span><span class='id respond_to?'>respond_to?</span><span class='lparen'>(</span><span class='symbol'>:to_sym</span><span class='rparen'>)</span> <span class='op'>?</span> <span class='id name'>name</span><span class='period'>.</span><span class='id to_sym'>to_sym</span> <span class='op'>:</span> <span class='id name'>name</span><span class='period'>.</span><span class='id to_s'>to_s</span><span class='period'>.</span><span class='id to_sym'>to_sym</span><span class='rparen'>)</span>
  <span class='id uri'>uri</span><span class='period'>.</span><span class='id nil?'>nil?</span> <span class='op'>?</span> <span class='ivar'>@prefixes</span><span class='lbracket'>[</span><span class='id name'>name</span><span class='rbracket'>]</span> <span class='op'>:</span> <span class='ivar'>@prefixes</span><span class='lbracket'>[</span><span class='id name'>name</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id uri'>uri</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="read_atom-instance_method">
  
    - (<tt><span class='object_link'><a href="../../Object.html" title="Object (class)">Object</a></span></tt>) <strong>read_atom</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>Reads an SSE Atom</p>

<p>Atoms parsed including <code>base</code>, <code>prefix</code>, <code>true</code>, <code>false</code>, numeric, BNodes and variables.</p>

<p>Creates <span class='object_link'><a href="../../RDF/Literal.html" title="RDF::Literal (class)">RDF::Literal</a></span>, RDF::Node, or <span class='object_link'><a href="../../RDF/Query/Variable.html" title="RDF::Query::Variable (class)">RDF::Query::Variable</a></span> instances where appropriate.</p>

  </div>
</div>
<div class="tags">
  <h3>Returns:</h3>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../../Object.html" title="Object (class)">Object</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


219
220
221
222
223
224
225
226
227
228
229
230
231
232
233
234
235
236</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'vendor/bundler/ruby/1.8/gems/sxp-0.0.14/lib/sxp/reader/sparql.rb', line 219</span>

<span class='kw'>def</span> <span class='id read_atom'>read_atom</span>
  <span class='kw'>case</span> <span class='id buffer'>buffer</span> <span class='op'>=</span> <span class='id read_literal'>read_literal</span>
    <span class='kw'>when</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>.</span><span class='tstring_end'>'</span></span>       <span class='kw'>then</span> <span class='id buffer'>buffer</span><span class='period'>.</span><span class='id to_sym'>to_sym</span>
    <span class='kw'>when</span> <span class='const'>A</span>         <span class='kw'>then</span> <span class='const'>RDF_TYPE</span>
    <span class='kw'>when</span> <span class='const'>BASE</span>      <span class='kw'>then</span> <span class='ivar'>@parsed_base</span> <span class='op'>=</span> <span class='kw'>true</span><span class='semicolon'>;</span> <span class='id buffer'>buffer</span><span class='period'>.</span><span class='id to_sym'>to_sym</span>
    <span class='kw'>when</span> <span class='const'>NIL</span>       <span class='kw'>then</span> <span class='kw'>nil</span>
    <span class='kw'>when</span> <span class='const'>FALSE</span>     <span class='kw'>then</span> <span class='const'>RDF</span><span class='op'>::</span><span class='const'>Literal</span><span class='lparen'>(</span><span class='kw'>false</span><span class='rparen'>)</span>
    <span class='kw'>when</span> <span class='const'>TRUE</span>      <span class='kw'>then</span> <span class='const'>RDF</span><span class='op'>::</span><span class='const'>Literal</span><span class='lparen'>(</span><span class='kw'>true</span><span class='rparen'>)</span>
    <span class='kw'>when</span> <span class='const'>DOUBLE</span>    <span class='kw'>then</span> <span class='const'>RDF</span><span class='op'>::</span><span class='const'>Literal</span><span class='op'>::</span><span class='const'>Double</span><span class='period'>.</span><span class='id new'>new</span><span class='lparen'>(</span><span class='id buffer'>buffer</span><span class='rparen'>)</span>
    <span class='kw'>when</span> <span class='const'>DECIMAL</span>   <span class='kw'>then</span> <span class='const'>RDF</span><span class='op'>::</span><span class='const'>Literal</span><span class='op'>::</span><span class='const'>Decimal</span><span class='period'>.</span><span class='id new'>new</span><span class='lparen'>(</span><span class='id buffer'>buffer</span><span class='rparen'>)</span>
    <span class='kw'>when</span> <span class='const'>INTEGER</span>   <span class='kw'>then</span> <span class='const'>RDF</span><span class='op'>::</span><span class='const'>Literal</span><span class='op'>::</span><span class='const'>Integer</span><span class='period'>.</span><span class='id new'>new</span><span class='lparen'>(</span><span class='id buffer'>buffer</span><span class='rparen'>)</span>
    <span class='kw'>when</span> <span class='const'>BNODE_ID</span>  <span class='kw'>then</span> <span class='ivar'>@bnodes</span><span class='lbracket'>[</span><span class='backref'>$1</span><span class='rbracket'>]</span> <span class='op'>||=</span> <span class='const'>RDF</span><span class='op'>::</span><span class='const'>Node</span><span class='lparen'>(</span><span class='backref'>$1</span><span class='rparen'>)</span>
    <span class='kw'>when</span> <span class='const'>BNODE_NEW</span> <span class='kw'>then</span> <span class='const'>RDF</span><span class='op'>::</span><span class='const'>Node</span><span class='period'>.</span><span class='id new'>new</span>
    <span class='kw'>when</span> <span class='const'>ND_VAR</span>   <span class='kw'>then</span> <span class='id variable'>variable</span><span class='lparen'>(</span><span class='backref'>$1</span><span class='comma'>,</span> <span class='kw'>false</span><span class='rparen'>)</span>
    <span class='kw'>when</span> <span class='const'>VAR_ID</span>    <span class='kw'>then</span> <span class='id variable'>variable</span><span class='lparen'>(</span><span class='backref'>$1</span><span class='comma'>,</span> <span class='kw'>true</span><span class='rparen'>)</span>
    <span class='kw'>else</span> <span class='id buffer'>buffer</span><span class='period'>.</span><span class='id to_sym'>to_sym</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="read_rdf_literal-instance_method">
  
    - (<tt><span class='object_link'><a href="../../RDF/Literal.html" title="RDF::Literal (class)">RDF::Literal</a></span></tt>) <strong>read_rdf_literal</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>Reads literals corresponding to SPARQL/Turtle/Notation-3 syntax</p>

  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <h3>Examples:</h3>
    
      <h4><div class='inline'></div></h4>
      <pre class="example code">&quot;a plain literal&quot;
&quot;a literal with a language&quot;@en
&quot;a typed literal&quot;^^&lt;http://example/&gt;
&quot;a typed literal with a PNAME&quot;^^xsd:string</pre>
    
  </div>
<h3>Returns:</h3>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../../RDF/Literal.html" title="RDF::Literal (class)">RDF::Literal</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


156
157
158
159
160
161
162
163
164
165
166
167
168</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'vendor/bundler/ruby/1.8/gems/sxp-0.0.14/lib/sxp/reader/sparql.rb', line 156</span>

<span class='kw'>def</span> <span class='id read_rdf_literal'>read_rdf_literal</span>
  <span class='id value'>value</span>   <span class='op'>=</span> <span class='id read_string'>read_string</span>
  <span class='id options'>options</span> <span class='op'>=</span> <span class='kw'>case</span> <span class='id peek_char'>peek_char</span>
    <span class='kw'>when</span> <span class='CHAR'>?@</span>
      <span class='id skip_char'>skip_char</span> <span class='comment'># '@'
</span>      <span class='lbrace'>{</span><span class='symbol'>:language</span> <span class='op'>=&gt;</span> <span class='id read_atom'>read_atom</span><span class='period'>.</span><span class='id downcase'>downcase</span><span class='rbrace'>}</span>
    <span class='kw'>when</span> <span class='CHAR'>?^</span>
      <span class='int'>2</span><span class='period'>.</span><span class='id times'>times</span> <span class='lbrace'>{</span> <span class='id skip_char'>skip_char</span> <span class='rbrace'>}</span> <span class='comment'># '^^'
</span>      <span class='lbrace'>{</span><span class='symbol'>:datatype</span> <span class='op'>=&gt;</span> <span class='id read_token'>read_token</span><span class='period'>.</span><span class='id last'>last</span><span class='rbrace'>}</span>
    <span class='kw'>else</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
  <span class='kw'>end</span>
  <span class='const'>RDF</span><span class='op'>::</span><span class='const'>Literal</span><span class='lparen'>(</span><span class='id value'>value</span><span class='comma'>,</span> <span class='id options'>options</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="read_rdf_uri-instance_method">
  
    - (<tt><span class='object_link'><a href="../../RDF/URI.html" title="RDF::URI (class)">RDF::URI</a></span></tt>) <strong>read_rdf_uri</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>Reads a URI in SPARQL/Turtle/Notation-3 syntax</p>

  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <h3>Examples:</h3>
    
      <h4><div class='inline'></div></h4>
      <pre class="example code">&lt;http://example/&gt;</pre>
    
  </div>
<h3>Returns:</h3>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../../RDF/URI.html" title="RDF::URI (class)">RDF::URI</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


177
178
179
180
181
182
183
184
185
186
187
188
189
190
191
192
193
194
195
196
197
198
199
200
201
202
203
204
205
206
207
208
209</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'vendor/bundler/ruby/1.8/gems/sxp-0.0.14/lib/sxp/reader/sparql.rb', line 177</span>

<span class='kw'>def</span> <span class='id read_rdf_uri'>read_rdf_uri</span>
  <span class='id buffer'>buffer</span> <span class='op'>=</span> <span class='const'>String</span><span class='period'>.</span><span class='id new'>new</span>
  <span class='id skip_char'>skip_char</span> <span class='comment'># '&lt;'
</span>  <span class='kw'>return</span> <span class='symbol'>:&lt;</span> <span class='kw'>if</span> <span class='lparen'>(</span><span class='id char'>char</span> <span class='op'>=</span> <span class='id peek_char'>peek_char</span><span class='rparen'>)</span><span class='period'>.</span><span class='id nil?'>nil?</span> <span class='op'>||</span> <span class='id char'>char</span><span class='period'>.</span><span class='id chr'>chr</span> <span class='op'>!~</span> <span class='const'>ATOM</span> <span class='comment'># FIXME: nasty special case for the '&lt; symbol
</span>  <span class='kw'>return</span> <span class='symbol'>:&lt;=</span> <span class='kw'>if</span> <span class='id peek_char'>peek_char</span><span class='period'>.</span><span class='id chr'>chr</span><span class='period'>.</span><span class='id eql?'>eql?</span><span class='lparen'>(</span><span class='CHAR'>?=</span><span class='period'>.</span><span class='id chr'>chr</span><span class='rparen'>)</span> <span class='op'>&amp;&amp;</span> <span class='id read_char'>read_char</span>    <span class='comment'># FIXME: nasty special case for the '&lt;= symbol
</span>  <span class='kw'>until</span> <span class='id peek_char'>peek_char</span> <span class='op'>==</span> <span class='CHAR'>?&gt;</span>
    <span class='id buffer'>buffer</span> <span class='op'>&lt;&lt;</span> <span class='id read_char'>read_char</span> <span class='comment'># TODO: unescaping
</span>  <span class='kw'>end</span>
  <span class='id skip_char'>skip_char</span> <span class='comment'># '&gt;'
</span>
  <span class='comment'># If we have a base URI, use that when constructing a new URI
</span>  <span class='id uri'>uri</span> <span class='op'>=</span> <span class='kw'>if</span> <span class='kw'>self</span><span class='period'>.</span><span class='id base_uri'>base_uri</span>
    <span class='id u'>u</span> <span class='op'>=</span> <span class='kw'>self</span><span class='period'>.</span><span class='id base_uri'>base_uri</span><span class='period'>.</span><span class='id join'>join</span><span class='lparen'>(</span><span class='id buffer'>buffer</span><span class='rparen'>)</span>
    <span class='id u'>u</span><span class='period'>.</span><span class='id lexical'>lexical</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;</span><span class='embexpr_beg'>#{</span><span class='id buffer'>buffer</span><span class='rbrace'>}</span><span class='tstring_content'>&gt;</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>unless</span> <span class='id u'>u</span><span class='period'>.</span><span class='id to_s'>to_s</span> <span class='op'>==</span> <span class='id buffer'>buffer</span>  <span class='comment'># So that it can be re-serialized properly
</span>    <span class='id u'>u</span>
  <span class='kw'>else</span>
    <span class='const'>RDF</span><span class='op'>::</span><span class='const'>URI</span><span class='lparen'>(</span><span class='id buffer'>buffer</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
  
  <span class='comment'># If we previously parsed a &quot;BASE&quot; element, then this URI is used to set that value
</span>  <span class='kw'>if</span> <span class='ivar'>@parsed_base</span>
    <span class='kw'>self</span><span class='period'>.</span><span class='id base_uri'>base_uri</span> <span class='op'>=</span> <span class='id uri'>uri</span>
    <span class='ivar'>@parsed_base</span> <span class='op'>=</span> <span class='kw'>nil</span>
  <span class='kw'>end</span>
  
  <span class='comment'># If we previously parsed a &quot;PREFIX&quot; element, associate this URI with the prefix
</span>  <span class='kw'>if</span> <span class='ivar'>@parsed_prefix</span>
    <span class='id prefix'>prefix</span><span class='lparen'>(</span><span class='ivar'>@parsed_prefix</span><span class='comma'>,</span> <span class='id uri'>uri</span><span class='rparen'>)</span>
    <span class='ivar'>@parsed_prefix</span> <span class='op'>=</span> <span class='kw'>nil</span>
  <span class='kw'>end</span>
  
  <span class='id uri'>uri</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="read_token-instance_method">
  
    - (<tt><span class='object_link'><a href="../../Object.html" title="Object (class)">Object</a></span></tt>) <strong>read_token</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>Reads SSE Tokens, including <span class='object_link'><a href="../../RDF/Literal.html" title="RDF::Literal (class)">RDF::Literal</a></span>, <span class='object_link'><a href="../../RDF/URI.html" title="RDF::URI (class)">RDF::URI</a></span> and RDF::Node.</p>

<p>Performs forward reference for prefix and base URI representations and saves in
<span class='object_link'><a href="#base_uri-instance_method" title="SXP::Reader::SPARQL#base_uri (method)">#base_uri</a></span> and <span class='object_link'><a href="#prefixes-instance_method" title="SXP::Reader::SPARQL#prefixes (method)">#prefixes</a></span> accessors.</p>

<p>Transforms tokens matching a <span class='object_link'><a href="#PNAME-constant" title="SXP::Reader::SPARQL::PNAME (constant)">PNAME</a></span> pattern into <span class='object_link'><a href="../../RDF/URI.html" title="RDF::URI (class)">RDF::URI</a></span> instances if a match is
found with a previously identified <span class='object_link'><a href="#PREFIX-constant" title="SXP::Reader::SPARQL::PREFIX (constant)">PREFIX</a></span>.</p>

  </div>
</div>
<div class="tags">
  <h3>Returns:</h3>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../../Object.html" title="Object (class)">Object</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'vendor/bundler/ruby/1.8/gems/sxp-0.0.14/lib/sxp/reader/sparql.rb', line 96</span>

<span class='kw'>def</span> <span class='id read_token'>read_token</span>
  <span class='kw'>case</span> <span class='id peek_char'>peek_char</span>
  <span class='kw'>when</span> <span class='CHAR'>?&quot;</span> <span class='kw'>then</span> <span class='lbracket'>[</span><span class='symbol'>:atom</span><span class='comma'>,</span> <span class='id read_rdf_literal'>read_rdf_literal</span><span class='rbracket'>]</span> <span class='comment'># &quot;
</span>  <span class='kw'>when</span> <span class='CHAR'>?&lt;</span> <span class='kw'>then</span> <span class='lbracket'>[</span><span class='symbol'>:atom</span><span class='comma'>,</span> <span class='id read_rdf_uri'>read_rdf_uri</span><span class='rbracket'>]</span>
  <span class='kw'>else</span>
    <span class='id tok'>tok</span> <span class='op'>=</span> <span class='kw'>super</span>
    
    <span class='comment'># If we just parsed &quot;PREFIX&quot;, and this is an opening list, then
</span>    <span class='comment'># record list depth and process following as token, URI pairs
</span>    <span class='comment'>#
</span>    <span class='comment'># Once we've closed the list, go out of prefix mode
</span>    <span class='kw'>if</span> <span class='id tok'>tok</span><span class='period'>.</span><span class='id is_a?'>is_a?</span><span class='lparen'>(</span><span class='const'>Array</span><span class='rparen'>)</span> <span class='op'>&amp;&amp;</span> <span class='id tok'>tok</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='symbol'>:list</span>
      <span class='kw'>if</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>([</span><span class='tstring_end'>'</span></span><span class='period'>.</span><span class='id include?'>include?</span><span class='lparen'>(</span><span class='id tok'>tok</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span><span class='rparen'>)</span>
        <span class='ivar'>@list_depth</span> <span class='op'>+=</span> <span class='int'>1</span>
      <span class='kw'>else</span>
        <span class='ivar'>@list_depth</span> <span class='op'>-=</span> <span class='int'>1</span>
        <span class='ivar'>@prefix_depth</span> <span class='op'>=</span> <span class='kw'>nil</span> <span class='kw'>if</span> <span class='ivar'>@prefix_depth</span> <span class='op'>&amp;&amp;</span> <span class='ivar'>@list_depth</span> <span class='op'>&lt;</span> <span class='ivar'>@prefix_depth</span>
      <span class='kw'>end</span>
    <span class='kw'>end</span>

    <span class='kw'>if</span> <span class='id tok'>tok</span><span class='period'>.</span><span class='id is_a?'>is_a?</span><span class='lparen'>(</span><span class='const'>Array</span><span class='rparen'>)</span> <span class='op'>&amp;&amp;</span> <span class='id tok'>tok</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='symbol'>:atom</span> <span class='op'>&amp;&amp;</span> <span class='id tok'>tok</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id is_a?'>is_a?</span><span class='lparen'>(</span><span class='const'>Symbol</span><span class='rparen'>)</span>
      <span class='id value'>value</span> <span class='op'>=</span> <span class='id tok'>tok</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id to_s'>to_s</span>

      <span class='comment'># We previously parsed a PREFIX, this will be the map value
</span>      <span class='ivar'>@parsed_prefix</span> <span class='op'>=</span> <span class='id value'>value</span><span class='period'>.</span><span class='id chop'>chop</span> <span class='kw'>if</span> <span class='ivar'>@prefix_depth</span> <span class='op'>&amp;&amp;</span> <span class='ivar'>@prefix_depth</span> <span class='op'>&gt;</span> <span class='int'>0</span>
      
      <span class='comment'># If we just saw PREFIX, then this starts the parsing mode
</span>      <span class='ivar'>@prefix_depth</span> <span class='op'>=</span> <span class='ivar'>@list_depth</span> <span class='op'>+</span> <span class='int'>1</span> <span class='kw'>if</span> <span class='id value'>value</span> <span class='op'>=~</span> <span class='const'>PREFIX</span>
      
      <span class='comment'># If the token is of the form 'prefix:suffix', create a URI and give it the
</span>      <span class='comment'># token as a QName
</span>      <span class='kw'>if</span> <span class='id value'>value</span><span class='period'>.</span><span class='id to_s'>to_s</span> <span class='op'>=~</span> <span class='const'>PNAME</span> <span class='op'>&amp;&amp;</span> <span class='id base'>base</span> <span class='op'>=</span> <span class='id prefix'>prefix</span><span class='lparen'>(</span><span class='backref'>$1</span><span class='rparen'>)</span>
        <span class='id suffix'>suffix</span> <span class='op'>=</span> <span class='backref'>$2</span>
        <span class='comment'>#STDERR.puts &quot;read_tok lexical: pfx: #{$1.inspect} =&gt; #{prefix($1).inspect}, sfx: #{suffix.inspect}&quot;
</span>        <span class='id suffix'>suffix</span> <span class='op'>=</span> <span class='id suffix'>suffix</span><span class='period'>.</span><span class='id sub'>sub</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>^\#</span><span class='regexp_end'>/</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span> <span class='kw'>if</span> <span class='id base'>base</span><span class='period'>.</span><span class='id to_s'>to_s</span><span class='period'>.</span><span class='id index'>index</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>#</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
        <span class='id uri'>uri</span> <span class='op'>=</span> <span class='const'>RDF</span><span class='op'>::</span><span class='const'>URI</span><span class='lparen'>(</span><span class='id base'>base</span><span class='period'>.</span><span class='id to_s'>to_s</span> <span class='op'>+</span> <span class='id suffix'>suffix</span><span class='rparen'>)</span>
        <span class='comment'>#STDERR.puts &quot;read_tok lexical uri: #{uri.inspect}&quot;
</span>
        <span class='comment'># Cause URI to be serialized as a lexical
</span>        <span class='id uri'>uri</span><span class='period'>.</span><span class='id lexical'>lexical</span> <span class='op'>=</span> <span class='id value'>value</span>
        <span class='lbracket'>[</span><span class='symbol'>:atom</span><span class='comma'>,</span> <span class='id uri'>uri</span><span class='rbracket'>]</span>
      <span class='kw'>else</span>
        <span class='id tok'>tok</span>
      <span class='kw'>end</span>
    <span class='kw'>else</span>
      <span class='id tok'>tok</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="skip_comments-instance_method">
  
    - <strong>skip_comments</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p class="note returns_void">This method returns an undefined value.</p>

  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


240
241
242
243
244
245
246
247
248
249</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'vendor/bundler/ruby/1.8/gems/sxp-0.0.14/lib/sxp/reader/sparql.rb', line 240</span>

<span class='kw'>def</span> <span class='id skip_comments'>skip_comments</span>
  <span class='kw'>until</span> <span class='id eof?'>eof?</span>
    <span class='kw'>case</span> <span class='lparen'>(</span><span class='id char'>char</span> <span class='op'>=</span> <span class='id peek_char'>peek_char</span><span class='rparen'>)</span><span class='period'>.</span><span class='id chr'>chr</span>
      <span class='kw'>when</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>\s+</span><span class='regexp_end'>/</span></span> <span class='kw'>then</span> <span class='id skip_char'>skip_char</span>
      <span class='kw'>when</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>;</span><span class='regexp_end'>/</span></span>   <span class='kw'>then</span> <span class='id skip_line'>skip_line</span>
      <span class='kw'>when</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>#</span><span class='regexp_end'>/</span></span>   <span class='kw'>then</span> <span class='id skip_line'>skip_line</span>
      <span class='kw'>else</span> <span class='kw'>break</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="variable-instance_method">
  
    - (<tt><span class='object_link'><a href="../../RDF/Query/Variable.html" title="RDF::Query::Variable (class)">RDF::Query::Variable</a></span></tt>) <strong>variable</strong>(id, distinguished = true) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>Return variable allocated to an ID.
If no ID is provided, a new variable
is allocated. Otherwise, any previous assignment will be used.</p>

<p>The variable has a #distinguished? method applied depending on if this
is a disinguished or non-distinguished variable. Non-distinguished
variables are effectively the same as BNodes.</p>

  </div>
</div>
<div class="tags">
  <h3>Returns:</h3>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../../RDF/Query/Variable.html" title="RDF::Query::Variable (class)">RDF::Query::Variable</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


260
261
262
263
264
265
266
267
268
269
270
271
272
273
274
275</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'vendor/bundler/ruby/1.8/gems/sxp-0.0.14/lib/sxp/reader/sparql.rb', line 260</span>

<span class='kw'>def</span> <span class='id variable'>variable</span><span class='lparen'>(</span><span class='id id'>id</span><span class='comma'>,</span> <span class='id distinguished'>distinguished</span> <span class='op'>=</span> <span class='kw'>true</span><span class='rparen'>)</span>
  <span class='id id'>id</span> <span class='op'>=</span> <span class='kw'>nil</span> <span class='kw'>if</span> <span class='id id'>id</span><span class='period'>.</span><span class='id to_s'>to_s</span><span class='period'>.</span><span class='id empty?'>empty?</span>
  
  <span class='kw'>if</span> <span class='id id'>id</span>
    <span class='ivar'>@vars</span> <span class='op'>||=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
    <span class='ivar'>@vars</span><span class='lbracket'>[</span><span class='id id'>id</span><span class='rbracket'>]</span> <span class='op'>||=</span> <span class='kw'>begin</span>
      <span class='id v'>v</span> <span class='op'>=</span> <span class='const'>RDF</span><span class='op'>::</span><span class='const'>Query</span><span class='op'>::</span><span class='const'>Variable</span><span class='period'>.</span><span class='id new'>new</span><span class='lparen'>(</span><span class='id id'>id</span><span class='rparen'>)</span>
      <span class='id v'>v</span><span class='period'>.</span><span class='id distinguished'>distinguished</span> <span class='op'>=</span> <span class='id distinguished'>distinguished</span>
      <span class='id v'>v</span>
    <span class='kw'>end</span>
  <span class='kw'>else</span>
    <span class='id v'>v</span> <span class='op'>=</span> <span class='const'>RDF</span><span class='op'>::</span><span class='const'>Query</span><span class='op'>::</span><span class='const'>Variable</span><span class='period'>.</span><span class='id new'>new</span>
    <span class='id v'>v</span><span class='period'>.</span><span class='id distinguished'>distinguished</span> <span class='op'>=</span> <span class='id distinguished'>distinguished</span>
    <span class='id v'>v</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>
    
    <div id="footer">
  Generated on Mon Aug 22 16:49:29 2011 by 
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.7.2 (ruby-1.9.2).
</div>

  </body>
</html>