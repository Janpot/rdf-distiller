<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>
  Module: SPARQL
  
    &mdash; Web portal for RDF.rb.
  
</title>

  <link rel="stylesheet" href="css/style.css" type="text/css" media="screen" charset="utf-8" />

  <link rel="stylesheet" href="css/common.css" type="text/css" media="screen" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  hasFrames = window.top.frames.main ? true : false;
  relpath = '';
  framesUrl = "frames.html#!" + escape(window.location.href);
</script>


  <script type="text/javascript" charset="utf-8" src="js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="js/app.js"></script>


  </head>
  <body>
    <div id="header">
      <div id="menu">
  
    <a href="_index.html">Index (S)</a> &raquo;
    
    
    <span class="title">SPARQL</span>
  

  <div class="noframes"><span class="title">(</span><a href="." target="_top">no frames</a><span class="title">)</span></div>
</div>

      <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="class_list.html">
      Class List
    </a>
  
    <a class="full_list_link" id="method_list_link"
        href="method_list.html">
      Method List
    </a>
  
    <a class="full_list_link" id="file_list_link"
        href="file_list.html">
      File List
    </a>
  
</div>
      <div class="clear"></div>
    </div>

    <iframe id="search_frame"></iframe>

    <div id="content"><h1>Module: SPARQL
  
  
  
</h1>

<dl class="box">
  
  
    
  
    
  
  
  
    <dt class="r1 last">Defined in:</dt>
    <dd class="r1 last">vendor/bundler/ruby/1.8/bundler/gems/sparql-f703f9de4555/lib/sparql.rb<span class="defines">,<br />
  vendor/bundler/ruby/1.8/bundler/gems/sparql-client-34a6d6e90758/lib/sparql/client/query.rb,<br /> vendor/bundler/ruby/1.8/bundler/gems/sparql-client-34a6d6e90758/lib/sparql/client/repository.rb,<br /> vendor/bundler/ruby/1.8/bundler/gems/sparql-client-34a6d6e90758/lib/sparql/client/version.rb,<br /> vendor/bundler/ruby/1.8/bundler/gems/sparql-client-34a6d6e90758/lib/sparql/client.rb,<br /> vendor/bundler/ruby/1.8/bundler/gems/sparql-f703f9de4555/lib/sparql/algebra/evaluatable.rb,<br /> vendor/bundler/ruby/1.8/bundler/gems/sparql-f703f9de4555/lib/sparql/algebra/expression.rb,<br /> vendor/bundler/ruby/1.8/bundler/gems/sparql-f703f9de4555/lib/sparql/algebra/operator/add.rb,<br /> vendor/bundler/ruby/1.8/bundler/gems/sparql-f703f9de4555/lib/sparql/algebra/operator/and.rb,<br /> vendor/bundler/ruby/1.8/bundler/gems/sparql-f703f9de4555/lib/sparql/algebra/operator/asc.rb,<br /> vendor/bundler/ruby/1.8/bundler/gems/sparql-f703f9de4555/lib/sparql/algebra/operator/ask.rb,<br /> vendor/bundler/ruby/1.8/bundler/gems/sparql-f703f9de4555/lib/sparql/algebra/operator/base.rb,<br /> vendor/bundler/ruby/1.8/bundler/gems/sparql-f703f9de4555/lib/sparql/algebra/operator/bgp.rb,<br /> vendor/bundler/ruby/1.8/bundler/gems/sparql-f703f9de4555/lib/sparql/algebra/operator/bound.rb,<br /> vendor/bundler/ruby/1.8/bundler/gems/sparql-f703f9de4555/lib/sparql/algebra/operator/compare.rb,<br /> vendor/bundler/ruby/1.8/bundler/gems/sparql-f703f9de4555/lib/sparql/algebra/operator/construct.rb,<br /> vendor/bundler/ruby/1.8/bundler/gems/sparql-f703f9de4555/lib/sparql/algebra/operator/dataset.rb,<br /> vendor/bundler/ruby/1.8/bundler/gems/sparql-f703f9de4555/lib/sparql/algebra/operator/datatype.rb,<br /> vendor/bundler/ruby/1.8/bundler/gems/sparql-f703f9de4555/lib/sparql/algebra/operator/desc.rb,<br /> vendor/bundler/ruby/1.8/bundler/gems/sparql-f703f9de4555/lib/sparql/algebra/operator/describe.rb,<br /> vendor/bundler/ruby/1.8/bundler/gems/sparql-f703f9de4555/lib/sparql/algebra/operator/distinct.rb,<br /> vendor/bundler/ruby/1.8/bundler/gems/sparql-f703f9de4555/lib/sparql/algebra/operator/divide.rb,<br /> vendor/bundler/ruby/1.8/bundler/gems/sparql-f703f9de4555/lib/sparql/algebra/operator/equal.rb,<br /> vendor/bundler/ruby/1.8/bundler/gems/sparql-f703f9de4555/lib/sparql/algebra/operator/exprlist.rb,<br /> vendor/bundler/ruby/1.8/bundler/gems/sparql-f703f9de4555/lib/sparql/algebra/operator/filter.rb,<br /> vendor/bundler/ruby/1.8/bundler/gems/sparql-f703f9de4555/lib/sparql/algebra/operator/graph.rb,<br /> vendor/bundler/ruby/1.8/bundler/gems/sparql-f703f9de4555/lib/sparql/algebra/operator/greater_than.rb,<br /> vendor/bundler/ruby/1.8/bundler/gems/sparql-f703f9de4555/lib/sparql/algebra/operator/greater_than_or_equal.rb,<br /> vendor/bundler/ruby/1.8/bundler/gems/sparql-f703f9de4555/lib/sparql/algebra/operator/is_blank.rb,<br /> vendor/bundler/ruby/1.8/bundler/gems/sparql-f703f9de4555/lib/sparql/algebra/operator/is_iri.rb,<br /> vendor/bundler/ruby/1.8/bundler/gems/sparql-f703f9de4555/lib/sparql/algebra/operator/is_literal.rb,<br /> vendor/bundler/ruby/1.8/bundler/gems/sparql-f703f9de4555/lib/sparql/algebra/operator/join.rb,<br /> vendor/bundler/ruby/1.8/bundler/gems/sparql-f703f9de4555/lib/sparql/algebra/operator/lang.rb,<br /> vendor/bundler/ruby/1.8/bundler/gems/sparql-f703f9de4555/lib/sparql/algebra/operator/lang_matches.rb,<br /> vendor/bundler/ruby/1.8/bundler/gems/sparql-f703f9de4555/lib/sparql/algebra/operator/left_join.rb,<br /> vendor/bundler/ruby/1.8/bundler/gems/sparql-f703f9de4555/lib/sparql/algebra/operator/less_than.rb,<br /> vendor/bundler/ruby/1.8/bundler/gems/sparql-f703f9de4555/lib/sparql/algebra/operator/less_than_or_equal.rb,<br /> vendor/bundler/ruby/1.8/bundler/gems/sparql-f703f9de4555/lib/sparql/algebra/operator/minus.rb,<br /> vendor/bundler/ruby/1.8/bundler/gems/sparql-f703f9de4555/lib/sparql/algebra/operator/multiply.rb,<br /> vendor/bundler/ruby/1.8/bundler/gems/sparql-f703f9de4555/lib/sparql/algebra/operator/not.rb,<br /> vendor/bundler/ruby/1.8/bundler/gems/sparql-f703f9de4555/lib/sparql/algebra/operator/not_equal.rb,<br /> vendor/bundler/ruby/1.8/bundler/gems/sparql-f703f9de4555/lib/sparql/algebra/operator/or.rb,<br /> vendor/bundler/ruby/1.8/bundler/gems/sparql-f703f9de4555/lib/sparql/algebra/operator/order.rb,<br /> vendor/bundler/ruby/1.8/bundler/gems/sparql-f703f9de4555/lib/sparql/algebra/operator/plus.rb,<br /> vendor/bundler/ruby/1.8/bundler/gems/sparql-f703f9de4555/lib/sparql/algebra/operator/prefix.rb,<br /> vendor/bundler/ruby/1.8/bundler/gems/sparql-f703f9de4555/lib/sparql/algebra/operator/project.rb,<br /> vendor/bundler/ruby/1.8/bundler/gems/sparql-f703f9de4555/lib/sparql/algebra/operator/reduced.rb,<br /> vendor/bundler/ruby/1.8/bundler/gems/sparql-f703f9de4555/lib/sparql/algebra/operator/regex.rb,<br /> vendor/bundler/ruby/1.8/bundler/gems/sparql-f703f9de4555/lib/sparql/algebra/operator/same_term.rb,<br /> vendor/bundler/ruby/1.8/bundler/gems/sparql-f703f9de4555/lib/sparql/algebra/operator/slice.rb,<br /> vendor/bundler/ruby/1.8/bundler/gems/sparql-f703f9de4555/lib/sparql/algebra/operator/str.rb,<br /> vendor/bundler/ruby/1.8/bundler/gems/sparql-f703f9de4555/lib/sparql/algebra/operator/subtract.rb,<br /> vendor/bundler/ruby/1.8/bundler/gems/sparql-f703f9de4555/lib/sparql/algebra/operator/union.rb,<br /> vendor/bundler/ruby/1.8/bundler/gems/sparql-f703f9de4555/lib/sparql/algebra/operator.rb,<br /> vendor/bundler/ruby/1.8/bundler/gems/sparql-f703f9de4555/lib/sparql/algebra/query.rb,<br /> vendor/bundler/ruby/1.8/bundler/gems/sparql-f703f9de4555/lib/sparql/algebra/version.rb,<br /> vendor/bundler/ruby/1.8/bundler/gems/sparql-f703f9de4555/lib/sparql/algebra.rb,<br /> vendor/bundler/ruby/1.8/bundler/gems/sparql-f703f9de4555/lib/sparql/grammar/lexer.rb,<br /> vendor/bundler/ruby/1.8/bundler/gems/sparql-f703f9de4555/lib/sparql/grammar/parser.rb,<br /> vendor/bundler/ruby/1.8/bundler/gems/sparql-f703f9de4555/lib/sparql/grammar.rb,<br /> vendor/bundler/ruby/1.8/bundler/gems/sparql-f703f9de4555/lib/sparql/results.rb,<br /> vendor/bundler/ruby/1.8/bundler/gems/sparql-f703f9de4555/lib/sparql/version.rb</span>
</dd>
  
</dl>
<div class="clear"></div>

<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    <p>A SPARQL for RDF.rb.</p>


  </div>
</div>
<div class="tags">
  

  <p class="tag_title">See Also:</p>
  <ul class="see">
    
      <li><a href="http://www.w3.org/TR/rdf-sparql-query" target="_parent" title="http://www.w3.org/TR/rdf-sparql-query">http://www.w3.org/TR/rdf-sparql-query</a></li>
    
  </ul>

</div><h2>Defined Under Namespace</h2>
<p class="children">
  
    
      <strong class="modules">Modules:</strong> <span class='object_link'><a href="SPARQL/Algebra.html" title="SPARQL::Algebra (module)">Algebra</a></span>, <span class='object_link'><a href="SPARQL/Grammar.html" title="SPARQL::Grammar (module)">Grammar</a></span>, <span class='object_link'><a href="SPARQL/Results.html" title="SPARQL::Results (module)">Results</a></span>, <span class='object_link'><a href="SPARQL/VERSION.html" title="SPARQL::VERSION (module)">VERSION</a></span>
    
  
    
      <strong class="classes">Classes:</strong> <span class='object_link'><a href="SPARQL/Client.html" title="SPARQL::Client (class)">Client</a></span>, <span class='object_link'><a href="SPARQL/MalformedQuery.html" title="SPARQL::MalformedQuery (class)">MalformedQuery</a></span>, <span class='object_link'><a href="SPARQL/QueryRequestRefused.html" title="SPARQL::QueryRequestRefused (class)">QueryRequestRefused</a></span>
    
  
</p>

  <h2>Constant Summary</h2>
  
    <dl class="constants">
      
        <dt id="ERROR_MESSAGE-constant" class="">ERROR_MESSAGE =
          
        </dt>
        <dd><pre class="code"><span class='string val'>%q(&lt;!DOCTYPE HTML PUBLIC &quot;-//W3C//DTD HTML 4.01//EN&quot; &quot;http://www.w3.org/TR/html4/strict.dtd&quot;&gt;
&lt;html&gt;
  &lt;head&gt;
    &lt;title&gt;SPARQL Processing Service: %s&lt;/title&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;p&gt;%s: %s&lt;/p&gt;
  &lt;/body&gt;
&lt;/html&gt;
)</span><span class='dot token'>.</span><span class='rubyid_freeze identifier id'>freeze</span>
</pre></dd>
      
    </dl>
  







  
    <h2>
      Class Method Summary
      <small>(<a href="#" class="summary_toggle">collapse</a>)</small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#execute-class_method" title="execute (class method)">+ (RDF::Graph, ...) <strong>execute</strong>(query, queryable, options = {}) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Parse and execute the given SPARQL <code>query</code> string against <code>queriable</code>.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#first_content_type-class_method" title="first_content_type (class method)">+ (String) <strong>first_content_type</strong>(acceptable, available) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Find a content_type from a list using an ordered list of acceptable content types
using wildcard matching.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#parse-class_method" title="parse (class method)">+ (SPARQL::Query) <strong>parse</strong>(query, options = {}) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Parse the given SPARQL <code>query</code> string.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#serialize_exception-class_method" title="serialize_exception (class method)">+ (String) <strong>serialize_exception</strong>(exception, options = {}) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Serialize error results.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#serialize_results-class_method" title="serialize_results (class method)">+ (String) <strong>serialize_results</strong>(solutions, options = {}) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Serialize solutions using the determined format.</p>
</div></span>
  
</li>

      
    </ul>
  



  <div id="class_method_details" class="method_details_list">
    <h2>Class Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="execute-class_method">
  
    + (<tt><span class='object_link'><a href="RDF/Graph.html" title="RDF::Graph (class)">RDF::Graph</a></span></tt>, ...) <strong>execute</strong>(query, queryable, options = {}) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Parse and execute the given SPARQL <code>query</code> string against <code>queriable</code>.</p>

<p>Requires a queryable object (such as an RDF::Repository), into which the dataset will be loaded.</p>

<p>Optionally takes a list of URIs to load as default or named graphs
into <code>queryable</code>.</p>

<p>Note, if default or named graphs are specified as options (protocol elements),
or the query references specific default or named graphs the graphs are either
presumed to be existant in <code>queryable</code> or are loaded into <code>queryable</code> depending
on the presense and value of the :load_datasets option.</p>

<p>Attempting to load into an immutable <code>queryable</code> will result in a TypeError.</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
      <pre class="example code"><code><span class='rubyid_repository identifier id'>repository</span> <span class='assign token'>=</span> <span class='rubyid_RDF constant id'>RDF</span><span class='colon2 op'>::</span><span class='rubyid_Repository constant id'>Repository</span><span class='dot token'>.</span><span class='rubyid_new identifier id'>new</span>
<span class='rubyid_results identifier id'>results</span> <span class='assign token'>=</span> <span class='rubyid_SPARQL constant id'>SPARQL</span><span class='dot token'>.</span><span class='rubyid_execute identifier id'>execute</span><span class='lparen token'>(</span><span class='string val'>&quot;SELECT * WHERE { ?s ?p ?o }&quot;</span><span class='comma token'>,</span> <span class='rubyid_repository identifier id'>repository</span><span class='rparen token'>)</span>
</code></pre>
    
  </div>
<p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>query</span>
      
      
        <span class='type'>(<tt>IO</tt>, <tt>StringIO</tt>, <tt><span class='object_link'><a href="String.html" title="String (class)">String</a></span></tt>, <tt>#to_s</tt>)</span>
      
      
      
    </li>
  
    <li>
      
        <span class='name'>options</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="Hash.html" title="Hash (class)">Hash</a></span>{<span class='object_link'><a href="Symbol.html" title="Symbol (class)">Symbol</a></span> =&gt; <span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span>}</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>{}</tt>)</em>
      
      
    </li>
  
</ul>

  
    
    
    
    
    
    
    <p class="tag_title">Options Hash (<tt>options</tt>):</p>
    <ul class="option">
      
        <li>
          <span class="name">:queryable</span>
          <span class="type">(<tt><span class='object_link'><a href="RDF/Queryable.html" title="RDF::Queryable (module)">RDF::Queryable</a></span></tt>)</span>
          <span class="default">
            
          </span>
          
        </li>
      
        <li>
          <span class="name">:load_datasets</span>
          <span class="type">(<tt><span class='object_link'><a href="RDF/URI.html" title="RDF::URI (class)">RDF::URI</a></span></tt>, <tt><span class='object_link'><a href="String.html" title="String (class)">String</a></span></tt>, <tt><span class='object_link'><a href="Array.html" title="Array (class)">Array</a></span>&lt;<span class='object_link'><a href="RDF/URI.html" title="RDF::URI (class)">RDF::URI</a></span>, <span class='object_link'><a href="String.html" title="String (class)">String</a></span>&gt;</tt>)</span>
          <span class="default">
            
          </span>
          
            &mdash; <div class='inline'><p>One or more URIs used to initialize a new instance of <code>queryable</code> in the default context.</p>
</div>
          
        </li>
      
        <li>
          <span class="name">:default_graph_uri</span>
          <span class="type">(<tt><span class='object_link'><a href="RDF/URI.html" title="RDF::URI (class)">RDF::URI</a></span></tt>, <tt><span class='object_link'><a href="String.html" title="String (class)">String</a></span></tt>, <tt><span class='object_link'><a href="Array.html" title="Array (class)">Array</a></span>&lt;<span class='object_link'><a href="RDF/URI.html" title="RDF::URI (class)">RDF::URI</a></span>, <span class='object_link'><a href="String.html" title="String (class)">String</a></span>&gt;</tt>)</span>
          <span class="default">
            
          </span>
          
            &mdash; <div class='inline'><p>One or more URIs used to initialize a new instance of <code>queryable</code> in the default context.</p>
</div>
          
        </li>
      
        <li>
          <span class="name">:named_graph_uri</span>
          <span class="type">(<tt><span class='object_link'><a href="RDF/URI.html" title="RDF::URI (class)">RDF::URI</a></span></tt>, <tt><span class='object_link'><a href="String.html" title="String (class)">String</a></span></tt>, <tt><span class='object_link'><a href="Array.html" title="Array (class)">Array</a></span>&lt;<span class='object_link'><a href="RDF/URI.html" title="RDF::URI (class)">RDF::URI</a></span>, <span class='object_link'><a href="String.html" title="String (class)">String</a></span>&gt;</tt>)</span>
          <span class="default">
            
          </span>
          
            &mdash; <div class='inline'><p>One or more URIs used to initialize the <code>queryable</code> as a named context.</p>
</div>
          
        </li>
      
    </ul>
  

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="RDF/Graph.html" title="RDF::Graph (class)">RDF::Graph</a></span></tt>, <tt><span class='object_link'><a href="RDF/Query/Solutions.html" title="RDF::Query::Solutions (class)">RDF::Query::Solutions</a></span></tt>, <tt>Boolean</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Note, results may be used with <span class='object_link'><a href="#serialize_results-class_method" title="SPARQL.serialize_results (method)">serialize_results</a></span> to obtain appropriate
output encoding.</p>
</div>
      
    </li>
  
</ul>
<p class="tag_title">Raises:</p>
<ul class="raise">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="SPARQL/MalformedQuery.html" title="SPARQL::MalformedQuery (class)">SPARQL::MalformedQuery</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>on invalid input</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'vendor/bundler/ruby/1.8/bundler/gems/sparql-f703f9de4555/lib/sparql.rb', line 66</span>

<span class='rubyid_def def kw'>def</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_execute identifier id'>execute</span><span class='lparen token'>(</span><span class='rubyid_query identifier id'>query</span><span class='comma token'>,</span> <span class='rubyid_queryable identifier id'>queryable</span><span class='comma token'>,</span> <span class='rubyid_options identifier id'>options</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span><span class='rparen token'>)</span>
  <span class='rubyid_query identifier id'>query</span> <span class='assign token'>=</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_parse identifier id'>parse</span><span class='lparen token'>(</span><span class='rubyid_query identifier id'>query</span><span class='comma token'>,</span> <span class='rubyid_options identifier id'>options</span><span class='rparen token'>)</span>
  <span class='rubyid_queryable identifier id'>queryable</span> <span class='assign token'>=</span> <span class='rubyid_queryable identifier id'>queryable</span> <span class='orop op'>||</span> <span class='rubyid_RDF constant id'>RDF</span><span class='colon2 op'>::</span><span class='rubyid_Repository constant id'>Repository</span><span class='dot token'>.</span><span class='rubyid_new identifier id'>new</span>
  
  <span class='rubyid_case case kw'>case</span> <span class='rubyid_options identifier id'>options</span><span class='dot token'>.</span><span class='rubyid_fetch identifier id'>fetch</span><span class='lparen token'>(</span><span class='symbol val'>:debug</span><span class='comma token'>,</span> <span class='rubyid_nil nil kw'>nil</span><span class='rparen token'>)</span>
  <span class='rubyid_when when kw'>when</span> <span class='rubyid_TrueClass constant id'>TrueClass</span>
    <span class='rubyid_puts identifier id'>puts</span> <span class='rubyid_query identifier id'>query</span><span class='dot token'>.</span><span class='rubyid_to_sxp identifier id'>to_sxp</span>
  <span class='rubyid_when when kw'>when</span> <span class='rubyid_Array constant id'>Array</span>
    <span class='rubyid_options identifier id'>options</span><span class='lbrack token'>[</span><span class='symbol val'>:debug</span><span class='rbrack token'>]</span> <span class='lshft op'>&lt;&lt;</span> <span class='rubyid_query identifier id'>query</span><span class='dot token'>.</span><span class='rubyid_to_sxp identifier id'>to_sxp</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='rubyid_if if kw'>if</span> <span class='rubyid_options identifier id'>options</span><span class='dot token'>.</span><span class='rubyid_has_key? fid id'>has_key?</span><span class='lparen token'>(</span><span class='symbol val'>:load_datasets</span><span class='rparen token'>)</span>
    <span class='rubyid_queryable identifier id'>queryable</span> <span class='assign token'>=</span> <span class='rubyid_queryable identifier id'>queryable</span><span class='dot token'>.</span><span class='rubyid_class identifier id'>class</span><span class='dot token'>.</span><span class='rubyid_new identifier id'>new</span>
    <span class='lbrack token'>[</span><span class='rubyid_options identifier id'>options</span><span class='lbrack token'>[</span><span class='symbol val'>:default_graph_uri</span><span class='rbrack token'>]</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='rubyid_flatten identifier id'>flatten</span><span class='dot token'>.</span><span class='rubyid_each identifier id'>each</span> <span class='rubyid_do do kw'>do</span> <span class='bitor op'>|</span><span class='rubyid_uri identifier id'>uri</span><span class='bitor op'>|</span>
      <span class='rubyid_queryable identifier id'>queryable</span><span class='dot token'>.</span><span class='rubyid_load identifier id'>load</span><span class='lparen token'>(</span><span class='rubyid_uri identifier id'>uri</span><span class='rparen token'>)</span>
    <span class='rubyid_end end kw'>end</span>
    <span class='lbrack token'>[</span><span class='rubyid_options identifier id'>options</span><span class='lbrack token'>[</span><span class='symbol val'>:named_graph_uri</span><span class='rbrack token'>]</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='rubyid_flatten identifier id'>flatten</span><span class='dot token'>.</span><span class='rubyid_each identifier id'>each</span> <span class='rubyid_do do kw'>do</span> <span class='bitor op'>|</span><span class='rubyid_uri identifier id'>uri</span><span class='bitor op'>|</span>
      <span class='rubyid_queryable identifier id'>queryable</span><span class='dot token'>.</span><span class='rubyid_load identifier id'>load</span><span class='lparen token'>(</span><span class='rubyid_uri identifier id'>uri</span><span class='comma token'>,</span> <span class='symbol val'>:context</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='rubyid_uri identifier id'>uri</span><span class='rparen token'>)</span>
    <span class='rubyid_end end kw'>end</span>
  <span class='rubyid_end end kw'>end</span>
  <span class='rubyid_solutions identifier id'>solutions</span> <span class='assign token'>=</span> <span class='rubyid_query identifier id'>query</span><span class='dot token'>.</span><span class='rubyid_execute identifier id'>execute</span><span class='lparen token'>(</span><span class='rubyid_queryable identifier id'>queryable</span><span class='rparen token'>)</span>
<span class='rubyid_rescue rescue kw'>rescue</span> <span class='rubyid_SPARQL constant id'>SPARQL</span><span class='colon2 op'>::</span><span class='rubyid_Grammar constant id'>Grammar</span><span class='colon2 op'>::</span><span class='rubyid_Parser constant id'>Parser</span><span class='colon2 op'>::</span><span class='rubyid_Error constant id'>Error</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='rubyid_e identifier id'>e</span>
  <span class='rubyid_raise identifier id'>raise</span> <span class='rubyid_MalformedQuery constant id'>MalformedQuery</span><span class='comma token'>,</span> <span class='rubyid_e identifier id'>e</span><span class='dot token'>.</span><span class='rubyid_message identifier id'>message</span>
<span class='rubyid_rescue rescue kw'>rescue</span> <span class='rubyid_TypeError constant id'>TypeError</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='rubyid_e identifier id'>e</span>
  <span class='rubyid_raise identifier id'>raise</span> <span class='rubyid_QueryRequestRefused constant id'>QueryRequestRefused</span><span class='comma token'>,</span> <span class='rubyid_e identifier id'>e</span><span class='dot token'>.</span><span class='rubyid_message identifier id'>message</span>
<span class='rubyid_end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="first_content_type-class_method">
  
    + (<tt><span class='object_link'><a href="String.html" title="String (class)">String</a></span></tt>) <strong>first_content_type</strong>(acceptable, available) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Find a content_type from a list using an ordered list of acceptable content types
using wildcard matching</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>acceptable</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="Array.html" title="Array (class)">Array</a></span>&lt;<span class='object_link'><a href="String.html" title="String (class)">String</a></span>&gt;</tt>)</span>
      
      
      
    </li>
  
    <li>
      
        <span class='name'>available</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="Array.html" title="Array (class)">Array</a></span>&lt;<span class='object_link'><a href="String.html" title="String (class)">String</a></span>&gt;</tt>)</span>
      
      
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="String.html" title="String (class)">String</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>

  <p class="tag_title">See Also:</p>
  <ul class="see">
    
      <li><a href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.1" target="_parent" title="http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.1">http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.1</a></li>
    
  </ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


230
231
232
233
234
235
236
237
238</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'vendor/bundler/ruby/1.8/bundler/gems/sparql-f703f9de4555/lib/sparql/results.rb', line 230</span>

<span class='rubyid_def def kw'>def</span> <span class='rubyid_first_content_type identifier id'>first_content_type</span><span class='lparen token'>(</span><span class='rubyid_acceptable identifier id'>acceptable</span><span class='comma token'>,</span> <span class='rubyid_available identifier id'>available</span><span class='rparen token'>)</span>
  <span class='rubyid_return return kw'>return</span> <span class='rubyid_acceptable identifier id'>acceptable</span><span class='dot token'>.</span><span class='rubyid_first identifier id'>first</span> <span class='rubyid_if if_mod kw'>if</span> <span class='rubyid_available identifier id'>available</span><span class='dot token'>.</span><span class='rubyid_empty? fid id'>empty?</span>
  <span class='rubyid_available identifier id'>available</span><span class='dot token'>.</span><span class='rubyid_flatten! fid id'>flatten!</span>
  <span class='rubyid_acceptable identifier id'>acceptable</span><span class='dot token'>.</span><span class='rubyid_each identifier id'>each</span> <span class='rubyid_do do kw'>do</span> <span class='bitor op'>|</span><span class='rubyid_pattern identifier id'>pattern</span><span class='bitor op'>|</span>
    <span class='rubyid_type identifier id'>type</span> <span class='assign token'>=</span> <span class='rubyid_available identifier id'>available</span><span class='dot token'>.</span><span class='rubyid_detect identifier id'>detect</span> <span class='lbrace token'>{</span> <span class='bitor op'>|</span><span class='rubyid_t identifier id'>t</span><span class='bitor op'>|</span> <span class='rubyid_File constant id'>File</span><span class='dot token'>.</span><span class='rubyid_fnmatch identifier id'>fnmatch</span><span class='lparen token'>(</span><span class='rubyid_pattern identifier id'>pattern</span><span class='comma token'>,</span> <span class='rubyid_t identifier id'>t</span><span class='rparen token'>)</span> <span class='rbrace token'>}</span>
    <span class='rubyid_return return kw'>return</span> <span class='rubyid_type identifier id'>type</span> <span class='rubyid_if if_mod kw'>if</span> <span class='rubyid_type identifier id'>type</span>
  <span class='rubyid_end end kw'>end</span>
  <span class='rubyid_nil nil kw'>nil</span>
<span class='rubyid_end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="parse-class_method">
  
    + (<tt>SPARQL::Query</tt>) <strong>parse</strong>(query, options = {}) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Parse the given SPARQL <code>query</code> string.</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
      <pre class="example code"><code><span class='rubyid_parser identifier id'>parser</span> <span class='assign token'>=</span> <span class='rubyid_SPARQL constant id'>SPARQL</span><span class='dot token'>.</span><span class='rubyid_parse identifier id'>parse</span><span class='lparen token'>(</span><span class='string val'>&quot;SELECT * WHERE { ?s ?p ?o }&quot;</span><span class='rparen token'>)</span>
<span class='rubyid_result identifier id'>result</span> <span class='assign token'>=</span> <span class='rubyid_parser identifier id'>parser</span><span class='dot token'>.</span><span class='rubyid_parse identifier id'>parse</span>
</code></pre>
    
  </div>
<p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>query</span>
      
      
        <span class='type'>(<tt>IO</tt>, <tt>StringIO</tt>, <tt><span class='object_link'><a href="String.html" title="String (class)">String</a></span></tt>, <tt>#to_s</tt>)</span>
      
      
      
    </li>
  
    <li>
      
        <span class='name'>options</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="Hash.html" title="Hash (class)">Hash</a></span>{<span class='object_link'><a href="Symbol.html" title="Symbol (class)">Symbol</a></span> =&gt; <span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span>}</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>{}</tt>)</em>
      
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>SPARQL::Query</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>The resulting query may be executed against
a <code>queryable</code> object such as an RDF::Graph
or RDF::Repository.</p>
</div>
      
    </li>
  
</ul>
<p class="tag_title">Raises:</p>
<ul class="raise">
  
    <li>
      
      
        <span class='type'>(<tt>Parser::Error</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>on invalid input</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


30
31
32</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'vendor/bundler/ruby/1.8/bundler/gems/sparql-f703f9de4555/lib/sparql.rb', line 30</span>

<span class='rubyid_def def kw'>def</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_parse identifier id'>parse</span><span class='lparen token'>(</span><span class='rubyid_query identifier id'>query</span><span class='comma token'>,</span> <span class='rubyid_options identifier id'>options</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span><span class='rparen token'>)</span>
  <span class='rubyid_query identifier id'>query</span> <span class='assign token'>=</span> <span class='rubyid_Grammar constant id'>Grammar</span><span class='colon2 op'>::</span><span class='rubyid_Parser constant id'>Parser</span><span class='dot token'>.</span><span class='rubyid_new identifier id'>new</span><span class='lparen token'>(</span><span class='rubyid_query identifier id'>query</span><span class='comma token'>,</span> <span class='rubyid_options identifier id'>options</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='rubyid_parse identifier id'>parse</span>
<span class='rubyid_end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="serialize_exception-class_method">
  
    + (<tt><span class='object_link'><a href="String.html" title="String (class)">String</a></span></tt>) <strong>serialize_exception</strong>(exception, options = {}) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Serialize error results</p>

<p>Returns appropriate content based upon an execution exception</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>exception</span>
      
      
        <span class='type'>(<tt>Exception</tt>)</span>
      
      
      
    </li>
  
    <li>
      
        <span class='name'>options</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="Hash.html" title="Hash (class)">Hash</a></span>{<span class='object_link'><a href="Symbol.html" title="Symbol (class)">Symbol</a></span> =&gt; <span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span>}</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>{}</tt>)</em>
      
      
    </li>
  
</ul>

  
    
    
    
    
    <p class="tag_title">Options Hash (<tt>options</tt>):</p>
    <ul class="option">
      
        <li>
          <span class="name">Format</span>
          <span class="type">(<tt>:format</tt>)</span>
          <span class="default">
            
          </span>
          
            &mdash; <div class='inline'><p>of results, one of :html, :json or :xml.
May also be an RDF::Writer format to serialize DESCRIBE or CONSTRUCT results</p>
</div>
          
        </li>
      
        <li>
          <span class="name">Format</span>
          <span class="type">(<tt>:content_type</tt>)</span>
          <span class="default">
            
          </span>
          
            &mdash; <div class='inline'><p>of results, one of &#39;application/sparql-results+json&#39; or &#39;application/sparql-results+xml&#39;
May also be an RDF::Writer content_type to serialize DESCRIBE or CONSTRUCT results</p>
</div>
          
        </li>
      
    </ul>
  

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="String.html" title="String (class)">String</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>String with serialized results and #content_type</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


255
256
257
258
259
260
261
262
263
264
265
266
267
268
269
270
271
272
273
274
275
276
277
278</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'vendor/bundler/ruby/1.8/bundler/gems/sparql-f703f9de4555/lib/sparql/results.rb', line 255</span>

<span class='rubyid_def def kw'>def</span> <span class='rubyid_serialize_exception identifier id'>serialize_exception</span><span class='lparen token'>(</span><span class='rubyid_exception identifier id'>exception</span><span class='comma token'>,</span> <span class='rubyid_options identifier id'>options</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span><span class='rparen token'>)</span>
  <span class='rubyid_format identifier id'>format</span> <span class='assign token'>=</span> <span class='rubyid_options identifier id'>options</span><span class='lbrack token'>[</span><span class='symbol val'>:format</span><span class='rbrack token'>]</span>
  <span class='rubyid_content_type identifier id'>content_type</span> <span class='assign token'>=</span> <span class='rubyid_options identifier id'>options</span><span class='lbrack token'>[</span><span class='symbol val'>:content_type</span><span class='rbrack token'>]</span>
  <span class='rubyid_content_type identifier id'>content_type</span> <span class='opasgn op'>||=</span> <span class='rubyid_RDF constant id'>RDF</span><span class='colon2 op'>::</span><span class='rubyid_Query constant id'>Query</span><span class='colon2 op'>::</span><span class='rubyid_Solutions constant id'>Solutions</span><span class='colon2 op'>::</span><span class='rubyid_MIME_TYPES constant id'>MIME_TYPES</span><span class='lbrack token'>[</span><span class='rubyid_format identifier id'>format</span><span class='rbrack token'>]</span>
  <span class='rubyid_serialization identifier id'>serialization</span> <span class='assign token'>=</span> <span class='rubyid_case case kw'>case</span> <span class='rubyid_content_type identifier id'>content_type</span>
  <span class='rubyid_when when kw'>when</span> <span class='string val'>'text/html'</span>
    <span class='rubyid_title identifier id'>title</span> <span class='assign token'>=</span> <span class='rubyid_exception identifier id'>exception</span><span class='dot token'>.</span><span class='rubyid_respond_to? fid id'>respond_to?</span><span class='lparen token'>(</span><span class='symbol val'>:title</span><span class='rparen token'>)</span> <span class='question op'>?</span> <span class='rubyid_exception identifier id'>exception</span><span class='dot token'>.</span><span class='rubyid_title identifier id'>title</span> <span class='colon op'>:</span> <span class='rubyid_exception identifier id'>exception</span><span class='dot token'>.</span><span class='rubyid_class identifier id'>class</span><span class='dot token'>.</span><span class='rubyid_to_s identifier id'>to_s</span>
    <span class='rubyid_ERROR_MESSAGE constant id'>ERROR_MESSAGE</span> <span class='mod op'>%</span> <span class='lbrack token'>[</span><span class='rubyid_title identifier id'>title</span><span class='comma token'>,</span> <span class='rubyid_title identifier id'>title</span><span class='comma token'>,</span> <span class='rubyid_exception identifier id'>exception</span><span class='dot token'>.</span><span class='rubyid_message identifier id'>message</span><span class='rbrack token'>]</span>
  <span class='rubyid_else else kw'>else</span>
    <span class='rubyid_content_type identifier id'>content_type</span> <span class='assign token'>=</span> <span class='string val'>&quot;text/plain&quot;</span>
    <span class='rubyid_exception identifier id'>exception</span><span class='dot token'>.</span><span class='rubyid_message identifier id'>message</span>
  <span class='rubyid_end end kw'>end</span>
  
  <span class='rubyid_serialization identifier id'>serialization</span><span class='dot token'>.</span><span class='rubyid_instance_eval identifier id'>instance_eval</span> <span class='rubyid_do do kw'>do</span>
    <span class='rubyid_if if kw'>if</span> <span class='rubyid_RUBY_VERSION constant id'>RUBY_VERSION</span> <span class='lt op'>&lt;</span> <span class='string val'>&quot;1.9&quot;</span>
      <span class='rubyid_singleton identifier id'>singleton</span> <span class='assign token'>=</span> <span class='rubyid_class class kw'>class</span> <span class='lshft op'>&lt;&lt;</span> <span class='rubyid_self self kw'>self</span><span class='semicolon token'>;</span> <span class='rubyid_self self kw'>self</span> <span class='rubyid_end end kw'>end</span>
      <span class='rubyid_singleton identifier id'>singleton</span><span class='dot token'>.</span><span class='rubyid_send identifier id'>send</span> <span class='symbol val'>:define_method</span><span class='comma token'>,</span> <span class='symbol val'>:content_type</span><span class='comma token'>,</span> <span class='rubyid_lambda identifier id'>lambda</span> <span class='lbrace token'>{</span> <span class='rubyid_content_type identifier id'>content_type</span> <span class='rbrace token'>}</span>
    <span class='rubyid_else else kw'>else</span>
      <span class='rubyid_define_singleton_method identifier id'>define_singleton_method</span><span class='lparen token'>(</span><span class='symbol val'>:content_type</span><span class='rparen token'>)</span> <span class='lbrace token'>{</span> <span class='rubyid_content_type identifier id'>content_type</span> <span class='rbrace token'>}</span>
    <span class='rubyid_end end kw'>end</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='rubyid_serialization identifier id'>serialization</span>
<span class='rubyid_end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="serialize_results-class_method">
  
    + (<tt><span class='object_link'><a href="String.html" title="String (class)">String</a></span></tt>) <strong>serialize_results</strong>(solutions, options = {}) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Serialize solutions using the determined format</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>solutions</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="RDF/Query/Solutions.html" title="RDF::Query::Solutions (class)">RDF::Query::Solutions</a></span></tt>, <tt><span class='object_link'><a href="RDF/Queryable.html" title="RDF::Queryable (module)">RDF::Queryable</a></span></tt>, <tt>Boolean</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Solutions as either a solution set, a Queryable object (such as a graph) or a Boolean value</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>options</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="Hash.html" title="Hash (class)">Hash</a></span>{<span class='object_link'><a href="Symbol.html" title="Symbol (class)">Symbol</a></span> =&gt; <span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span>}</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>{}</tt>)</em>
      
      
    </li>
  
</ul>

  
    
    
    
    
    <p class="tag_title">Options Hash (<tt>options</tt>):</p>
    <ul class="option">
      
        <li>
          <span class="name">:content_type</span>
          <span class="type">(<tt><span class='object_link'><a href="String.html" title="String (class)">String</a></span></tt>)</span>
          <span class="default">
            
          </span>
          
            &mdash; <div class='inline'><p>Format of results, one of &#39;application/sparql-results+json&#39; or &#39;application/sparql-results+xml&#39;
May also be an RDF::Writer content_type to serialize DESCRIBE or CONSTRUCT results</p>
</div>
          
        </li>
      
        <li>
          <span class="name">:content_types</span>
          <span class="type">(<tt><span class='object_link'><a href="Array.html" title="Array (class)">Array</a></span>&lt;<span class='object_link'><a href="String.html" title="String (class)">String</a></span>&gt;</tt>)</span>
          <span class="default">
            
          </span>
          
            &mdash; <div class='inline'><p>Similar to :content_type, but takes an ordered array of appropriate content types,
and serializes using the first appropriate type, including wild-cards.</p>
</div>
          
        </li>
      
        <li>
          <span class="name">:format</span>
          <span class="type">(<tt>#to_sym</tt>)</span>
          <span class="default">
            
          </span>
          
            &mdash; <div class='inline'><p>Format of results, one of :html, :json or :xml.
May also be an RDF::Writer format to serialize DESCRIBE or CONSTRUCT results</p>
</div>
          
        </li>
      
    </ul>
  

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="String.html" title="String (class)">String</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>String with serialized results and #content_type</p>
</div>
      
    </li>
  
</ul>
<p class="tag_title">Raises:</p>
<ul class="raise">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="RDF/WriterError.html" title="RDF::WriterError (class)">RDF::WriterError</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>when inappropriate formatting options are used</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
180
181
182
183
184
185
186
187
188
189
190
191
192
193
194
195
196
197
198
199
200
201
202
203
204
205
206
207</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'vendor/bundler/ruby/1.8/bundler/gems/sparql-f703f9de4555/lib/sparql/results.rb', line 133</span>

<span class='rubyid_def def kw'>def</span> <span class='rubyid_serialize_results identifier id'>serialize_results</span><span class='lparen token'>(</span><span class='rubyid_solutions identifier id'>solutions</span><span class='comma token'>,</span> <span class='rubyid_options identifier id'>options</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span><span class='rparen token'>)</span>
  <span class='rubyid_format identifier id'>format</span> <span class='assign token'>=</span> <span class='rubyid_options identifier id'>options</span><span class='lbrack token'>[</span><span class='symbol val'>:format</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='rubyid_to_sym identifier id'>to_sym</span> <span class='rubyid_if if_mod kw'>if</span> <span class='rubyid_options identifier id'>options</span><span class='lbrack token'>[</span><span class='symbol val'>:format</span><span class='rbrack token'>]</span>
  <span class='rubyid_content_type identifier id'>content_type</span> <span class='assign token'>=</span> <span class='rubyid_options identifier id'>options</span><span class='lbrack token'>[</span><span class='symbol val'>:content_type</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='rubyid_to_s identifier id'>to_s</span><span class='dot token'>.</span><span class='rubyid_split identifier id'>split</span><span class='lparen token'>(</span><span class='string val'>';'</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='rubyid_first identifier id'>first</span>
  <span class='rubyid_content_types identifier id'>content_types</span> <span class='assign token'>=</span> <span class='rubyid_options identifier id'>options</span><span class='lbrack token'>[</span><span class='symbol val'>:content_types</span><span class='rbrack token'>]</span> <span class='orop op'>||</span> <span class='lbrack token'>[</span><span class='string val'>'*/*'</span><span class='rbrack token'>]</span>
  <span class='rubyid_format identifier id'>format</span> <span class='opasgn op'>||=</span> <span class='rubyid_RDF constant id'>RDF</span><span class='colon2 op'>::</span><span class='rubyid_Query constant id'>Query</span><span class='colon2 op'>::</span><span class='rubyid_Solutions constant id'>Solutions</span><span class='colon2 op'>::</span><span class='rubyid_MIME_TYPES constant id'>MIME_TYPES</span><span class='dot token'>.</span><span class='rubyid_invert identifier id'>invert</span><span class='lbrack token'>[</span><span class='rubyid_content_type identifier id'>content_type</span><span class='rbrack token'>]</span> <span class='rubyid_if if_mod kw'>if</span> <span class='rubyid_content_type identifier id'>content_type</span>

  <span class='rubyid_if if kw'>if</span> <span class='notop op'>!</span><span class='rubyid_format identifier id'>format</span> <span class='andop op'>&amp;&amp;</span> <span class='notop op'>!</span><span class='rubyid_content_type identifier id'>content_type</span>
    <span class='rubyid_case case kw'>case</span> <span class='rubyid_solutions identifier id'>solutions</span>
    <span class='rubyid_when when kw'>when</span> <span class='rubyid_RDF constant id'>RDF</span><span class='colon2 op'>::</span><span class='rubyid_Queryable constant id'>Queryable</span>
      <span class='rubyid_content_type identifier id'>content_type</span> <span class='assign token'>=</span> <span class='rubyid_first_content_type identifier id'>first_content_type</span><span class='lparen token'>(</span><span class='rubyid_content_types identifier id'>content_types</span><span class='comma token'>,</span> <span class='rubyid_RDF constant id'>RDF</span><span class='colon2 op'>::</span><span class='rubyid_Format constant id'>Format</span><span class='dot token'>.</span><span class='rubyid_content_types identifier id'>content_types</span><span class='dot token'>.</span><span class='rubyid_keys identifier id'>keys</span><span class='rparen token'>)</span> <span class='orop op'>||</span> <span class='string val'>'text/plain'</span>
      <span class='rubyid_format identifier id'>format</span> <span class='assign token'>=</span> <span class='rubyid_RDF constant id'>RDF</span><span class='colon2 op'>::</span><span class='rubyid_Writer constant id'>Writer</span><span class='dot token'>.</span><span class='rubyid_for identifier id'>for</span><span class='lparen token'>(</span><span class='symbol val'>:content_type</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='rubyid_content_type identifier id'>content_type</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='rubyid_to_sym identifier id'>to_sym</span>
    <span class='rubyid_else else kw'>else</span>
      <span class='rubyid_content_type identifier id'>content_type</span> <span class='assign token'>=</span> <span class='rubyid_first_content_type identifier id'>first_content_type</span><span class='lparen token'>(</span><span class='rubyid_content_types identifier id'>content_types</span><span class='comma token'>,</span> <span class='rubyid_RDF constant id'>RDF</span><span class='colon2 op'>::</span><span class='rubyid_Query constant id'>Query</span><span class='colon2 op'>::</span><span class='rubyid_Solutions constant id'>Solutions</span><span class='colon2 op'>::</span><span class='rubyid_MIME_TYPES constant id'>MIME_TYPES</span><span class='dot token'>.</span><span class='rubyid_values identifier id'>values</span><span class='rparen token'>)</span> <span class='orop op'>||</span> <span class='string val'>'application/sparql-results+xml'</span>
      <span class='rubyid_format identifier id'>format</span> <span class='assign token'>=</span> <span class='rubyid_RDF constant id'>RDF</span><span class='colon2 op'>::</span><span class='rubyid_Query constant id'>Query</span><span class='colon2 op'>::</span><span class='rubyid_Solutions constant id'>Solutions</span><span class='colon2 op'>::</span><span class='rubyid_MIME_TYPES constant id'>MIME_TYPES</span><span class='dot token'>.</span><span class='rubyid_invert identifier id'>invert</span><span class='lbrack token'>[</span><span class='rubyid_content_type identifier id'>content_type</span><span class='rbrack token'>]</span>
    <span class='rubyid_end end kw'>end</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='rubyid_serialization identifier id'>serialization</span> <span class='assign token'>=</span> <span class='rubyid_case case kw'>case</span> <span class='rubyid_solutions identifier id'>solutions</span>
  <span class='rubyid_when when kw'>when</span> <span class='rubyid_TrueClass constant id'>TrueClass</span><span class='comma token'>,</span> <span class='rubyid_FalseClass constant id'>FalseClass</span><span class='comma token'>,</span> <span class='rubyid_RDF constant id'>RDF</span><span class='colon2 op'>::</span><span class='rubyid_Literal constant id'>Literal</span><span class='colon2 op'>::</span><span class='rubyid_TRUE constant id'>TRUE</span><span class='comma token'>,</span> <span class='rubyid_RDF constant id'>RDF</span><span class='colon2 op'>::</span><span class='rubyid_Literal constant id'>Literal</span><span class='colon2 op'>::</span><span class='rubyid_FALSE constant id'>FALSE</span>
    <span class='rubyid_solutions identifier id'>solutions</span> <span class='assign token'>=</span> <span class='rubyid_solutions identifier id'>solutions</span><span class='dot token'>.</span><span class='rubyid_object identifier id'>object</span> <span class='rubyid_if if_mod kw'>if</span> <span class='rubyid_solutions identifier id'>solutions</span><span class='dot token'>.</span><span class='rubyid_is_a? fid id'>is_a?</span><span class='lparen token'>(</span><span class='rubyid_RDF constant id'>RDF</span><span class='colon2 op'>::</span><span class='rubyid_Literal constant id'>Literal</span><span class='rparen token'>)</span>
    <span class='rubyid_case case kw'>case</span> <span class='rubyid_format identifier id'>format</span>
    <span class='rubyid_when when kw'>when</span> <span class='symbol val'>:json</span>
      <span class='rubyid_require identifier id'>require</span> <span class='string val'>'json'</span> <span class='rubyid_unless unless_mod kw'>unless</span> <span class='rubyid_defined? defined kw'>defined?</span><span class='lparen token'>(</span><span class='colon3 op'>::</span><span class='rubyid_JSON constant id'>JSON</span><span class='rparen token'>)</span>
      <span class='lbrace token'>{</span><span class='symbol val'>:boolean</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='rubyid_solutions identifier id'>solutions</span><span class='rbrace token'>}</span><span class='dot token'>.</span><span class='rubyid_to_json identifier id'>to_json</span>
    <span class='rubyid_when when kw'>when</span> <span class='symbol val'>:xml</span>
      <span class='rubyid_require identifier id'>require</span> <span class='string val'>'builder'</span> <span class='rubyid_unless unless_mod kw'>unless</span> <span class='rubyid_defined? defined kw'>defined?</span><span class='lparen token'>(</span><span class='colon3 op'>::</span><span class='rubyid_Builder constant id'>Builder</span><span class='rparen token'>)</span>
      <span class='rubyid_xml identifier id'>xml</span> <span class='assign token'>=</span> <span class='colon3 op'>::</span><span class='rubyid_Builder constant id'>Builder</span><span class='colon2 op'>::</span><span class='rubyid_XmlMarkup constant id'>XmlMarkup</span><span class='dot token'>.</span><span class='rubyid_new identifier id'>new</span><span class='lparen token'>(</span><span class='symbol val'>:indent</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='integer val'>2</span><span class='rparen token'>)</span>
      <span class='rubyid_xml identifier id'>xml</span><span class='dot token'>.</span><span class='rubyid_instruct! fid id'>instruct!</span>
      <span class='rubyid_xml identifier id'>xml</span><span class='dot token'>.</span><span class='rubyid_sparql identifier id'>sparql</span><span class='lparen token'>(</span><span class='symbol val'>:xmlns</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>&quot;http://www.w3.org/2005/sparql-results#&quot;</span><span class='rparen token'>)</span> <span class='rubyid_do do kw'>do</span>
        <span class='rubyid_xml identifier id'>xml</span><span class='dot token'>.</span><span class='rubyid_boolean identifier id'>boolean</span><span class='lparen token'>(</span><span class='rubyid_solutions identifier id'>solutions</span><span class='dot token'>.</span><span class='rubyid_to_s identifier id'>to_s</span><span class='rparen token'>)</span>
      <span class='rubyid_end end kw'>end</span>
    <span class='rubyid_when when kw'>when</span> <span class='symbol val'>:html</span>
      <span class='rubyid_require identifier id'>require</span> <span class='string val'>'builder'</span> <span class='rubyid_unless unless_mod kw'>unless</span> <span class='rubyid_defined? defined kw'>defined?</span><span class='lparen token'>(</span><span class='colon3 op'>::</span><span class='rubyid_Builder constant id'>Builder</span><span class='rparen token'>)</span>
      <span class='rubyid_content_type identifier id'>content_type</span> <span class='assign token'>=</span> <span class='string val'>&quot;text/html&quot;</span>
      <span class='rubyid_xml identifier id'>xml</span> <span class='assign token'>=</span> <span class='colon3 op'>::</span><span class='rubyid_Builder constant id'>Builder</span><span class='colon2 op'>::</span><span class='rubyid_XmlMarkup constant id'>XmlMarkup</span><span class='dot token'>.</span><span class='rubyid_new identifier id'>new</span><span class='lparen token'>(</span><span class='symbol val'>:indent</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='integer val'>2</span><span class='rparen token'>)</span>
      <span class='rubyid_xml identifier id'>xml</span><span class='dot token'>.</span><span class='rubyid_div identifier id'>div</span><span class='lparen token'>(</span><span class='rubyid_solutions identifier id'>solutions</span><span class='dot token'>.</span><span class='rubyid_to_s identifier id'>to_s</span><span class='comma token'>,</span> <span class='symbol val'>:class</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>&quot;sparql&quot;</span><span class='rparen token'>)</span>
    <span class='rubyid_else else kw'>else</span>
      <span class='rubyid_raise identifier id'>raise</span> <span class='rubyid_RDF constant id'>RDF</span><span class='colon2 op'>::</span><span class='rubyid_WriterError constant id'>WriterError</span><span class='comma token'>,</span> <span class='dstring node'>&quot;Unknown format #{(format || content_type).inspect} for #{solutions.class}&quot;</span>
    <span class='rubyid_end end kw'>end</span>
  <span class='rubyid_when when kw'>when</span> <span class='rubyid_RDF constant id'>RDF</span><span class='colon2 op'>::</span><span class='rubyid_Queryable constant id'>Queryable</span>
    <span class='rubyid_begin begin kw'>begin</span>
      <span class='rubyid_require identifier id'>require</span> <span class='string val'>'linkeddata'</span>
    <span class='rubyid_rescue rescue kw'>rescue</span> <span class='rubyid_LoadError constant id'>LoadError</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='rubyid_e identifier id'>e</span>
      <span class='rubyid_require identifier id'>require</span> <span class='string val'>'rdf/ntriples'</span>
    <span class='rubyid_end end kw'>end</span>
    <span class='rubyid_fmt identifier id'>fmt</span> <span class='assign token'>=</span> <span class='rubyid_RDF constant id'>RDF</span><span class='colon2 op'>::</span><span class='rubyid_Format constant id'>Format</span><span class='dot token'>.</span><span class='rubyid_for identifier id'>for</span><span class='lparen token'>(</span><span class='rubyid_format identifier id'>format</span> <span class='integer val'>? </span><span class='rubyid_format identifier id'>format</span><span class='dot token'>.</span><span class='rubyid_to_sym identifier id'>to_sym</span> <span class='colon op'>:</span> <span class='lbrace token'>{</span><span class='symbol val'>:content_type</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='rubyid_content_type identifier id'>content_type</span><span class='rbrace token'>}</span><span class='rparen token'>)</span>
    <span class='rubyid_fmt identifier id'>fmt</span> <span class='opasgn op'>||=</span> <span class='rubyid_RDF constant id'>RDF</span><span class='colon2 op'>::</span><span class='rubyid_NTriples constant id'>NTriples</span><span class='colon2 op'>::</span><span class='rubyid_Format constant id'>Format</span>
    <span class='rubyid_format identifier id'>format</span> <span class='opasgn op'>||=</span> <span class='rubyid_fmt identifier id'>fmt</span><span class='dot token'>.</span><span class='rubyid_to_sym identifier id'>to_sym</span>
    <span class='rubyid_content_type identifier id'>content_type</span> <span class='opasgn op'>||=</span> <span class='rubyid_fmt identifier id'>fmt</span><span class='dot token'>.</span><span class='rubyid_content_type identifier id'>content_type</span><span class='dot token'>.</span><span class='rubyid_first identifier id'>first</span>
    <span class='rubyid_results identifier id'>results</span> <span class='assign token'>=</span> <span class='rubyid_solutions identifier id'>solutions</span><span class='dot token'>.</span><span class='rubyid_dump identifier id'>dump</span><span class='lparen token'>(</span><span class='rubyid_format identifier id'>format</span><span class='comma token'>,</span> <span class='rubyid_options identifier id'>options</span><span class='rparen token'>)</span>
    <span class='rubyid_raise identifier id'>raise</span> <span class='rubyid_RDF constant id'>RDF</span><span class='colon2 op'>::</span><span class='rubyid_WriterError constant id'>WriterError</span><span class='comma token'>,</span> <span class='dstring node'>&quot;Unknown format #{fmt.inspect} for #{solutions.class}&quot;</span> <span class='rubyid_unless unless_mod kw'>unless</span> <span class='rubyid_results identifier id'>results</span>
    <span class='rubyid_results identifier id'>results</span>
  <span class='rubyid_when when kw'>when</span> <span class='rubyid_RDF constant id'>RDF</span><span class='colon2 op'>::</span><span class='rubyid_Query constant id'>Query</span><span class='colon2 op'>::</span><span class='rubyid_Solutions constant id'>Solutions</span>
    <span class='rubyid_case case kw'>case</span> <span class='rubyid_format identifier id'>format</span>
    <span class='rubyid_when when kw'>when</span> <span class='symbol val'>:json</span>  <span class='rubyid_then then kw'>then</span> <span class='rubyid_solutions identifier id'>solutions</span><span class='dot token'>.</span><span class='rubyid_to_json identifier id'>to_json</span>
    <span class='rubyid_when when kw'>when</span> <span class='symbol val'>:xml</span>   <span class='rubyid_then then kw'>then</span> <span class='rubyid_solutions identifier id'>solutions</span><span class='dot token'>.</span><span class='rubyid_to_xml identifier id'>to_xml</span>
    <span class='rubyid_when when kw'>when</span> <span class='symbol val'>:html</span>  <span class='rubyid_then then kw'>then</span> <span class='rubyid_solutions identifier id'>solutions</span><span class='dot token'>.</span><span class='rubyid_to_html identifier id'>to_html</span>
    <span class='rubyid_else else kw'>else</span>
      <span class='rubyid_raise identifier id'>raise</span> <span class='rubyid_RDF constant id'>RDF</span><span class='colon2 op'>::</span><span class='rubyid_WriterError constant id'>WriterError</span><span class='comma token'>,</span> <span class='dstring node'>&quot;Unknown format #{(format || content_type).inspect} for #{solutions.class}&quot;</span>
    <span class='rubyid_end end kw'>end</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='rubyid_content_type identifier id'>content_type</span> <span class='opasgn op'>||=</span> <span class='rubyid_RDF constant id'>RDF</span><span class='colon2 op'>::</span><span class='rubyid_Query constant id'>Query</span><span class='colon2 op'>::</span><span class='rubyid_Solutions constant id'>Solutions</span><span class='colon2 op'>::</span><span class='rubyid_MIME_TYPES constant id'>MIME_TYPES</span><span class='lbrack token'>[</span><span class='rubyid_format identifier id'>format</span><span class='rbrack token'>]</span> <span class='rubyid_if if_mod kw'>if</span> <span class='rubyid_format identifier id'>format</span>
  
  <span class='rubyid_serialization identifier id'>serialization</span><span class='dot token'>.</span><span class='rubyid_instance_eval identifier id'>instance_eval</span> <span class='rubyid_do do kw'>do</span>
    <span class='rubyid_if if kw'>if</span> <span class='rubyid_RUBY_VERSION constant id'>RUBY_VERSION</span> <span class='lt op'>&lt;</span> <span class='string val'>&quot;1.9&quot;</span>
      <span class='rubyid_singleton identifier id'>singleton</span> <span class='assign token'>=</span> <span class='rubyid_class class kw'>class</span> <span class='lshft op'>&lt;&lt;</span> <span class='rubyid_self self kw'>self</span><span class='semicolon token'>;</span> <span class='rubyid_self self kw'>self</span> <span class='rubyid_end end kw'>end</span>
      <span class='rubyid_singleton identifier id'>singleton</span><span class='dot token'>.</span><span class='rubyid_send identifier id'>send</span> <span class='symbol val'>:define_method</span><span class='comma token'>,</span> <span class='symbol val'>:content_type</span><span class='comma token'>,</span> <span class='rubyid_lambda identifier id'>lambda</span> <span class='lbrace token'>{</span> <span class='rubyid_content_type identifier id'>content_type</span> <span class='rbrace token'>}</span>
    <span class='rubyid_else else kw'>else</span>
      <span class='rubyid_define_singleton_method identifier id'>define_singleton_method</span><span class='lparen token'>(</span><span class='symbol val'>:content_type</span><span class='rparen token'>)</span> <span class='lbrace token'>{</span> <span class='rubyid_content_type identifier id'>content_type</span> <span class='rbrace token'>}</span>
    <span class='rubyid_end end kw'>end</span>
  <span class='rubyid_end end kw'>end</span>
  
  <span class='rubyid_serialization identifier id'>serialization</span>
<span class='rubyid_end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>

    <div id="footer">
  Generated on Sun Dec  2 12:24:05 2012 by
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.8.3 (ruby-1.8.7).
</div>

  </body>
</html>