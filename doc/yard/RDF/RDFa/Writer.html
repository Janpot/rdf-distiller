<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>
  Class: RDF::RDFa::Writer
  
    &mdash; Web portal for RDF.rb.
  
</title>

  <link rel="stylesheet" href="../../css/style.css" type="text/css" media="screen" charset="utf-8" />

  <link rel="stylesheet" href="../../css/common.css" type="text/css" media="screen" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  relpath = '../..';
  if (relpath != '') relpath += '/';
</script>

  <script type="text/javascript" charset="utf-8" src="../../js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="../../js/app.js"></script>


  </head>
  <body>
    <script type="text/javascript" charset="utf-8">
      if (window.top.frames.main) document.body.className = 'frames';
    </script>
    
    <div id="header">
      <div id="menu">
  
    <a href="../../_index.html">Index (W)</a> &raquo; 
    <span class='title'><span class='object_link'><a href="../../RDF.html" title="RDF (module)">RDF</a></span></span> &raquo; <span class='title'><span class='object_link'><a href="../RDFa.html" title="RDF::RDFa (module)">RDFa</a></span></span>
     &raquo; 
    <span class="title">Writer</span>
  
  
  <div class="noframes"><span class="title">(</span><a href="." target="_top">no frames</a><span class="title">)</span></div>
</div>

      <div id="search">
  
    <a id="class_list_link" href="#">Class List</a>
  
    <a id="method_list_link" href="#">Method List</a>
  
    <a id="file_list_link" href="#">File List</a>
  
</div>
      <div class="clear"></div>
    </div>
    
    <iframe id="search_frame"></iframe>
    
    <div id="content"><h1>Class: RDF::RDFa::Writer
  
  
  
</h1>

<dl class="box">
  
    <dt class="r1">Inherits:</dt>
    <dd class="r1">
      <span class="inheritName"><span class='object_link'><a href="../Writer.html" title="RDF::Writer (class)">Writer</a></span></span>
      
        <ul class="fullTree">
          <li><span class='object_link'><a href="../../Object.html" title="Object (class)">Object</a></span></li>
          
            <li class="next"><span class='object_link'><a href="../Writer.html" title="RDF::Writer (class)">Writer</a></span></li>
          
            <li class="next">RDF::RDFa::Writer</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
      </dd>
    
  
  
    
  
    
  
  
  
    <dt class="r2 last">Defined in:</dt>
    <dd class="r2 last">vendor/bundler/ruby/1.8/gems/rdf-rdfa-0.3.3/lib/rdf/rdfa/writer.rb<span class="defines">,<br />
  vendor/bundler/ruby/1.8/gems/rdf-rdfa-0.3.4/lib/rdf/rdfa/writer.rb,<br /> vendor/bundler/ruby/1.8/gems/rdf-rdfa-0.3.4.1/lib/rdf/rdfa/writer.rb,<br /> vendor/bundler/ruby/1.9.1/gems/rdf-rdfa-0.3.3/lib/rdf/rdfa/writer.rb,<br /> vendor/bundler/ruby/1.9.1/gems/rdf-rdfa-0.3.5/lib/rdf/rdfa/writer.rb,<br /> vendor/bundler/ruby/1.8/gems/rdf-rdfa-0.3.3.2/lib/rdf/rdfa/writer.rb,<br /> vendor/bundler/ruby/1.8/gems/rdf-rdfa-0.3.4.2/lib/rdf/rdfa/writer.rb,<br /> vendor/bundler/ruby/1.8/gems/rdf-rdfa-0.3.3.1/lib/rdf/rdfa/writer.rb,<br /> vendor/bundler/ruby/1.9.1/gems/rdf-rdfa-0.3.3.2/lib/rdf/rdfa/writer.rb,<br /> vendor/bundler/ruby/1.8/gems/rdf-rdfa-0.3.3/lib/rdf/rdfa/writer/haml_templates.rb,<br /> vendor/bundler/ruby/1.8/bundler/gems/rdf-rdfa-a3e68e6685aa/lib/rdf/rdfa/writer.rb,<br /> vendor/bundler/ruby/1.8/bundler/gems/rdf-rdfa-89c489444fc4/lib/rdf/rdfa/writer.rb,<br /> vendor/bundler/ruby/1.8/bundler/gems/rdf-rdfa-2360f146b817/lib/rdf/rdfa/writer.rb,<br /> vendor/bundler/ruby/1.8/gems/rdf-rdfa-0.3.4/lib/rdf/rdfa/writer/haml_templates.rb,<br /> vendor/bundler/ruby/1.8/gems/rdf-rdfa-0.3.4.1/lib/rdf/rdfa/writer/haml_templates.rb,<br /> vendor/bundler/ruby/1.8/gems/rdf-rdfa-0.3.3.1/lib/rdf/rdfa/writer/haml_templates.rb,<br /> vendor/bundler/ruby/1.9.1/gems/rdf-rdfa-0.3.3/lib/rdf/rdfa/writer/haml_templates.rb,<br /> vendor/bundler/ruby/1.9.1/gems/rdf-rdfa-0.3.5/lib/rdf/rdfa/writer/haml_templates.rb,<br /> vendor/bundler/ruby/1.8/gems/rdf-rdfa-0.3.4.2/lib/rdf/rdfa/writer/haml_templates.rb,<br /> vendor/bundler/ruby/1.8/gems/rdf-rdfa-0.3.3.2/lib/rdf/rdfa/writer/haml_templates.rb,<br /> vendor/bundler/ruby/1.9.1/bundler/gems/rdf-rdfa-e00ee37cf7a0/lib/rdf/rdfa/writer.rb,<br /> vendor/bundler/ruby/1.9.1/gems/rdf-rdfa-0.3.3.2/lib/rdf/rdfa/writer/haml_templates.rb,<br /> vendor/bundler/ruby/1.8/bundler/gems/rdf-rdfa-2360f146b817/lib/rdf/rdfa/writer/haml_templates.rb,<br /> vendor/bundler/ruby/1.8/bundler/gems/rdf-rdfa-a3e68e6685aa/lib/rdf/rdfa/writer/haml_templates.rb,<br /> vendor/bundler/ruby/1.8/bundler/gems/rdf-rdfa-89c489444fc4/lib/rdf/rdfa/writer/haml_templates.rb,<br /> vendor/bundler/ruby/1.9.1/bundler/gems/rdf-rdfa-e00ee37cf7a0/lib/rdf/rdfa/writer/haml_templates.rb</span>
</dd>
  
</dl>
<div class="clear"></div>

<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    <p>An RDFa 1.1 serialiser in Ruby. The RDFa serializer makes use of Haml templates,
allowing runtime-replacement with alternate templates. Note, however, that templates
should be checked against the W3C test suite to ensure that valid RDFa is emitted.</p>

<p>Note that the natural interface is to write a whole graph at a time.
Writing statements or Triples will create a graph to add them to
and then serialize the graph.</p>

<p>The writer will add prefix definitions, and use them for creating @prefix definitions, and minting CURIEs</p>

  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <h3>Examples:</h3>
    
      <h4><div class='inline'><p>Obtaining a RDFa writer class</p></div></h4>
      <pre class="example code"><span class='const'>RDF</span><span class='op'>::</span><span class='const'>Writer</span><span class='period'>.</span><span class='id for'>for</span><span class='lparen'>(</span><span class='symbol'>:html</span><span class='rparen'>)</span>         <span class='comment'>#=&gt; RDF::RDFa::Writer
</span><span class='const'>RDF</span><span class='op'>::</span><span class='const'>Writer</span><span class='period'>.</span><span class='id for'>for</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>etc/test.html</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
<span class='const'>RDF</span><span class='op'>::</span><span class='const'>Writer</span><span class='period'>.</span><span class='id for'>for</span><span class='lparen'>(</span><span class='symbol'>:file_name</span>      <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>etc/test.html</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
<span class='const'>RDF</span><span class='op'>::</span><span class='const'>Writer</span><span class='period'>.</span><span class='id for'>for</span><span class='lparen'>(</span><span class='symbol'>:file_extension</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>html</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
<span class='const'>RDF</span><span class='op'>::</span><span class='const'>Writer</span><span class='period'>.</span><span class='id for'>for</span><span class='lparen'>(</span><span class='symbol'>:content_type</span>   <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>application/xhtml+xml</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
<span class='const'>RDF</span><span class='op'>::</span><span class='const'>Writer</span><span class='period'>.</span><span class='id for'>for</span><span class='lparen'>(</span><span class='symbol'>:content_type</span>   <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>text/html</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span></pre>
    
      <h4><div class='inline'><p>Serializing RDF graph into an XHTML+RDFa file</p></div></h4>
      <pre class="example code"><span class='const'>RDF</span><span class='op'>::</span><span class='const'>RDFa</span><span class='op'>::</span><span class='const'>Write</span><span class='period'>.</span><span class='id open'>open</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>etc/test.html</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id writer'>writer</span><span class='op'>|</span>
  <span class='id writer'>writer</span> <span class='op'>&lt;&lt;</span> <span class='id graph'>graph</span>
<span class='kw'>end</span></pre>
    
      <h4><div class='inline'><p>Serializing RDF statements into an XHTML+RDFa file</p></div></h4>
      <pre class="example code"><span class='const'>RDF</span><span class='op'>::</span><span class='const'>RDFa</span><span class='op'>::</span><span class='const'>Writer</span><span class='period'>.</span><span class='id open'>open</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>etc/test.html</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id writer'>writer</span><span class='op'>|</span>
  <span class='id graph'>graph</span><span class='period'>.</span><span class='id each_statement'>each_statement</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id statement'>statement</span><span class='op'>|</span>
    <span class='id writer'>writer</span> <span class='op'>&lt;&lt;</span> <span class='id statement'>statement</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    
      <h4><div class='inline'><p>Serializing RDF statements into an XHTML+RDFa string</p></div></h4>
      <pre class="example code"><span class='const'>RDF</span><span class='op'>::</span><span class='const'>RDFa</span><span class='op'>::</span><span class='const'>Writer</span><span class='period'>.</span><span class='id buffer'>buffer</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id writer'>writer</span><span class='op'>|</span>
  <span class='id graph'>graph</span><span class='period'>.</span><span class='id each_statement'>each_statement</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id statement'>statement</span><span class='op'>|</span>
    <span class='id writer'>writer</span> <span class='op'>&lt;&lt;</span> <span class='id statement'>statement</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    
      <h4><div class='inline'><p>Creating @base and @prefix definitions in output</p></div></h4>
      <pre class="example code"><span class='const'>RDF</span><span class='op'>::</span><span class='const'>RDFa</span><span class='op'>::</span><span class='const'>Writer</span><span class='period'>.</span><span class='id buffer'>buffer</span><span class='lparen'>(</span><span class='symbol'>:base_uri</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>http://example.com/</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='symbol'>:prefixes</span> <span class='op'>=&gt;</span> <span class='lbrace'>{</span>
    <span class='symbol'>:foaf</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>http://xmlns.com/foaf/0.1/</span><span class='tstring_end'>&quot;</span></span><span class='rbrace'>}</span>
<span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id writer'>writer</span><span class='op'>|</span>
  <span class='id graph'>graph</span><span class='period'>.</span><span class='id each_statement'>each_statement</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id statement'>statement</span><span class='op'>|</span>
    <span class='id writer'>writer</span> <span class='op'>&lt;&lt;</span> <span class='id statement'>statement</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    
      <h4><div class='inline'><p>Creating @profile definitions in output</p></div></h4>
      <pre class="example code"><span class='const'>RDF</span><span class='op'>::</span><span class='const'>RDFa</span><span class='op'>::</span><span class='const'>Writer</span><span class='period'>.</span><span class='id buffer'>buffer</span><span class='lparen'>(</span><span class='symbol'>:profile</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>http://example.com/profile</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id writer'>writer</span><span class='op'>|</span>
  <span class='id graph'>graph</span><span class='period'>.</span><span class='id each_statement'>each_statement</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id statement'>statement</span><span class='op'>|</span>
    <span class='id writer'>writer</span> <span class='op'>&lt;&lt;</span> <span class='id statement'>statement</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    
  </div>
<h3>Author:</h3>
<ul class="author">
  
    <li>
      
      
      
      
        
        <div class='inline'><p><a href="http://kellogg-assoc.com/">Gregg Kellogg</a></p></div>
      
    </li>
  
</ul>

</div>
  <h2>Constant Summary</h2>
  
    <dl class="constants">
      
        <dt id="HAML_OPTIONS-constant" class="">HAML_OPTIONS =
          
        </dt>
        <dd><pre class="code"><span class='lbrace'>{</span>
  <span class='symbol'>:ugly</span> <span class='op'>=&gt;</span> <span class='kw'>false</span><span class='comma'>,</span> <span class='comment'># to preserve whitespace without using entities
</span><span class='rbrace'>}</span></pre></dd>
      
        <dt id="BASE_HAML-constant" class="">BASE_HAML =
          <div class="docstring">
  <div class="discussion">
    <p>The default set of HAML templates used for RDFa code generation</p>

  </div>
</div>
<div class="tags">
  
</div>
        </dt>
        <dd><pre class="code"><span class='lbrace'>{</span>
  <span class='comment'># Document
</span>  <span class='comment'># Locals: language, title, profile, prefix, base, subjects
</span>  <span class='comment'># Yield: subjects.each
</span>  <span class='symbol'>:doc</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>%q(</span><span class='tstring_content'>
    !!! XML
    !!! 5
    %html{:xmlns =&gt; &quot;http://www.w3.org/1999/xhtml&quot;, :lang =&gt; lang, :profile =&gt; profile, :prefix =&gt; prefix}
      - if base || title
        %head
          - if base
            %base{:href =&gt; base}
          - if title
            %title= title
      %body
        - subjects.each do |subject|
          != yield(subject)
  </span><span class='tstring_end'>)</span></span><span class='comma'>,</span>

  <span class='comment'># Output for non-leaf resources
</span>  <span class='comment'># Note that @about may be omitted for Nodes that are not referenced
</span>  <span class='comment'>#
</span>  <span class='comment'># If _rel_ and _resource_ are not nil, the tag will be written relative
</span>  <span class='comment'># to a previous subject. If _element_ is :li, the tag will be written
</span>  <span class='comment'># with &lt;li&gt; instead of &lt;div&gt;.
</span>  <span class='comment'>#
</span>  <span class='comment'># Note that @rel and @resource can be used together, or @about and @typeof, but
</span>  <span class='comment'># not both.
</span>  <span class='comment'>#
</span>  <span class='comment'># Locals: subject, typeof, predicates, rel, element
</span>  <span class='comment'># Yield: predicates.each
</span>  <span class='symbol'>:subject</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>%q(</span><span class='tstring_content'>
    - if element == :li
      %li{:about =&gt; get_curie(subject), :typeof =&gt; typeof}
        - if typeof
          %span.type!= typeof
        - predicates.each do |predicate|
          != yield(predicate)
    - elsif rel &amp;&amp; typeof
      %div{:rel =&gt; get_curie(rel)}
        %div{:about =&gt; get_curie(subject), :typeof =&gt; typeof}
          %span.type!= typeof
          - predicates.each do |predicate|
            != yield(predicate)
    - elsif rel
      %div{:rel =&gt; get_curie(rel), :resource =&gt; get_curie(subject)}
        - predicates.each do |predicate|
          != yield(predicate)
    - else
      %div{:about =&gt; get_curie(subject), :typeof =&gt; typeof}
        - if typeof
          %span.type!= typeof
        - predicates.each do |predicate|
          != yield(predicate)
  </span><span class='tstring_end'>)</span></span><span class='comma'>,</span>

  <span class='comment'># Output for single-valued properties
</span>  <span class='comment'># Locals: property, objects
</span>  <span class='comment'># Yields: object
</span>  <span class='comment'># If nil is returned, render as a leaf
</span>  <span class='comment'># Otherwise, render result
</span>  <span class='symbol'>:property_value</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>%q(</span><span class='tstring_content'>
    - object = objects.first
    - if heading_predicates.include?(predicate) &amp;&amp; object.literal?
      %h1{:property =&gt; get_curie(predicate), :content =&gt; get_content(object), :lang =&gt; get_lang(object), :datatype =&gt; get_dt_curie(object)}= escape_entities(get_value(object))
    - else
      %div.property
        %span.label
          = get_predicate_name(predicate)
        - if res = yield(object)
          != res
        - elsif object.node?
          %span{:resource =&gt; get_curie(object), :rel =&gt; get_curie(predicate)}= get_curie(object)
        - elsif object.uri?
          %a{:href =&gt; object.to_s, :rel =&gt; get_curie(predicate)}= object.to_s
        - elsif object.datatype == RDF.XMLLiteral
          %span{:property =&gt; get_curie(predicate), :lang =&gt; get_lang(object), :datatype =&gt; get_dt_curie(object)}&lt;!= get_value(object)
        - else
          %span{:property =&gt; get_curie(predicate), :content =&gt; get_content(object), :lang =&gt; get_lang(object), :datatype =&gt; get_dt_curie(object)}= escape_entities(get_value(object))
  </span><span class='tstring_end'>)</span></span><span class='comma'>,</span>

  <span class='comment'># Output for multi-valued properties
</span>  <span class='comment'># Locals: property, rel, :objects
</span>  <span class='comment'># Yields: object for leaf resource rendering
</span>  <span class='symbol'>:property_values</span> <span class='op'>=&gt;</span>  <span class='tstring'><span class='tstring_beg'>%q(</span><span class='tstring_content'>
    %div.property
      %span.label
        = get_predicate_name(predicate)
      %ul{:rel =&gt; (get_curie(rel) if rel), :property =&gt; (get_curie(property) if property)}
        - objects.each do |object|
          - if res = yield(object)
            != res
          - elsif object.node?
            %li{:resource =&gt; get_curie(object)}= get_curie(object)
          - elsif object.uri?
            %li
              %a{:href =&gt; object.to_s}= object.to_s
          - elsif object.datatype == RDF.XMLLiteral
            %li{:lang =&gt; get_lang(object), :datatype =&gt; get_curie(object.datatype)}&lt;!= get_value(object)
          - else
            %li{:content =&gt; get_content(object), :lang =&gt; get_lang(object), :datatype =&gt; get_dt_curie(object)}= escape_entities(get_value(object))
  </span><span class='tstring_end'>)</span></span><span class='comma'>,</span>
<span class='rbrace'>}</span></pre></dd>
      
        <dt id="MIN_HAML-constant" class="">MIN_HAML =
          <div class="docstring">
  <div class="discussion">
    <p>An alternative, minimal HAML template for RDFa code generation.
This version does not perform recursive object generation and does not attempt
to create human readable output.</p>

  </div>
</div>
<div class="tags">
  
</div>
        </dt>
        <dd><pre class="code"><span class='lbrace'>{</span>
  <span class='comment'># Document
</span>  <span class='comment'># Locals: language, title, profile, prefix, base, subjects
</span>  <span class='comment'># Yield: subjects.each
</span>  <span class='symbol'>:doc</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>%q(</span><span class='tstring_content'>
    !!! XML
    !!! 5
    %html{:xmlns =&gt; &quot;http://www.w3.org/1999/xhtml&quot;, :lang =&gt; lang, :profile =&gt; profile, :prefix =&gt; prefix}
      - if base
        %head
          %base{:href =&gt; base}
      %body
        - subjects.each do |subject|
          != yield(subject)
  </span><span class='tstring_end'>)</span></span><span class='comma'>,</span>

  <span class='comment'># Output for non-leaf resources
</span>  <span class='comment'># Note that @about may be omitted for Nodes that are not referenced
</span>  <span class='comment'>#
</span>  <span class='comment'># Locals: about, typeof, predicates
</span>  <span class='comment'># Yield: predicates.each
</span>  <span class='symbol'>:subject</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>%q(</span><span class='tstring_content'>
    - if element == :li
      %li{:about =&gt; get_curie(subject), :typeof =&gt; typeof}
        - predicates.each do |predicate|
          != yield(predicate)
    - elsif rel &amp;&amp; typeof
      %div{:rel =&gt; get_curie(rel)}
        %div{:about =&gt; get_curie(subject), :typeof =&gt; typeof}
          - predicates.each do |predicate|
            != yield(predicate)
    - elsif rel
      %div{:rel =&gt; get_curie(rel), :resource =&gt; get_curie(subject)}
        - predicates.each do |predicate|
          != yield(predicate)
    - else
      %div{:about =&gt; get_curie(subject), :typeof =&gt; typeof}
        - predicates.each do |predicate|
          != yield(predicate)
  </span><span class='tstring_end'>)</span></span><span class='comma'>,</span>

  <span class='comment'># Output for single-valued properties.
</span>  <span class='comment'># This version does not perform a recursive call, and renders all objects as leafs.
</span>  <span class='comment'># Locals: property, objects
</span>  <span class='comment'># Yields: object
</span>  <span class='comment'># If nil is returned, render as a leaf
</span>  <span class='comment'># Otherwise, render result
</span>  <span class='symbol'>:property_value</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>%q(</span><span class='tstring_content'>
    - object = objects.first
    %div.property
      - if object.resource?
        %span{:resource =&gt; get_curie(object), :rel =&gt; get_curie(predicate)}
      - elsif object.datatype == RDF.XMLLiteral
        %span{:property =&gt; get_curie(predicate), :lang =&gt; get_lang(object), :datatype =&gt; get_dt_curie(object)}&lt;!= get_value(object)
      - else
        %span{:property =&gt; get_curie(predicate), :lang =&gt; get_lang(object), :datatype =&gt; get_dt_curie(object)}= escape_entities(object.to_s)
  </span><span class='tstring_end'>)</span></span><span class='comma'>,</span>

  <span class='comment'># Output for multi-valued properties.
</span>  <span class='comment'># This version does not perform a recursive call, and renders all objects as leafs.
</span>  <span class='comment'># Locals: property, rel, :objects
</span>  <span class='comment'># Yields: object for leaf resource rendering
</span>  <span class='symbol'>:property_values</span> <span class='op'>=&gt;</span>  <span class='tstring'><span class='tstring_beg'>%q(</span><span class='tstring_content'>
    %div.property
      %ul{:rel =&gt; (get_curie(rel) if rel), :property =&gt; (get_curie(property) if property)}
        - objects.each do |object|
          - if object.resource?
            %li{:resource =&gt; get_curie(object)}
          - elsif object.datatype == RDF.XMLLiteral
            %li{:lang =&gt; get_lang(object), :datatype =&gt; get_curie(object.datatype)}&lt;!= get_value(object)
          - else
            %li{:lang =&gt; get_lang(object), :datatype =&gt; get_dt_curie(object)}= escape_entities(object.to_s)
  </span><span class='tstring_end'>)</span></span><span class='comma'>,</span>
<span class='rbrace'>}</span></pre></dd>
      
        <dt id="DISTILLER_HAML-constant" class="">DISTILLER_HAML =
          
        </dt>
        <dd><pre class="code"><span class='lbrace'>{</span>
  <span class='comment'># Document
</span>  <span class='comment'># Locals: language, title, profile, prefix, base, subjects
</span>  <span class='comment'># Yield: subjects.each
</span>  <span class='symbol'>:doc</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>%q(</span><span class='tstring_content'>
    !!! XML
    !!! 5
    %html{:xmlns =&gt; &quot;http://www.w3.org/1999/xhtml&quot;, :lang =&gt; lang, :profile =&gt; profile, :prefix =&gt; prefix}
      - if base || title
        %head
          - if base
            %base{:href =&gt; base}
          - if title
            %title= title
          %link{:rel =&gt; &quot;stylesheet&quot;, :href =&gt; &quot;http://rdf.kellogg-assoc.com/css/distiller.css&quot;, :type =&gt; &quot;text/css&quot;}
          %script{:src =&gt; &quot;https://ajax.googleapis.com/ajax/libs/jquery/1.5.1/jquery.min.js&quot;, :type =&gt; &quot;text/javascript&quot;}
          %script{:src =&gt; &quot;http://rdf.kellogg-assoc.com/js/distiller.js&quot;, :type =&gt; &quot;text/javascript&quot;}
      %body
        - if base
          %p= &quot;RDFa serialization URI base: &amp;lt;#{base}&amp;gt;&quot;
        - subjects.each do |subject|
          != yield(subject)
        %footer
          %p= &quot;Written by &lt;a href='http://rdf.rubyforge.org/rdfa'&gt;RDF::RDFa&lt;/a&gt; version #{RDF::RDFa::VERSION}&quot;
  </span><span class='tstring_end'>)</span></span><span class='comma'>,</span>

  <span class='comment'># Output for non-leaf resources
</span>  <span class='comment'># Note that @about may be omitted for Nodes that are not referenced
</span>  <span class='comment'>#
</span>  <span class='comment'># If _rel_ and _resource_ are not nil, the tag will be written relative
</span>  <span class='comment'># to a previous subject. If _element_ is :li, the tag will be written
</span>  <span class='comment'># with &lt;li&gt; instead of &lt;div&gt;.
</span>  <span class='comment'>#
</span>  <span class='comment'># Note that @rel and @resource can be used together, or @about and @typeof, but
</span>  <span class='comment'># not both.
</span>  <span class='comment'>#
</span>  <span class='comment'># Locals: subject, typeof, predicates, rel, element
</span>  <span class='comment'># Yield: predicates.each
</span>  <span class='symbol'>:subject</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>%q(</span><span class='tstring_content'>
    - if element == :li
      %td{:about =&gt; get_curie(subject), :typeof =&gt; typeof}
        - if typeof
          %span.type!= typeof
        %table.properties
          - predicates.each do |predicate|
            != yield(predicate)
    - elsif rel &amp;&amp; typeof
      %td{:rel =&gt; get_curie(rel)}
        %div{:about =&gt; get_curie(subject), :typeof =&gt; typeof}
          %span.type!= typeof
          %table.properties
            - predicates.each do |predicate|
              != yield(predicate)
    - elsif rel
      %td{:rel =&gt; get_curie(rel), :resource =&gt; get_curie(subject)}
        %table.properties
          - predicates.each do |predicate|
            != yield(predicate)
    - else
      %div{:about =&gt; get_curie(subject), :typeof =&gt; typeof}
        - if typeof
          %span.type!= typeof
        %table.properties
          - predicates.each do |predicate|
            != yield(predicate)
  </span><span class='tstring_end'>)</span></span><span class='comma'>,</span>

  <span class='comment'># Output for single-valued properties
</span>  <span class='comment'># Locals: property, objects
</span>  <span class='comment'># Yields: object
</span>  <span class='comment'># If nil is returned, render as a leaf
</span>  <span class='comment'># Otherwise, render result
</span>  <span class='symbol'>:property_value</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>%q(</span><span class='tstring_content'>
    - object = objects.first
    - if heading_predicates.include?(predicate) &amp;&amp; object.literal?
      %h1{:property =&gt; get_curie(predicate), :content =&gt; get_content(object), :lang =&gt; get_lang(object), :datatype =&gt; get_dt_curie(object)}= escape_entities(get_value(object))
    - else
      %tr.property
        %td.label
          = get_predicate_name(predicate)
        - if res = yield(object)
          != res
        - elsif object.node?
          %td{:resource =&gt; get_curie(object), :rel =&gt; get_curie(predicate)}= get_curie(object)
        - elsif object.uri?
          %td
            %a{:href =&gt; object.to_s, :rel =&gt; get_curie(predicate)}= object.to_s
        - elsif object.datatype == RDF.XMLLiteral
          %td{:property =&gt; get_curie(predicate), :lang =&gt; get_lang(object), :datatype =&gt; get_dt_curie(object)}&lt;!= get_value(object)
        - else
          %td{:property =&gt; get_curie(predicate), :content =&gt; get_content(object), :lang =&gt; get_lang(object), :datatype =&gt; get_dt_curie(object)}= escape_entities(get_value(object))
  </span><span class='tstring_end'>)</span></span><span class='comma'>,</span>

  <span class='comment'># Output for multi-valued properties
</span>  <span class='comment'># Locals: property, rel, :objects
</span>  <span class='comment'># Yields: object for leaf resource rendering
</span>  <span class='symbol'>:property_values</span> <span class='op'>=&gt;</span>  <span class='tstring'><span class='tstring_beg'>%q(</span><span class='tstring_content'>
    %tr.property
      %td.label
        = get_predicate_name(predicate)
      %td{:rel =&gt; (get_curie(rel) if rel), :property =&gt; (get_curie(property) if property)}
        %ul
          - objects.each do |object|
            - if res = yield(object)
              != res
            - elsif object.node?
              %li{:resource =&gt; get_curie(object)}= get_curie(object)
            - elsif object.uri?
              %li
                %a{:href =&gt; object.to_s}= object.to_s
            - elsif object.datatype == RDF.XMLLiteral
              %li{:lang =&gt; get_lang(object), :datatype =&gt; get_curie(object.datatype)}&lt;!= get_value(object)
            - else
              %li{:content =&gt; get_content(object), :lang =&gt; get_lang(object), :datatype =&gt; get_dt_curie(object)}= escape_entities(get_value(object))
  </span><span class='tstring_end'>)</span></span><span class='comma'>,</span>
<span class='rbrace'>}</span></pre></dd>
      
        <dt id="HAML_TEMPLATES-constant" class="">HAML_TEMPLATES =
          
        </dt>
        <dd><pre class="code"><span class='lbrace'>{</span><span class='symbol'>:base</span> <span class='op'>=&gt;</span> <span class='const'>BASE_HAML</span><span class='comma'>,</span> <span class='symbol'>:min</span> <span class='op'>=&gt;</span> <span class='const'>MIN_HAML</span><span class='comma'>,</span> <span class='symbol'>:distiller</span> <span class='op'>=&gt;</span> <span class='const'>DISTILLER_HAML</span><span class='rbrace'>}</span></pre></dd>
      
        <dt id="DEFAULT_HAML-constant" class="">DEFAULT_HAML =
          <div class="docstring">
  <div class="discussion">
    <p>The default set of HAML templates used for RDFa code generation</p>

  </div>
</div>
<div class="tags">
  
</div>
        </dt>
        <dd><pre class="code"><span class='const'>BASE_HAML</span></pre></dd>
      
    </dl>
  


  
  
  
  
  
  
  
  
  
  
  
  
  
  <h2>Instance Attribute Summary <small>(<a href="#" class="summary_toggle">collapse</a>)</small></h2>
  <ul class="summary">
    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#base_uri-instance_method" title="#base_uri (instance method)">- (RDF::URI) <strong>base_uri</strong> </a>
    

    
  </span>
  
  
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Base URI used for relativizing URIs.</p></div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#graph-instance_method" title="#graph (instance method)">- (Graph) <strong>graph</strong> </a>
    

    
  </span>
  
  
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Graph of statements serialized.</p></div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#heading_predicates-instance_method" title="#heading_predicates (instance method)">- (Array&lt;URI&gt;) <strong>heading_predicates</strong> </a>
    

    
  </span>
  
  
    <span class="note title readonly">readonly</span>
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Defines order of predicates to use in heading.</p></div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#predicate_order-instance_method" title="#predicate_order (instance method)">- (Array&lt;URI&gt;) <strong>predicate_order</strong> </a>
    

    
  </span>
  
  
    <span class="note title readonly">readonly</span>
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Defines order of predicates to to emit at begninning of a resource description.</p></div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#top_classes-instance_method" title="#top_classes (instance method)">- (Array&lt;URI&gt;) <strong>top_classes</strong> </a>
    

    
  </span>
  
  
    <span class="note title readonly">readonly</span>
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Defines rdf:type of subjects to be emitted at the beginning of the document.</p></div></span>
  
</li>

    
  </ul>



  
  
  
  
  
  <h3 class="inherited">Attributes inherited from <span class='object_link'><a href="../Writer.html" title="RDF::Writer (class)">Writer</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="../Writer.html#options-instance_method" title="RDF::Writer#options (method)">options</a></span></p>

  
  
  
  
  
  
  

  
    <h2>
      Instance Method Summary
      <small>(<a href="#" class="summary_toggle">collapse</a>)</small>
    </h2>

    <ul class="summary">
      
        <li class="protected ">
  <span class="summary_signature">
    
      <a href="#get_content-instance_method" title="#get_content (instance method)">- (String<sup>?</sup>) <strong>get_content</strong>(literal) </a>
    

    
  </span>
  
  
  <span class="note title protected">protected</span>
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Haml rendering helper.</p></div></span>
  
</li>

      
        <li class="protected ">
  <span class="summary_signature">
    
      <a href="#get_curie-instance_method" title="#get_curie (instance method)">- (String) <strong>get_curie</strong>(resource) </a>
    

    
  </span>
  
  
  <span class="note title protected">protected</span>
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Haml rendering helper.</p></div></span>
  
</li>

      
        <li class="protected ">
  <span class="summary_signature">
    
      <a href="#get_dt_curie-instance_method" title="#get_dt_curie (instance method)">- (String<sup>?</sup>) <strong>get_dt_curie</strong>(literal) </a>
    

    
  </span>
  
  
  <span class="note title protected">protected</span>
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Haml rendering helper.</p></div></span>
  
</li>

      
        <li class="protected ">
  <span class="summary_signature">
    
      <a href="#get_lang-instance_method" title="#get_lang (instance method)">- (String<sup>?</sup>) <strong>get_lang</strong>(literal) </a>
    

    
  </span>
  
  
  <span class="note title protected">protected</span>
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Haml rendering helper.</p></div></span>
  
</li>

      
        <li class="protected ">
  <span class="summary_signature">
    
      <a href="#get_predicate_name-instance_method" title="#get_predicate_name (instance method)">- (String) <strong>get_predicate_name</strong>(resource) </a>
    

    
  </span>
  
  
  <span class="note title protected">protected</span>
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Haml rendering helper.</p></div></span>
  
</li>

      
        <li class="protected ">
  <span class="summary_signature">
    
      <a href="#get_value-instance_method" title="#get_value (instance method)">- (String) <strong>get_value</strong>(literal) </a>
    

    
  </span>
  
  
  <span class="note title protected">protected</span>
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Haml rendering helper.</p></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#haml_template-instance_method" title="#haml_template (instance method)">- (Hash&lt;Symbol =&gt; String&gt;) <strong>haml_template</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#initialize-instance_method" title="#initialize (instance method)">- (Writer) <strong>initialize</strong>(output = $stdout, options = {}) {|writer| ... }</a>
    

    
  </span>
  
    <span class="note title constructor">constructor</span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Initializes the RDFa writer instance.</p></div></span>
  
</li>

      
        <li class="protected ">
  <span class="summary_signature">
    
      <a href="#order_properties-instance_method" title="#order_properties (instance method)">- (Array&lt;String&gt;) <strong>order_properties</strong>(properties) </a>
    

    
  </span>
  
  
  <span class="note title protected">protected</span>
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Take a hash from predicate uris to lists of values.</p></div></span>
  
</li>

      
        <li class="protected ">
  <span class="summary_signature">
    
      <a href="#order_subjects-instance_method" title="#order_subjects (instance method)">- (Array&lt;Resource&gt;) <strong>order_subjects</strong> </a>
    

    
  </span>
  
  
  <span class="note title protected">protected</span>
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Order subjects for output.</p></div></span>
  
</li>

      
        <li class="protected ">
  <span class="summary_signature">
    
      <a href="#predicate-instance_method" title="#predicate (instance method)">- (String) <strong>predicate</strong>(predicate, objects) </a>
    

    
  </span>
  
  
  <span class="note title protected">protected</span>
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Write a predicate with one or more values.</p></div></span>
  
</li>

      
        <li class="protected ">
  <span class="summary_signature">
    
      <a href="#preprocess-instance_method" title="#preprocess (instance method)">- (ignored) <strong>preprocess</strong> </a>
    

    
  </span>
  
  
  <span class="note title protected">protected</span>
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Perform any preprocessing of statements required.</p></div></span>
  
</li>

      
        <li class="protected ">
  <span class="summary_signature">
    
      <a href="#preprocess_statement-instance_method" title="#preprocess_statement (instance method)">- (ignored) <strong>preprocess_statement</strong>(statement) </a>
    

    
  </span>
  
  
  <span class="note title protected">protected</span>
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Perform any statement preprocessing required.</p></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#profile_repository-instance_method" title="#profile_repository (instance method)">- (RDF::Repository) <strong>profile_repository</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#profile_repository%3D-instance_method" title="#profile_repository= (instance method)">- (RDF::Repository) <strong>profile_repository=</strong>(repo) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="protected ">
  <span class="summary_signature">
    
      <a href="#render_document-instance_method" title="#render_document (instance method)">- (Object) <strong>render_document</strong>(subjects, options = {}) {|subject| ... }</a>
    

    
  </span>
  
  
  <span class="note title protected">protected</span>
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Render document using haml_template[:doc].</p></div></span>
  
</li>

      
        <li class="protected ">
  <span class="summary_signature">
    
      <a href="#render_property-instance_method" title="#render_property (instance method)">- (Object) <strong>render_property</strong>(predicate, objects, property, rel, options = {}) {|object| ... }</a>
    

    
  </span>
  
  
  <span class="note title protected">protected</span>
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Render a single- or multi-valued predicate using haml<em>template[:property</em>value] or haml<em>template[:property</em>values].</p></div></span>
  
</li>

      
        <li class="protected ">
  <span class="summary_signature">
    
      <a href="#render_subject-instance_method" title="#render_subject (instance method)">- (Object) <strong>render_subject</strong>(subject, predicates, options = {}) {|predicate| ... }</a>
    

    
  </span>
  
  
  <span class="note title protected">protected</span>
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Render a subject using haml_template[:subject].</p></div></span>
  
</li>

      
        <li class="protected ">
  <span class="summary_signature">
    
      <a href="#reset-instance_method" title="#reset (instance method)">- (Object) <strong>reset</strong> </a>
    

    
  </span>
  
  
  <span class="note title protected">protected</span>
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Reset parser to run again.</p></div></span>
  
</li>

      
        <li class="protected ">
  <span class="summary_signature">
    
      <a href="#subject-instance_method" title="#subject (instance method)">- (Nokogiri::XML::Element, {Namespace}) <strong>subject</strong>(subject, options = {}) </a>
    

    
  </span>
  
  
  <span class="note title protected">protected</span>
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Display a subject.</p></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#write_epilogue-instance_method" title="#write_epilogue (instance method)">- <strong>write_epilogue</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Outputs the XHTML+RDFa representation of all stored triples.</p></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#write_graph-instance_method" title="#write_graph (instance method)">- <strong>write_graph</strong>(graph) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Write whole graph.</p></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#write_statement-instance_method" title="#write_statement (instance method)">- <strong>write_statement</strong>(statement) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Addes a statement to be serialized.</p></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#write_triple-instance_method" title="#write_triple (instance method)">- <strong>write_triple</strong>(subject, predicate, object) </a>
    

    
  </span>
  
  
  
  <span class="abstract note title">Abstract</span>
  
  

  
    <span class="summary_desc"><div class='inline'><p>Addes a triple to be serialized.</p></div></span>
  
</li>

      
    </ul>
  


  
  
  
  
  
  
  
  <h3 class="inherited">Methods inherited from <span class='object_link'><a href="../Writer.html" title="RDF::Writer (class)">Writer</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="../Writer.html#buffer-class_method" title="RDF::Writer.buffer (method)">buffer</a></span>, <span class='object_link'><a href="../Writer.html#dump-class_method" title="RDF::Writer.dump (method)">dump</a></span>, <span class='object_link'><a href="../Writer.html#each-class_method" title="RDF::Writer.each (method)">each</a></span>, <span class='object_link'><a href="../Writer.html#escaped-instance_method" title="RDF::Writer#escaped (method)">#escaped</a></span>, <span class='object_link'><a href="../Writer.html#flush-instance_method" title="RDF::Writer#flush (method)">#flush</a></span>, <span class='object_link'><a href="../Writer.html#for-class_method" title="RDF::Writer.for (method)">for</a></span>, <span class='object_link'><a href="../Writer.html#format-class_method" title="RDF::Writer.format (method)">format</a></span>, <span class='object_link'><a href="../Writer.html#format_list-instance_method" title="RDF::Writer#format_list (method)">#format_list</a></span>, <span class='object_link'><a href="../Writer.html#format_literal-instance_method" title="RDF::Writer#format_literal (method)">#format_literal</a></span>, <span class='object_link'><a href="../Writer.html#format_node-instance_method" title="RDF::Writer#format_node (method)">#format_node</a></span>, <span class='object_link'><a href="../Writer.html#format_term-instance_method" title="RDF::Writer#format_term (method)">#format_term</a></span>, <span class='object_link'><a href="../Writer.html#format_uri-instance_method" title="RDF::Writer#format_uri (method)">#format_uri</a></span>, <span class='object_link'><a href="../Writer.html#node_id-instance_method" title="RDF::Writer#node_id (method)">#node_id</a></span>, <span class='object_link'><a href="../Writer.html#open-class_method" title="RDF::Writer.open (method)">open</a></span>, <span class='object_link'><a href="../Writer.html#prefix-instance_method" title="RDF::Writer#prefix (method)">#prefix</a></span>, <span class='object_link'><a href="../Writer.html#prefixes-instance_method" title="RDF::Writer#prefixes (method)">#prefixes</a></span>, <span class='object_link'><a href="../Writer.html#prefixes%3D-instance_method" title="RDF::Writer#prefixes= (method)">#prefixes=</a></span>, <span class='object_link'><a href="../Writer.html#puts-instance_method" title="RDF::Writer#puts (method)">#puts</a></span>, <span class='object_link'><a href="../Writer.html#quoted-instance_method" title="RDF::Writer#quoted (method)">#quoted</a></span>, <span class='object_link'><a href="../Writer.html#to_sym-class_method" title="RDF::Writer.to_sym (method)">to_sym</a></span>, <span class='object_link'><a href="../Writer.html#to_sym-instance_method" title="RDF::Writer#to_sym (method)">#to_sym</a></span>, <span class='object_link'><a href="../Writer.html#uri_for-instance_method" title="RDF::Writer#uri_for (method)">#uri_for</a></span>, <span class='object_link'><a href="../Writer.html#write_comment-instance_method" title="RDF::Writer#write_comment (method)">#write_comment</a></span>, <span class='object_link'><a href="../Writer.html#write_prologue-instance_method" title="RDF::Writer#write_prologue (method)">#write_prologue</a></span>, <span class='object_link'><a href="../Writer.html#write_statements-instance_method" title="RDF::Writer#write_statements (method)">#write_statements</a></span>, <span class='object_link'><a href="../Writer.html#write_triples-instance_method" title="RDF::Writer#write_triples (method)">#write_triples</a></span></p>

  
  
  
  
  
  
  
  <h3 class="inherited">Methods included from <span class='object_link'><a href="../Util/Aliasing/LateBound.html" title="RDF::Util::Aliasing::LateBound (module)">Util::Aliasing::LateBound</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="../Util/Aliasing/LateBound.html#alias_method-instance_method" title="RDF::Util::Aliasing::LateBound#alias_method (method)">#alias_method</a></span></p>

  
  
  
  
  
  
  
  
  <h3 class="inherited">Methods included from <span class='object_link'><a href="../Writable.html" title="RDF::Writable (module)">Writable</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="../Writable.html#%3C%3C-instance_method" title="RDF::Writable#<< (method)">#<<</a></span>, <span class='object_link'><a href="../Writable.html#insert-instance_method" title="RDF::Writable#insert (method)">#insert</a></span>, <span class='object_link'><a href="../Writable.html#insert_graph-instance_method" title="RDF::Writable#insert_graph (method)">#insert_graph</a></span>, <span class='object_link'><a href="../Writable.html#insert_reader-instance_method" title="RDF::Writable#insert_reader (method)">#insert_reader</a></span>, <span class='object_link'><a href="../Writable.html#insert_statement-instance_method" title="RDF::Writable#insert_statement (method)">#insert_statement</a></span>, <span class='object_link'><a href="../Writable.html#insert_statements-instance_method" title="RDF::Writable#insert_statements (method)">#insert_statements</a></span>, <span class='object_link'><a href="../Writable.html#writable%3F-instance_method" title="RDF::Writable#writable? (method)">#writable?</a></span></p>
<div id="constructor_details" class="method_details_list">
  <h2>Constructor Details</h2>
  
    <div class="method_details first">
  <p class="signature first" id="initialize-instance_method">
  
    - (<tt><span class='object_link'><a href="" title="RDF::RDFa::Writer (class)">Writer</a></span></tt>) <strong>initialize</strong>(output = $stdout, options = {}) {|writer| ... }
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>Initializes the RDFa writer instance.</p>

  </div>
</div>
<div class="tags">
  <h3>Parameters:</h3>
<ul class="param">
  
    <li>
      
        <span class='name'>output</span>
      
      
        <span class='type'>(<tt>IO</tt>, <tt>File</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>$stdout</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>the output stream</p></div>
      
    </li>
  
    <li>
      
        <span class='name'>options</span>
      
      
        <span class='type'>(<tt>Hash{<span class='object_link'><a href="../../Symbol.html" title="Symbol (class)">Symbol</a></span> =&gt; <span class='object_link'><a href="../../Object.html" title="Object (class)">Object</a></span>}</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>{}</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>any additional options</p></div>
      
    </li>
  
</ul>

  
    
    
    
    
    <h3>Options Hash (<tt>options</tt>):</h3>
    <ul class="option">
      
        <li>
          <span class="name">:canonicalize</span>
          <span class="type">(<tt>Boolean</tt>)</span>
          <span class="default">
            
              &mdash; default:
              <tt>false</tt>
            
          </span>
          &mdash; <div class='inline'><p>whether to canonicalize literals when serializing</p></div>
        </tr>
      
        <li>
          <span class="name">:prefixes</span>
          <span class="type">(<tt>Hash</tt>)</span>
          <span class="default">
            
              &mdash; default:
              <tt>Hash.new</tt>
            
          </span>
          &mdash; <div class='inline'><p>the prefix mappings to use</p></div>
        </tr>
      
        <li>
          <span class="name">:profiles</span>
          <span class="type">(<tt>#to_a</tt>)</span>
          <span class="default">
            
              &mdash; default:
              <tt>Array.new</tt>
            
          </span>
          &mdash; <div class='inline'><p>List of profiles to add to document. This will use terms, prefix definitions and default-vocabularies
identified within the profiles (taken in reverse order) to determine how to serialize terms</p></div>
        </tr>
      
        <li>
          <span class="name">:base_uri</span>
          <span class="type">(<tt>#to_s</tt>)</span>
          <span class="default">
            
              &mdash; default:
              <tt>nil</tt>
            
          </span>
          &mdash; <div class='inline'><p>the base URI to use when constructing relative URIs, set as html>head>base.href</p></div>
        </tr>
      
        <li>
          <span class="name">:lang</span>
          <span class="type">(<tt>#to_s</tt>)</span>
          <span class="default">
            
              &mdash; default:
              <tt>nil</tt>
            
          </span>
          &mdash; <div class='inline'><p>Output as root @lang attribute, and avoid generation <em>@lang</em> where possible</p></div>
        </tr>
      
        <li>
          <span class="name">:standard_prefixes</span>
          <span class="type">(<tt>Boolean</tt>)</span>
          <span class="default">
            
              &mdash; default:
              <tt>false</tt>
            
          </span>
          &mdash; <div class='inline'><p>Add standard prefixes to <em>prefixes</em>, if necessary.</p></div>
        </tr>
      
        <li>
          <span class="name">:profile_repository</span>
          <span class="type">(<tt><span class='object_link'><a href="../Repository.html" title="RDF::Repository (class)">Repository</a></span></tt>)</span>
          <span class="default">
            
              &mdash; default:
              <tt>nil</tt>
            
          </span>
          &mdash; <div class='inline'><p>Repository to find and save profile graphs.</p></div>
        </tr>
      
        <li>
          <span class="name">:top_classes</span>
          <span class="type">(<tt><span class='object_link'><a href="../../Array.html" title="Array (class)">Array</a></span>&lt;<span class='object_link'><a href="../URI.html" title="RDF::URI (class)">RDF::URI</a></span>&gt;</tt>)</span>
          <span class="default">
            
              &mdash; default:
              <tt>[RDF::RDFS.Class]</tt>
            
          </span>
          &mdash; <div class='inline'><p>Defines rdf:type of subjects to be emitted at the beginning of the document.</p></div>
        </tr>
      
        <li>
          <span class="name">:predicate_order</span>
          <span class="type">(<tt><span class='object_link'><a href="../../Array.html" title="Array (class)">Array</a></span>&lt;<span class='object_link'><a href="../URI.html" title="RDF::URI (class)">RDF::URI</a></span>&gt;</tt>)</span>
          <span class="default">
            
              &mdash; default:
              <tt>[RDF.type</tt>, <tt>RDF::RDFS.label</tt>, <tt>RDF::DC.title]</tt>
            
          </span>
          &mdash; <div class='inline'><p>Defines order of predicates to to emit at begninning of a resource description..</p></div>
        </tr>
      
        <li>
          <span class="name">:heading_predicates</span>
          <span class="type">(<tt><span class='object_link'><a href="../../Array.html" title="Array (class)">Array</a></span>&lt;<span class='object_link'><a href="../URI.html" title="RDF::URI (class)">RDF::URI</a></span>&gt;</tt>)</span>
          <span class="default">
            
              &mdash; default:
              <tt>[RDF::RDFS.label</tt>, <tt>RDF::DC.title]</tt>
            
          </span>
          &mdash; <div class='inline'><p>Defines order of predicates to use in heading.</p></div>
        </tr>
      
        <li>
          <span class="name">:haml</span>
          <span class="type">(<tt><span class='object_link'><a href="../../String.html" title="String (class)">String</a></span></tt>, <tt><span class='object_link'><a href="../../Symbol.html" title="Symbol (class)">Symbol</a></span></tt>, <tt>Hash{<span class='object_link'><a href="../../Symbol.html" title="Symbol (class)">Symbol</a></span> =&gt; <span class='object_link'><a href="../../String.html" title="String (class)">String</a></span>}</tt>)</span>
          <span class="default">
            
              &mdash; default:
              <tt>DEFAULT_HAML</tt>
            
          </span>
          &mdash; <div class='inline'><p>HAML templates used for generating code</p></div>
        </tr>
      
        <li>
          <span class="name">:haml_options</span>
          <span class="type">(<tt>Hash</tt>)</span>
          <span class="default">
            
              &mdash; default:
              <tt>HAML_OPTIONS</tt>
            
          </span>
          &mdash; <div class='inline'><p>Options to pass to Haml::Engine.new. Default options set :ugly => false
to ensure that whitespace in literals with newlines is properly preserved.</p></div>
        </tr>
      
    </ul>
  
<h3>Yields:</h3>
<ul class="yield">
  
    <li>
      
      
        <span class='type'>(<tt>writer</tt>)</span>
      
      
      
    </li>
  
</ul>
<h3>Yield Parameters:</h3>
<ul class="yieldparam">
  
    <li>
      
        <span class='name'>writer</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../Writer.html" title="RDF::Writer (class)">RDF::Writer</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


123
124
125
126
127
128
129
130
131
132
133
134
135</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'vendor/bundler/ruby/1.8/gems/rdf-rdfa-0.3.3/lib/rdf/rdfa/writer.rb', line 123</span>

<span class='kw'>def</span> <span class='id initialize'>initialize</span><span class='lparen'>(</span><span class='id output'>output</span> <span class='op'>=</span> <span class='gvar'>$stdout</span><span class='comma'>,</span> <span class='id options'>options</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id block'>block</span><span class='rparen'>)</span>
  <span class='kw'>self</span><span class='period'>.</span><span class='id profile_repository'>profile_repository</span> <span class='op'>=</span> <span class='id options'>options</span><span class='lbracket'>[</span><span class='symbol'>:profile_repository</span><span class='rbracket'>]</span> <span class='kw'>if</span> <span class='id options'>options</span><span class='lbracket'>[</span><span class='symbol'>:profile_repository</span><span class='rbracket'>]</span>
  <span class='kw'>super</span> <span class='kw'>do</span>
    <span class='ivar'>@uri_to_term_or_curie</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
    <span class='ivar'>@uri_to_prefix</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
    <span class='ivar'>@top_classes</span> <span class='op'>=</span> <span class='id options'>options</span><span class='lbracket'>[</span><span class='symbol'>:top_classes</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='lbracket'>[</span><span class='const'>RDF</span><span class='op'>::</span><span class='const'>RDFS</span><span class='period'>.</span><span class='const'>Class</span><span class='rbracket'>]</span>
    <span class='ivar'>@predicate_order</span> <span class='op'>=</span> <span class='id options'>options</span><span class='lbracket'>[</span><span class='symbol'>:predicate_order</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='lbracket'>[</span><span class='const'>RDF</span><span class='period'>.</span><span class='id type'>type</span><span class='comma'>,</span> <span class='const'>RDF</span><span class='op'>::</span><span class='const'>RDFS</span><span class='period'>.</span><span class='id label'>label</span><span class='comma'>,</span> <span class='const'>RDF</span><span class='op'>::</span><span class='const'>DC</span><span class='period'>.</span><span class='id title'>title</span><span class='rbracket'>]</span>
    <span class='ivar'>@heading_predicates</span> <span class='op'>=</span> <span class='id options'>options</span><span class='lbracket'>[</span><span class='symbol'>:heading_predicates</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='lbracket'>[</span><span class='const'>RDF</span><span class='op'>::</span><span class='const'>RDFS</span><span class='period'>.</span><span class='id label'>label</span><span class='comma'>,</span> <span class='const'>RDF</span><span class='op'>::</span><span class='const'>DC</span><span class='period'>.</span><span class='id title'>title</span><span class='rbracket'>]</span>
    <span class='ivar'>@graph</span> <span class='op'>=</span> <span class='const'>RDF</span><span class='op'>::</span><span class='const'>Graph</span><span class='period'>.</span><span class='id new'>new</span>

    <span class='id block'>block</span><span class='period'>.</span><span class='id call'>call</span><span class='lparen'>(</span><span class='kw'>self</span><span class='rparen'>)</span> <span class='kw'>if</span> <span class='id block_given?'>block_given?</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
  
</div>

  <div id="instance_attr_details" class="attr_details">
    <h2>Instance Attribute Details</h2>
    
      
      <span id="base_uri=-instance_method"></span>
      <span id="base_uri-instance_method"></span>
      <div class="method_details first">
  <p class="signature first" id="base_uri-instance_method">
  
    - (<tt><span class='object_link'><a href="../URI.html" title="RDF::URI (class)">RDF::URI</a></span></tt>) <strong>base_uri</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>Base URI used for relativizing URIs</p>

  </div>
</div>
<div class="tags">
  <h3>Returns:</h3>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../URI.html" title="RDF::URI (class)">RDF::URI</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Base URI used for relativizing URIs</p></div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


86
87
88</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'vendor/bundler/ruby/1.8/gems/rdf-rdfa-0.3.3/lib/rdf/rdfa/writer.rb', line 86</span>

<span class='kw'>def</span> <span class='id base_uri'>base_uri</span>
  <span class='ivar'>@base_uri</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id="graph=-instance_method"></span>
      <span id="graph-instance_method"></span>
      <div class="method_details ">
  <p class="signature " id="graph-instance_method">
  
    - (<tt><span class='object_link'><a href="../Graph.html" title="RDF::Graph (class)">Graph</a></span></tt>) <strong>graph</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>Graph of statements serialized</p>

  </div>
</div>
<div class="tags">
  <h3>Returns:</h3>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../Graph.html" title="RDF::Graph (class)">Graph</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Graph of statements serialized</p></div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


83
84
85</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'vendor/bundler/ruby/1.8/gems/rdf-rdfa-0.3.3/lib/rdf/rdfa/writer.rb', line 83</span>

<span class='kw'>def</span> <span class='id graph'>graph</span>
  <span class='ivar'>@graph</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id=""></span>
      <span id="heading_predicates-instance_method"></span>
      <div class="method_details ">
  <p class="signature " id="heading_predicates-instance_method">
  
    - (<tt><span class='object_link'><a href="../../Array.html" title="Array (class)">Array</a></span>&lt;<span class='object_link'><a href="../URI.html" title="RDF::URI (class)">URI</a></span>&gt;</tt>) <strong>heading_predicates</strong>  <span class="extras">(readonly)</span>
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>Defines order of predicates to use in heading.</p>

  </div>
</div>
<div class="tags">
  <h3>Returns:</h3>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../../Array.html" title="Array (class)">Array</a></span>&lt;<span class='object_link'><a href="../URI.html" title="RDF::URI (class)">URI</a></span>&gt;</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


76
77
78</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'vendor/bundler/ruby/1.8/gems/rdf-rdfa-0.3.3/lib/rdf/rdfa/writer.rb', line 76</span>

<span class='kw'>def</span> <span class='id heading_predicates'>heading_predicates</span>
  <span class='ivar'>@heading_predicates</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id=""></span>
      <span id="predicate_order-instance_method"></span>
      <div class="method_details ">
  <p class="signature " id="predicate_order-instance_method">
  
    - (<tt><span class='object_link'><a href="../../Array.html" title="Array (class)">Array</a></span>&lt;<span class='object_link'><a href="../URI.html" title="RDF::URI (class)">URI</a></span>&gt;</tt>) <strong>predicate_order</strong>  <span class="extras">(readonly)</span>
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>Defines order of predicates to to emit at begninning of a resource description. Defaults to
[rdf:type, rdfs:label, dc:title]</p>

  </div>
</div>
<div class="tags">
  <h3>Returns:</h3>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../../Array.html" title="Array (class)">Array</a></span>&lt;<span class='object_link'><a href="../URI.html" title="RDF::URI (class)">URI</a></span>&gt;</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


72
73
74</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'vendor/bundler/ruby/1.8/gems/rdf-rdfa-0.3.3/lib/rdf/rdfa/writer.rb', line 72</span>

<span class='kw'>def</span> <span class='id predicate_order'>predicate_order</span>
  <span class='ivar'>@predicate_order</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id=""></span>
      <span id="top_classes-instance_method"></span>
      <div class="method_details ">
  <p class="signature " id="top_classes-instance_method">
  
    - (<tt><span class='object_link'><a href="../../Array.html" title="Array (class)">Array</a></span>&lt;<span class='object_link'><a href="../URI.html" title="RDF::URI (class)">URI</a></span>&gt;</tt>) <strong>top_classes</strong>  <span class="extras">(readonly)</span>
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>Defines rdf:type of subjects to be emitted at the beginning of the document.</p>

  </div>
</div>
<div class="tags">
  <h3>Returns:</h3>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../../Array.html" title="Array (class)">Array</a></span>&lt;<span class='object_link'><a href="../URI.html" title="RDF::URI (class)">URI</a></span>&gt;</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


67
68
69</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'vendor/bundler/ruby/1.8/gems/rdf-rdfa-0.3.3/lib/rdf/rdfa/writer.rb', line 67</span>

<span class='kw'>def</span> <span class='id top_classes'>top_classes</span>
  <span class='ivar'>@top_classes</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>


  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>
    
    
      <div class="method_details first">
  <p class="signature first" id="get_content-instance_method">
  
    - (<tt><span class='object_link'><a href="../../String.html" title="String (class)">String</a></span></tt><sup>?</sup>) <strong>get_content</strong>(literal)  <span class="extras">(protected)</span>
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>Haml rendering helper. Data to be added to a @content value</p>

  </div>
</div>
<div class="tags">
  <h3>Parameters:</h3>
<ul class="param">
  
    <li>
      
        <span class='name'>literal</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../Literal.html" title="RDF::Literal (class)">RDF::Literal</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>
<h3>Returns:</h3>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../../String.html" title="String (class)">String</a></span></tt>, <tt>nil</tt>)</span>
      
      
      
    </li>
  
</ul>
<h3>Raises:</h3>
<ul class="raise">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../WriterError.html" title="RDF::WriterError (class)">RDF::WriterError</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


663
664
665
666
667
668
669</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'vendor/bundler/ruby/1.8/gems/rdf-rdfa-0.3.3/lib/rdf/rdfa/writer.rb', line 663</span>

<span class='kw'>def</span> <span class='id get_content'>get_content</span><span class='lparen'>(</span><span class='id literal'>literal</span><span class='rparen'>)</span>
  <span class='id raise'>raise</span> <span class='const'>RDF</span><span class='op'>::</span><span class='const'>WriterError</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Getting content for </span><span class='embexpr_beg'>#{</span><span class='id literal'>literal</span><span class='period'>.</span><span class='id inspect'>inspect</span><span class='rbrace'>}</span><span class='tstring_content'>, which must be a literal</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>unless</span> <span class='id literal'>literal</span><span class='period'>.</span><span class='id is_a?'>is_a?</span><span class='lparen'>(</span><span class='const'>RDF</span><span class='op'>::</span><span class='const'>Literal</span><span class='rparen'>)</span>
  <span class='kw'>case</span> <span class='id literal'>literal</span>
  <span class='kw'>when</span> <span class='const'>RDF</span><span class='op'>::</span><span class='const'>Literal</span><span class='op'>::</span><span class='const'>Date</span><span class='comma'>,</span> <span class='const'>RDF</span><span class='op'>::</span><span class='const'>Literal</span><span class='op'>::</span><span class='const'>Time</span><span class='comma'>,</span> <span class='const'>RDF</span><span class='op'>::</span><span class='const'>Literal</span><span class='op'>::</span><span class='const'>DateTime</span>
    <span class='id literal'>literal</span><span class='period'>.</span><span class='id to_s'>to_s</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="get_curie-instance_method">
  
    - (<tt><span class='object_link'><a href="../../String.html" title="String (class)">String</a></span></tt>) <strong>get_curie</strong>(resource)  <span class="extras">(protected)</span>
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>Haml rendering helper. Return appropriate, term, CURIE or URI for the given resource.</p>

  </div>
</div>
<div class="tags">
  <h3>Parameters:</h3>
<ul class="param">
  
    <li>
      
        <span class='name'>resource</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../Value.html" title="RDF::Value (module)">RDF::Value</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>
<h3>Returns:</h3>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../../String.html" title="String (class)">String</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>value to use to identify URI</p></div>
      
    </li>
  
</ul>
<h3>Raises:</h3>
<ul class="raise">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../WriterError.html" title="RDF::WriterError (class)">RDF::WriterError</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


705
706
707
708
709
710
711
712
713
714
715
716
717
718
719
720
721
722
723
724
725
726
727
728
729
730
731
732
733
734
735
736
737
738
739
740
741
742
743
744
745
746
747
748
749
750</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'vendor/bundler/ruby/1.8/gems/rdf-rdfa-0.3.3/lib/rdf/rdfa/writer.rb', line 705</span>

<span class='kw'>def</span> <span class='id get_curie'>get_curie</span><span class='lparen'>(</span><span class='id resource'>resource</span><span class='rparen'>)</span>
  <span class='id raise'>raise</span> <span class='const'>RDF</span><span class='op'>::</span><span class='const'>WriterError</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Getting CURIE for </span><span class='embexpr_beg'>#{</span><span class='id resource'>resource</span><span class='period'>.</span><span class='id inspect'>inspect</span><span class='rbrace'>}</span><span class='tstring_content'>, which must be an RDF value</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>unless</span> <span class='id resource'>resource</span><span class='period'>.</span><span class='id is_a?'>is_a?</span><span class='lparen'>(</span><span class='const'>RDF</span><span class='op'>::</span><span class='const'>Value</span><span class='rparen'>)</span>
  <span class='kw'>return</span> <span class='id resource'>resource</span><span class='period'>.</span><span class='id to_s'>to_s</span> <span class='kw'>unless</span> <span class='id resource'>resource</span><span class='period'>.</span><span class='id uri?'>uri?</span>

  <span class='ivar'>@rdfcore_prefixes</span> <span class='op'>||=</span> <span class='const'>RDF</span><span class='op'>::</span><span class='const'>RDFa</span><span class='op'>::</span><span class='const'>Profile</span><span class='period'>.</span><span class='id find'>find</span><span class='lparen'>(</span><span class='const'>RDF</span><span class='op'>::</span><span class='const'>URI</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>http://www.w3.org/profile/rdfa-1.1</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span><span class='rparen'>)</span><span class='period'>.</span><span class='id prefixes'>prefixes</span>
  
  <span class='id uri'>uri</span> <span class='op'>=</span> <span class='id resource'>resource</span><span class='period'>.</span><span class='id to_s'>to_s</span>

  <span class='id curie'>curie</span> <span class='op'>=</span> <span class='kw'>case</span>
  <span class='kw'>when</span> <span class='ivar'>@uri_to_term_or_curie</span><span class='period'>.</span><span class='id has_key?'>has_key?</span><span class='lparen'>(</span><span class='id uri'>uri</span><span class='rparen'>)</span>
    <span class='comment'>#add_debug(&quot;get_curie(#{uri}): uri_to_term_or_curie&quot;)
</span>    <span class='kw'>return</span> <span class='ivar'>@uri_to_term_or_curie</span><span class='lbracket'>[</span><span class='id uri'>uri</span><span class='rbracket'>]</span>
  <span class='kw'>when</span> <span class='ivar'>@base_uri</span> <span class='op'>&amp;&amp;</span> <span class='id uri'>uri</span><span class='period'>.</span><span class='id index'>index</span><span class='lparen'>(</span><span class='ivar'>@base_uri</span><span class='period'>.</span><span class='id to_s'>to_s</span><span class='rparen'>)</span> <span class='op'>==</span> <span class='int'>0</span>
    <span class='comment'>#add_debug(&quot;get_curie(#{uri}): base_uri (#{uri.sub(@base_uri.to_s, &quot;&quot;)})&quot;)
</span>    <span class='id uri'>uri</span><span class='period'>.</span><span class='id sub'>sub</span><span class='lparen'>(</span><span class='ivar'>@base_uri</span><span class='period'>.</span><span class='id to_s'>to_s</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
  <span class='kw'>when</span> <span class='ivar'>@vocabulary</span> <span class='op'>&amp;&amp;</span> <span class='id uri'>uri</span><span class='period'>.</span><span class='id index'>index</span><span class='lparen'>(</span><span class='ivar'>@vocabulary</span><span class='rparen'>)</span> <span class='op'>==</span> <span class='int'>0</span>
    <span class='comment'>#add_debug(&quot;get_curie(#{uri}): vocabulary&quot;)
</span>    <span class='id uri'>uri</span><span class='period'>.</span><span class='id sub'>sub</span><span class='lparen'>(</span><span class='ivar'>@vocabulary</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
  <span class='kw'>when</span> <span class='id u'>u</span> <span class='op'>=</span> <span class='ivar'>@uri_to_prefix</span><span class='period'>.</span><span class='id keys'>keys</span><span class='period'>.</span><span class='id detect'>detect</span> <span class='lbrace'>{</span><span class='op'>|</span><span class='id u'>u</span><span class='op'>|</span> <span class='id uri'>uri</span><span class='period'>.</span><span class='id index'>index</span><span class='lparen'>(</span><span class='id u'>u</span><span class='period'>.</span><span class='id to_s'>to_s</span><span class='rparen'>)</span> <span class='op'>==</span> <span class='int'>0</span><span class='rbrace'>}</span>
    <span class='comment'>#add_debug(&quot;get_curie(#{uri}): uri_to_prefix&quot;)
</span>    <span class='comment'># Use a defined prefix
</span>    <span class='id prefix'>prefix</span> <span class='op'>=</span> <span class='ivar'>@uri_to_prefix</span><span class='lbracket'>[</span><span class='id u'>u</span><span class='rbracket'>]</span>
    <span class='id prefix'>prefix</span><span class='lparen'>(</span><span class='id prefix'>prefix</span><span class='comma'>,</span> <span class='id u'>u</span><span class='rparen'>)</span>  <span class='comment'># Define for output
</span>    <span class='id uri'>uri</span><span class='period'>.</span><span class='id sub'>sub</span><span class='lparen'>(</span><span class='id u'>u</span><span class='period'>.</span><span class='id to_s'>to_s</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id prefix'>prefix</span><span class='rbrace'>}</span><span class='tstring_content'>:</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
  <span class='kw'>when</span> <span class='id u'>u</span> <span class='op'>=</span> <span class='ivar'>@rdfcore_prefixes</span><span class='period'>.</span><span class='id values'>values</span><span class='period'>.</span><span class='id detect'>detect</span> <span class='lbrace'>{</span><span class='op'>|</span><span class='id u'>u</span><span class='op'>|</span> <span class='id uri'>uri</span><span class='period'>.</span><span class='id index'>index</span><span class='lparen'>(</span><span class='id u'>u</span><span class='period'>.</span><span class='id to_s'>to_s</span><span class='rparen'>)</span> <span class='op'>==</span> <span class='int'>0</span><span class='rbrace'>}</span>
    <span class='comment'>#add_debug(&quot;get_curie(#{uri}): rdfcore_prefixes&quot;)
</span>    <span class='comment'># Use standard profile prefixes
</span>    <span class='id pfx'>pfx</span> <span class='op'>=</span> <span class='ivar'>@rdfcore_prefixes</span><span class='period'>.</span><span class='id invert'>invert</span><span class='lbracket'>[</span><span class='id u'>u</span><span class='rbracket'>]</span>
    <span class='id prefix'>prefix</span><span class='lparen'>(</span><span class='id pfx'>pfx</span><span class='comma'>,</span> <span class='id u'>u</span><span class='rparen'>)</span>  <span class='comment'># Define for output
</span>    <span class='id uri'>uri</span><span class='period'>.</span><span class='id sub'>sub</span><span class='lparen'>(</span><span class='id u'>u</span><span class='period'>.</span><span class='id to_s'>to_s</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id pfx'>pfx</span><span class='rbrace'>}</span><span class='tstring_content'>:</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
  <span class='kw'>when</span> <span class='ivar'>@options</span><span class='lbracket'>[</span><span class='symbol'>:standard_prefixes</span><span class='rbracket'>]</span> <span class='op'>&amp;&amp;</span> <span class='id vocab'>vocab</span> <span class='op'>=</span> <span class='const'>RDF</span><span class='op'>::</span><span class='const'>Vocabulary</span><span class='period'>.</span><span class='id detect'>detect</span> <span class='lbrace'>{</span><span class='op'>|</span><span class='id v'>v</span><span class='op'>|</span> <span class='id uri'>uri</span><span class='period'>.</span><span class='id index'>index</span><span class='lparen'>(</span><span class='id v'>v</span><span class='period'>.</span><span class='id to_uri'>to_uri</span><span class='period'>.</span><span class='id to_s'>to_s</span><span class='rparen'>)</span> <span class='op'>==</span> <span class='int'>0</span><span class='rbrace'>}</span>
    <span class='comment'>#add_debug(&quot;get_curie(#{uri}): standard_prefixes&quot;)
</span>    <span class='id prefix'>prefix</span> <span class='op'>=</span> <span class='id vocab'>vocab</span><span class='period'>.</span><span class='id __name__'>__name__</span><span class='period'>.</span><span class='id to_s'>to_s</span><span class='period'>.</span><span class='id split'>split</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>::</span><span class='tstring_end'>'</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id last'>last</span><span class='period'>.</span><span class='id downcase'>downcase</span>
    <span class='id prefix'>prefix</span><span class='lparen'>(</span><span class='id prefix'>prefix</span><span class='comma'>,</span> <span class='id vocab'>vocab</span><span class='period'>.</span><span class='id to_uri'>to_uri</span><span class='rparen'>)</span> <span class='comment'># Define for output
</span>    <span class='id uri'>uri</span><span class='period'>.</span><span class='id sub'>sub</span><span class='lparen'>(</span><span class='id vocab'>vocab</span><span class='period'>.</span><span class='id to_uri'>to_uri</span><span class='period'>.</span><span class='id to_s'>to_s</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id prefix'>prefix</span><span class='rbrace'>}</span><span class='tstring_content'>:</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
  <span class='kw'>else</span>
    <span class='comment'>#add_debug(&quot;get_curie(#{uri}): none&quot;)
</span>    <span class='id uri'>uri</span>
  <span class='kw'>end</span>
  
  <span class='comment'>#add_debug(&quot;get_curie(#{resource}) =&gt; #{curie}&quot;)
</span>
  <span class='ivar'>@uri_to_term_or_curie</span><span class='lbracket'>[</span><span class='id uri'>uri</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id curie'>curie</span>
<span class='kw'>rescue</span> <span class='const'>Addressable</span><span class='op'>::</span><span class='const'>URI</span><span class='op'>::</span><span class='const'>InvalidURIError</span> <span class='op'>=&gt;</span> <span class='id e'>e</span>
  <span class='id raise'>raise</span> <span class='const'>RDF</span><span class='op'>::</span><span class='const'>WriterError</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Invalid URI </span><span class='embexpr_beg'>#{</span><span class='id uri'>uri</span><span class='period'>.</span><span class='id inspect'>inspect</span><span class='rbrace'>}</span><span class='tstring_content'>: </span><span class='embexpr_beg'>#{</span><span class='id e'>e</span><span class='period'>.</span><span class='id message'>message</span><span class='rbrace'>}</span><span class='tstring_end'>&quot;</span></span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="get_dt_curie-instance_method">
  
    - (<tt><span class='object_link'><a href="../../String.html" title="String (class)">String</a></span></tt><sup>?</sup>) <strong>get_dt_curie</strong>(literal)  <span class="extras">(protected)</span>
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>Haml rendering helper. Return CURIE for the literal datatype, if the literal is a typed literal.</p>

  </div>
</div>
<div class="tags">
  <h3>Parameters:</h3>
<ul class="param">
  
    <li>
      
        <span class='name'>resource</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../Resource.html" title="RDF::Resource (module)">RDF::Resource</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>
<h3>Returns:</h3>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../../String.html" title="String (class)">String</a></span></tt>, <tt>nil</tt>)</span>
      
      
      
    </li>
  
</ul>
<h3>Raises:</h3>
<ul class="raise">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../WriterError.html" title="RDF::WriterError (class)">RDF::WriterError</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


643
644
645
646</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'vendor/bundler/ruby/1.8/gems/rdf-rdfa-0.3.3/lib/rdf/rdfa/writer.rb', line 643</span>

<span class='kw'>def</span> <span class='id get_dt_curie'>get_dt_curie</span><span class='lparen'>(</span><span class='id literal'>literal</span><span class='rparen'>)</span>
  <span class='id raise'>raise</span> <span class='const'>RDF</span><span class='op'>::</span><span class='const'>WriterError</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Getting datatype CURIE for </span><span class='embexpr_beg'>#{</span><span class='id literal'>literal</span><span class='period'>.</span><span class='id inspect'>inspect</span><span class='rbrace'>}</span><span class='tstring_content'>, which must be a literal</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>unless</span> <span class='id literal'>literal</span><span class='period'>.</span><span class='id is_a?'>is_a?</span><span class='lparen'>(</span><span class='const'>RDF</span><span class='op'>::</span><span class='const'>Literal</span><span class='rparen'>)</span>
  <span class='id get_curie'>get_curie</span><span class='lparen'>(</span><span class='id literal'>literal</span><span class='period'>.</span><span class='id datatype'>datatype</span><span class='rparen'>)</span> <span class='kw'>if</span> <span class='id literal'>literal</span><span class='period'>.</span><span class='id literal?'>literal?</span> <span class='op'>&amp;&amp;</span> <span class='id literal'>literal</span><span class='period'>.</span><span class='id datatype?'>datatype?</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="get_lang-instance_method">
  
    - (<tt><span class='object_link'><a href="../../String.html" title="String (class)">String</a></span></tt><sup>?</sup>) <strong>get_lang</strong>(literal)  <span class="extras">(protected)</span>
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>Haml rendering helper. Return language for plain literal, if there is no language, or it is the same as the document, return nil</p>

  </div>
</div>
<div class="tags">
  <h3>Parameters:</h3>
<ul class="param">
  
    <li>
      
        <span class='name'>literal</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../Literal.html" title="RDF::Literal (class)">RDF::Literal</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>
<h3>Returns:</h3>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../../String.html" title="String (class)">String</a></span></tt>, <tt>nil</tt>)</span>
      
      
      
    </li>
  
</ul>
<h3>Raises:</h3>
<ul class="raise">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../WriterError.html" title="RDF::WriterError (class)">RDF::WriterError</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


653
654
655
656</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'vendor/bundler/ruby/1.8/gems/rdf-rdfa-0.3.3/lib/rdf/rdfa/writer.rb', line 653</span>

<span class='kw'>def</span> <span class='id get_lang'>get_lang</span><span class='lparen'>(</span><span class='id literal'>literal</span><span class='rparen'>)</span>
  <span class='id raise'>raise</span> <span class='const'>RDF</span><span class='op'>::</span><span class='const'>WriterError</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Getting datatype CURIE for </span><span class='embexpr_beg'>#{</span><span class='id literal'>literal</span><span class='period'>.</span><span class='id inspect'>inspect</span><span class='rbrace'>}</span><span class='tstring_content'>, which must be a literal</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>unless</span> <span class='id literal'>literal</span><span class='period'>.</span><span class='id is_a?'>is_a?</span><span class='lparen'>(</span><span class='const'>RDF</span><span class='op'>::</span><span class='const'>Literal</span><span class='rparen'>)</span>
  <span class='id literal'>literal</span><span class='period'>.</span><span class='id language'>language</span> <span class='kw'>if</span> <span class='id literal'>literal</span><span class='period'>.</span><span class='id literal?'>literal?</span> <span class='op'>&amp;&amp;</span> <span class='id literal'>literal</span><span class='period'>.</span><span class='id language'>language</span> <span class='op'>&amp;&amp;</span> <span class='id literal'>literal</span><span class='period'>.</span><span class='id language'>language</span> <span class='op'>!=</span> <span class='ivar'>@lang</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="get_predicate_name-instance_method">
  
    - (<tt><span class='object_link'><a href="../../String.html" title="String (class)">String</a></span></tt>) <strong>get_predicate_name</strong>(resource)  <span class="extras">(protected)</span>
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>Haml rendering helper. Return an appropriate label for a resource.</p>

  </div>
</div>
<div class="tags">
  <h3>Parameters:</h3>
<ul class="param">
  
    <li>
      
        <span class='name'>resource</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../Resource.html" title="RDF::Resource (module)">RDF::Resource</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>
<h3>Returns:</h3>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../../String.html" title="String (class)">String</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>
<h3>Raises:</h3>
<ul class="raise">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../WriterError.html" title="RDF::WriterError (class)">RDF::WriterError</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


695
696
697
698</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'vendor/bundler/ruby/1.8/gems/rdf-rdfa-0.3.3/lib/rdf/rdfa/writer.rb', line 695</span>

<span class='kw'>def</span> <span class='id get_predicate_name'>get_predicate_name</span><span class='lparen'>(</span><span class='id resource'>resource</span><span class='rparen'>)</span>
  <span class='id raise'>raise</span> <span class='const'>RDF</span><span class='op'>::</span><span class='const'>WriterError</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Getting predicate name for </span><span class='embexpr_beg'>#{</span><span class='id resource'>resource</span><span class='period'>.</span><span class='id inspect'>inspect</span><span class='rbrace'>}</span><span class='tstring_content'>, which must be a resource</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>unless</span> <span class='id resource'>resource</span><span class='period'>.</span><span class='id is_a?'>is_a?</span><span class='lparen'>(</span><span class='const'>RDF</span><span class='op'>::</span><span class='const'>Resource</span><span class='rparen'>)</span>
  <span class='id get_curie'>get_curie</span><span class='lparen'>(</span><span class='id resource'>resource</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="get_value-instance_method">
  
    - (<tt><span class='object_link'><a href="../../String.html" title="String (class)">String</a></span></tt>) <strong>get_value</strong>(literal)  <span class="extras">(protected)</span>
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>Haml rendering helper. Display value for object, may be non-canonical if get_content returns a non-nil value</p>

  </div>
</div>
<div class="tags">
  <h3>Parameters:</h3>
<ul class="param">
  
    <li>
      
        <span class='name'>literal</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../Literal.html" title="RDF::Literal (class)">RDF::Literal</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>
<h3>Returns:</h3>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../../String.html" title="String (class)">String</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>
<h3>Raises:</h3>
<ul class="raise">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../WriterError.html" title="RDF::WriterError (class)">RDF::WriterError</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


676
677
678
679
680
681
682
683
684
685
686
687
688</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'vendor/bundler/ruby/1.8/gems/rdf-rdfa-0.3.3/lib/rdf/rdfa/writer.rb', line 676</span>

<span class='kw'>def</span> <span class='id get_value'>get_value</span><span class='lparen'>(</span><span class='id literal'>literal</span><span class='rparen'>)</span>
  <span class='id raise'>raise</span> <span class='const'>RDF</span><span class='op'>::</span><span class='const'>WriterError</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Getting value for </span><span class='embexpr_beg'>#{</span><span class='id literal'>literal</span><span class='period'>.</span><span class='id inspect'>inspect</span><span class='rbrace'>}</span><span class='tstring_content'>, which must be a literal</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>unless</span> <span class='id literal'>literal</span><span class='period'>.</span><span class='id is_a?'>is_a?</span><span class='lparen'>(</span><span class='const'>RDF</span><span class='op'>::</span><span class='const'>Literal</span><span class='rparen'>)</span>
  <span class='kw'>case</span> <span class='id literal'>literal</span>
  <span class='kw'>when</span> <span class='const'>RDF</span><span class='op'>::</span><span class='const'>Literal</span><span class='op'>::</span><span class='const'>Date</span>
    <span class='id literal'>literal</span><span class='period'>.</span><span class='id object'>object</span><span class='period'>.</span><span class='id strftime'>strftime</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>%A, %d %B %Y</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
  <span class='kw'>when</span> <span class='const'>RDF</span><span class='op'>::</span><span class='const'>Literal</span><span class='op'>::</span><span class='const'>Time</span>
    <span class='id literal'>literal</span><span class='period'>.</span><span class='id object'>object</span><span class='period'>.</span><span class='id strftime'>strftime</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>%H:%M:%S %Z</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id sub'>sub</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>\+00:00</span><span class='regexp_end'>/</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>UTC</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
  <span class='kw'>when</span> <span class='const'>RDF</span><span class='op'>::</span><span class='const'>Literal</span><span class='op'>::</span><span class='const'>DateTime</span>
    <span class='id literal'>literal</span><span class='period'>.</span><span class='id object'>object</span><span class='period'>.</span><span class='id strftime'>strftime</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>%H:%M:%S %Z on %A, %d %B %Y</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id sub'>sub</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>\+00:00</span><span class='regexp_end'>/</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>UTC</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
  <span class='kw'>else</span>
    <span class='id literal'>literal</span><span class='period'>.</span><span class='id to_s'>to_s</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="haml_template-instance_method">
  
    - (<tt>Hash&lt;<span class='object_link'><a href="../../Symbol.html" title="Symbol (class)">Symbol</a></span> =&gt; <span class='object_link'><a href="../../String.html" title="String (class)">String</a></span>&gt;</tt>) <strong>haml_template</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  <h3>Returns:</h3>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Hash&lt;<span class='object_link'><a href="../../Symbol.html" title="Symbol (class)">Symbol</a></span> =&gt; <span class='object_link'><a href="../../String.html" title="String (class)">String</a></span>&gt;</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


138
139
140
141
142
143
144</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'vendor/bundler/ruby/1.8/gems/rdf-rdfa-0.3.3/lib/rdf/rdfa/writer.rb', line 138</span>

<span class='kw'>def</span> <span class='id haml_template'>haml_template</span>
  <span class='kw'>case</span> <span class='ivar'>@options</span><span class='lbracket'>[</span><span class='symbol'>:haml</span><span class='rbracket'>]</span>
  <span class='kw'>when</span> <span class='const'>Symbol</span><span class='comma'>,</span> <span class='const'>String</span>   <span class='kw'>then</span> <span class='const'>HAML_TEMPLATES</span><span class='period'>.</span><span class='id fetch'>fetch</span><span class='lparen'>(</span><span class='ivar'>@options</span><span class='lbracket'>[</span><span class='symbol'>:haml</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id to_sym'>to_sym</span><span class='comma'>,</span> <span class='const'>DEFAULT_HAML</span><span class='rparen'>)</span>
  <span class='kw'>when</span> <span class='const'>Hash</span>             <span class='kw'>then</span> <span class='ivar'>@options</span><span class='lbracket'>[</span><span class='symbol'>:haml</span><span class='rbracket'>]</span>
  <span class='kw'>else</span>                       <span class='const'>DEFAULT_HAML</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="order_properties-instance_method">
  
    - (<tt><span class='object_link'><a href="../../Array.html" title="Array (class)">Array</a></span>&lt;<span class='object_link'><a href="../../String.html" title="String (class)">String</a></span>&gt;</tt>) <strong>order_properties</strong>(properties)  <span class="extras">(protected)</span>
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>Take a hash from predicate uris to lists of values.
Sort the lists of values.  Return a sorted list of properties.</p>

  </div>
</div>
<div class="tags">
  <h3>Parameters:</h3>
<ul class="param">
  
    <li>
      
        <span class='name'>properties</span>
      
      
        <span class='type'>(<tt>Hash{<span class='object_link'><a href="../../String.html" title="String (class)">String</a></span> =&gt; <span class='object_link'><a href="../../Array.html" title="Array (class)">Array</a></span>&lt;<span class='object_link'><a href="../Resource.html" title="RDF::Resource (module)">Resource</a></span>&gt;}</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>A hash of Property to Resource mappings</p></div>
      
    </li>
  
</ul>
<h3>Returns:</h3>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../../Array.html" title="Array (class)">Array</a></span>&lt;<span class='object_link'><a href="../../String.html" title="String (class)">String</a></span>&gt;</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>] Ordered list of properties. Uses predicate_order.</p></div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


506
507
508
509
510
511
512
513
514
515
516
517
518
519
520
521
522
523
524
525
526
527
528
529
530
531
532</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'vendor/bundler/ruby/1.8/gems/rdf-rdfa-0.3.3/lib/rdf/rdfa/writer.rb', line 506</span>

<span class='kw'>def</span> <span class='id order_properties'>order_properties</span><span class='lparen'>(</span><span class='id properties'>properties</span><span class='rparen'>)</span>
  <span class='id properties'>properties</span><span class='period'>.</span><span class='id keys'>keys</span><span class='period'>.</span><span class='id each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id k'>k</span><span class='op'>|</span>
    <span class='id properties'>properties</span><span class='lbracket'>[</span><span class='id k'>k</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id properties'>properties</span><span class='lbracket'>[</span><span class='id k'>k</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id sort'>sort</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id a'>a</span><span class='comma'>,</span> <span class='id b'>b</span><span class='op'>|</span>
      <span class='id a_li'>a_li</span> <span class='op'>=</span> <span class='id a'>a</span><span class='period'>.</span><span class='id is_a?'>is_a?</span><span class='lparen'>(</span><span class='const'>RDF</span><span class='op'>::</span><span class='const'>URI</span><span class='rparen'>)</span> <span class='op'>&amp;&amp;</span> <span class='id get_curie'>get_curie</span><span class='lparen'>(</span><span class='id a'>a</span><span class='rparen'>)</span> <span class='op'>&amp;&amp;</span> <span class='id get_curie'>get_curie</span><span class='lparen'>(</span><span class='id a'>a</span><span class='rparen'>)</span><span class='period'>.</span><span class='id to_s'>to_s</span> <span class='op'>=~</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>:_\d+$</span><span class='regexp_end'>/</span></span> <span class='op'>?</span> <span class='id a'>a</span><span class='period'>.</span><span class='id to_i'>to_i</span> <span class='op'>:</span> <span class='id a'>a</span><span class='period'>.</span><span class='id to_s'>to_s</span>
      <span class='id b_li'>b_li</span> <span class='op'>=</span> <span class='id b'>b</span><span class='period'>.</span><span class='id is_a?'>is_a?</span><span class='lparen'>(</span><span class='const'>RDF</span><span class='op'>::</span><span class='const'>URI</span><span class='rparen'>)</span> <span class='op'>&amp;&amp;</span> <span class='id get_curie'>get_curie</span><span class='lparen'>(</span><span class='id b'>b</span><span class='rparen'>)</span> <span class='op'>&amp;&amp;</span> <span class='id get_curie'>get_curie</span><span class='lparen'>(</span><span class='id b'>b</span><span class='rparen'>)</span><span class='period'>.</span><span class='id to_s'>to_s</span> <span class='op'>=~</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>:_\d+$</span><span class='regexp_end'>/</span></span> <span class='op'>?</span> <span class='id b'>b</span><span class='period'>.</span><span class='id to_i'>to_i</span> <span class='op'>:</span> <span class='id b'>b</span><span class='period'>.</span><span class='id to_s'>to_s</span>
      
      <span class='id a_li'>a_li</span> <span class='op'>&lt;=&gt;</span> <span class='id b_li'>b_li</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
  
  <span class='comment'># Make sorted list of properties
</span>  <span class='id prop_list'>prop_list</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
  
  <span class='id predicate_order'>predicate_order</span><span class='period'>.</span><span class='id each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id prop'>prop</span><span class='op'>|</span>
    <span class='kw'>next</span> <span class='kw'>unless</span> <span class='id properties'>properties</span><span class='lbracket'>[</span><span class='id prop'>prop</span><span class='rbracket'>]</span>
    <span class='id prop_list'>prop_list</span> <span class='op'>&lt;&lt;</span> <span class='id prop'>prop</span><span class='period'>.</span><span class='id to_s'>to_s</span>
  <span class='kw'>end</span>
  
  <span class='id properties'>properties</span><span class='period'>.</span><span class='id keys'>keys</span><span class='period'>.</span><span class='id sort'>sort</span><span class='period'>.</span><span class='id each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id prop'>prop</span><span class='op'>|</span>
    <span class='id prop'>prop</span> <span class='op'>=</span> <span class='id prop'>prop</span> <span class='op'>=~</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>^_:(.*)$</span><span class='regexp_end'>/</span></span> <span class='op'>?</span> <span class='const'>RDF</span><span class='op'>::</span><span class='const'>Node</span><span class='period'>.</span><span class='id intern'>intern</span><span class='lparen'>(</span><span class='backref'>$1</span><span class='rparen'>)</span> <span class='op'>:</span> <span class='const'>RDF</span><span class='op'>::</span><span class='const'>URI</span><span class='period'>.</span><span class='id intern'>intern</span><span class='lparen'>(</span><span class='id prop'>prop</span><span class='rparen'>)</span>
    <span class='kw'>next</span> <span class='kw'>if</span> <span class='id prop_list'>prop_list</span><span class='period'>.</span><span class='id include?'>include?</span><span class='lparen'>(</span><span class='id prop'>prop</span><span class='rparen'>)</span>
    <span class='id prop_list'>prop_list</span> <span class='op'>&lt;&lt;</span> <span class='id prop'>prop</span>
  <span class='kw'>end</span>
  
  <span class='id add_debug'>add_debug</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>order_properties: </span><span class='embexpr_beg'>#{</span><span class='id prop_list'>prop_list</span><span class='period'>.</span><span class='id inspect'>inspect</span><span class='rbrace'>}</span><span class='tstring_end'>&quot;</span></span>
  <span class='id prop_list'>prop_list</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="order_subjects-instance_method">
  
    - (<tt><span class='object_link'><a href="../../Array.html" title="Array (class)">Array</a></span>&lt;<span class='object_link'><a href="../Resource.html" title="RDF::Resource (module)">Resource</a></span>&gt;</tt>) <strong>order_subjects</strong>  <span class="extras">(protected)</span>
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>Order subjects for output. Override this to output subjects in another order.</p>

<p>Uses #top<em>classes and #base</em>uri.</p>

  </div>
</div>
<div class="tags">
  <h3>Returns:</h3>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../../Array.html" title="Array (class)">Array</a></span>&lt;<span class='object_link'><a href="../Resource.html" title="RDF::Resource (module)">Resource</a></span>&gt;</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Ordered list of subjects</p></div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


471
472
473
474
475
476
477
478
479
480
481
482
483
484
485
486
487
488
489
490
491
492
493
494
495
496
497
498
499</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'vendor/bundler/ruby/1.8/gems/rdf-rdfa-0.3.3/lib/rdf/rdfa/writer.rb', line 471</span>

<span class='kw'>def</span> <span class='id order_subjects'>order_subjects</span>
  <span class='id seen'>seen</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
  <span class='id subjects'>subjects</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
  
  <span class='comment'># Start with base_uri
</span>  <span class='kw'>if</span> <span class='id base_uri'>base_uri</span> <span class='op'>&amp;&amp;</span> <span class='ivar'>@subjects</span><span class='period'>.</span><span class='id keys'>keys</span><span class='period'>.</span><span class='id include?'>include?</span><span class='lparen'>(</span><span class='id base_uri'>base_uri</span><span class='rparen'>)</span>
    <span class='id subjects'>subjects</span> <span class='op'>&lt;&lt;</span> <span class='id base_uri'>base_uri</span>
    <span class='id seen'>seen</span><span class='lbracket'>[</span><span class='id base_uri'>base_uri</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='kw'>true</span>
  <span class='kw'>end</span>
  
  <span class='comment'># Add distinguished classes
</span>  <span class='id top_classes'>top_classes</span><span class='period'>.</span>
  <span class='id select'>select</span> <span class='lbrace'>{</span><span class='op'>|</span><span class='id s'>s</span><span class='op'>|</span> <span class='op'>!</span><span class='id seen'>seen</span><span class='period'>.</span><span class='id include?'>include?</span><span class='lparen'>(</span><span class='id s'>s</span><span class='rparen'>)</span><span class='rbrace'>}</span><span class='period'>.</span>
    <span class='id each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id class_uri'>class_uri</span><span class='op'>|</span>
    <span class='id graph'>graph</span><span class='period'>.</span><span class='id query'>query</span><span class='lparen'>(</span><span class='symbol'>:predicate</span> <span class='op'>=&gt;</span> <span class='const'>RDF</span><span class='period'>.</span><span class='id type'>type</span><span class='comma'>,</span> <span class='symbol'>:object</span> <span class='op'>=&gt;</span> <span class='id class_uri'>class_uri</span><span class='rparen'>)</span><span class='period'>.</span><span class='id map'>map</span> <span class='lbrace'>{</span><span class='op'>|</span><span class='id st'>st</span><span class='op'>|</span> <span class='id st'>st</span><span class='period'>.</span><span class='id subject'>subject</span><span class='rbrace'>}</span><span class='period'>.</span><span class='id sort'>sort</span><span class='period'>.</span><span class='id uniq'>uniq</span><span class='period'>.</span><span class='id each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id subject'>subject</span><span class='op'>|</span>
      <span class='comment'>#add_debug &quot;order_subjects: #{subject.inspect}&quot;
</span>      <span class='id subjects'>subjects</span> <span class='op'>&lt;&lt;</span> <span class='id subject'>subject</span>
      <span class='id seen'>seen</span><span class='lbracket'>[</span><span class='id subject'>subject</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='kw'>true</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
  
  <span class='comment'># Sort subjects by resources over nodes, ref_counts and the subject URI itself
</span>  <span class='id recursable'>recursable</span> <span class='op'>=</span> <span class='ivar'>@subjects</span><span class='period'>.</span><span class='id keys'>keys</span><span class='period'>.</span>
    <span class='id select'>select</span> <span class='lbrace'>{</span><span class='op'>|</span><span class='id s'>s</span><span class='op'>|</span> <span class='op'>!</span><span class='id seen'>seen</span><span class='period'>.</span><span class='id include?'>include?</span><span class='lparen'>(</span><span class='id s'>s</span><span class='rparen'>)</span><span class='rbrace'>}</span><span class='period'>.</span>
    <span class='id map'>map</span> <span class='lbrace'>{</span><span class='op'>|</span><span class='id r'>r</span><span class='op'>|</span> <span class='lbracket'>[</span><span class='id r'>r</span><span class='period'>.</span><span class='id is_a?'>is_a?</span><span class='lparen'>(</span><span class='const'>RDF</span><span class='op'>::</span><span class='const'>Node</span><span class='rparen'>)</span> <span class='op'>?</span> <span class='int'>1</span> <span class='op'>:</span> <span class='int'>0</span><span class='comma'>,</span> <span class='id ref_count'>ref_count</span><span class='lparen'>(</span><span class='id r'>r</span><span class='rparen'>)</span><span class='comma'>,</span> <span class='id r'>r</span><span class='rbracket'>]</span><span class='rbrace'>}</span><span class='period'>.</span>
    <span class='id sort'>sort</span>
  
  <span class='id subjects'>subjects</span> <span class='op'>+=</span> <span class='id recursable'>recursable</span><span class='period'>.</span><span class='id map'>map</span><span class='lbrace'>{</span><span class='op'>|</span><span class='id r'>r</span><span class='op'>|</span> <span class='id r'>r</span><span class='period'>.</span><span class='id last'>last</span><span class='rbrace'>}</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="predicate-instance_method">
  
    - (<tt><span class='object_link'><a href="../../String.html" title="String (class)">String</a></span></tt>) <strong>predicate</strong>(predicate, objects)  <span class="extras">(protected)</span>
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>Write a predicate with one or more values.</p>

<p>Values may be a combination of Literal and Resource (Node or URI).</p>

  </div>
</div>
<div class="tags">
  <h3>Parameters:</h3>
<ul class="param">
  
    <li>
      
        <span class='name'>predicate</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../Resource.html" title="RDF::Resource (module)">RDF::Resource</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Predicate to serialize</p></div>
      
    </li>
  
    <li>
      
        <span class='name'>objects</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../../Array.html" title="Array (class)">Array</a></span>&lt;<span class='object_link'><a href="../Resource.html" title="RDF::Resource (module)">RDF::Resource</a></span>&gt;</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Objects to serialize</p></div>
      
    </li>
  
</ul>
<h3>Returns:</h3>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../../String.html" title="String (class)">String</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


623
624
625
626
627
628
629
630
631
632
633
634
635
636</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'vendor/bundler/ruby/1.8/gems/rdf-rdfa-0.3.3/lib/rdf/rdfa/writer.rb', line 623</span>

<span class='kw'>def</span> <span class='id predicate'>predicate</span><span class='lparen'>(</span><span class='id predicate'>predicate</span><span class='comma'>,</span> <span class='id objects'>objects</span><span class='rparen'>)</span>
  <span class='id add_debug'>add_debug</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>predicate: </span><span class='embexpr_beg'>#{</span><span class='id predicate'>predicate</span><span class='period'>.</span><span class='id inspect'>inspect</span><span class='rbrace'>}</span><span class='tstring_content'>, objects: </span><span class='embexpr_beg'>#{</span><span class='id objects'>objects</span><span class='rbrace'>}</span><span class='tstring_end'>&quot;</span></span>
  
  <span class='kw'>return</span> <span class='kw'>if</span> <span class='id objects'>objects</span><span class='period'>.</span><span class='id to_a'>to_a</span><span class='period'>.</span><span class='id empty?'>empty?</span>
  
  <span class='id add_debug'>add_debug</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>predicate: </span><span class='embexpr_beg'>#{</span><span class='id get_curie'>get_curie</span><span class='lparen'>(</span><span class='id predicate'>predicate</span><span class='rparen'>)</span><span class='rbrace'>}</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
  <span class='id property'>property</span> <span class='op'>=</span> <span class='id predicate'>predicate</span> <span class='kw'>if</span> <span class='id objects'>objects</span><span class='period'>.</span><span class='id any?'>any?</span><span class='lparen'>(</span><span class='op'>&amp;</span><span class='symbol'>:literal?</span><span class='rparen'>)</span>
  <span class='id rel'>rel</span>      <span class='op'>=</span> <span class='id predicate'>predicate</span> <span class='kw'>if</span> <span class='id objects'>objects</span><span class='period'>.</span><span class='id any?'>any?</span><span class='lparen'>(</span><span class='op'>&amp;</span><span class='symbol'>:uri?</span><span class='rparen'>)</span> <span class='op'>||</span> <span class='id objects'>objects</span><span class='period'>.</span><span class='id any?'>any?</span><span class='lparen'>(</span><span class='op'>&amp;</span><span class='symbol'>:node?</span><span class='rparen'>)</span>
  <span class='id render_property'>render_property</span><span class='lparen'>(</span><span class='id predicate'>predicate</span><span class='comma'>,</span> <span class='id objects'>objects</span><span class='comma'>,</span> <span class='id property'>property</span><span class='comma'>,</span> <span class='id rel'>rel</span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id o'>o</span><span class='op'>|</span>
    <span class='comment'># Yields each object, for potential recursive definition.
</span>    <span class='comment'># If nil is returned, a leaf is produced
</span>    <span class='id depth'>depth</span> <span class='lbrace'>{</span><span class='id subject'>subject</span><span class='lparen'>(</span><span class='id o'>o</span><span class='comma'>,</span> <span class='symbol'>:rel</span> <span class='op'>=&gt;</span> <span class='id rel'>rel</span><span class='comma'>,</span> <span class='symbol'>:element</span> <span class='op'>=&gt;</span> <span class='lparen'>(</span><span class='symbol'>:li</span> <span class='kw'>if</span> <span class='id objects'>objects</span><span class='period'>.</span><span class='id length'>length</span> <span class='op'>&gt;</span> <span class='int'>1</span><span class='rparen'>)</span><span class='rparen'>)</span><span class='rbrace'>}</span> <span class='kw'>if</span> <span class='op'>!</span><span class='id is_done?'>is_done?</span><span class='lparen'>(</span><span class='id o'>o</span><span class='rparen'>)</span> <span class='op'>&amp;&amp;</span> <span class='ivar'>@subjects</span><span class='period'>.</span><span class='id include?'>include?</span><span class='lparen'>(</span><span class='id o'>o</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="preprocess-instance_method">
  
    - (<tt>ignored</tt>) <strong>preprocess</strong>  <span class="extras">(protected)</span>
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>Perform any preprocessing of statements required</p>

  </div>
</div>
<div class="tags">
  <h3>Returns:</h3>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>ignored</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


440
441
442
443
444
445
446
447
448
449
450
451
452
453
454
455
456
457
458
459
460
461
462
463
464
465</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'vendor/bundler/ruby/1.8/gems/rdf-rdfa-0.3.3/lib/rdf/rdfa/writer.rb', line 440</span>

<span class='kw'>def</span> <span class='id preprocess'>preprocess</span>
  <span class='comment'># Load profiles
</span>  <span class='comment'># Add terms and prefixes to local store for converting URIs
</span>  <span class='comment'># Keep track of vocabulary from left-most profile
</span>  <span class='lbracket'>[</span><span class='ivar'>@options</span><span class='lbracket'>[</span><span class='symbol'>:profiles</span><span class='rbracket'>]</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id flatten'>flatten</span><span class='period'>.</span><span class='id compact'>compact</span><span class='period'>.</span><span class='id reverse'>reverse</span><span class='period'>.</span><span class='id each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id uri'>uri</span><span class='op'>|</span>
    <span class='id prof'>prof</span> <span class='op'>=</span> <span class='const'>Profile</span><span class='period'>.</span><span class='id find'>find</span><span class='lparen'>(</span><span class='id uri'>uri</span><span class='rparen'>)</span>
    <span class='id prof'>prof</span><span class='period'>.</span><span class='id prefixes'>prefixes</span><span class='period'>.</span><span class='id each_pair'>each_pair</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id k'>k</span><span class='comma'>,</span> <span class='id v'>v</span><span class='op'>|</span>
      <span class='ivar'>@uri_to_prefix</span><span class='lbracket'>[</span><span class='id v'>v</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id k'>k</span>
    <span class='kw'>end</span>
    
    <span class='id prof'>prof</span><span class='period'>.</span><span class='id terms'>terms</span><span class='period'>.</span><span class='id each_pair'>each_pair</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id k'>k</span><span class='comma'>,</span> <span class='id v'>v</span><span class='op'>|</span>
      <span class='ivar'>@uri_to_term_or_curie</span><span class='lbracket'>[</span><span class='id v'>v</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='const'>RDF</span><span class='op'>::</span><span class='const'>URI</span><span class='period'>.</span><span class='id intern'>intern</span><span class='lparen'>(</span><span class='id k'>k</span><span class='rparen'>)</span>
    <span class='kw'>end</span>
    
    <span class='ivar'>@vocabulary</span> <span class='op'>=</span> <span class='id prof'>prof</span><span class='period'>.</span><span class='id vocabulary'>vocabulary</span><span class='period'>.</span><span class='id to_s'>to_s</span>
  <span class='kw'>end</span>
  
  <span class='comment'># Load defined prefixes
</span>  <span class='lparen'>(</span><span class='ivar'>@options</span><span class='lbracket'>[</span><span class='symbol'>:prefixes</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span><span class='period'>.</span><span class='id each_pair'>each_pair</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id k'>k</span><span class='comma'>,</span> <span class='id v'>v</span><span class='op'>|</span>
    <span class='ivar'>@uri_to_prefix</span><span class='lbracket'>[</span><span class='id v'>v</span><span class='period'>.</span><span class='id to_s'>to_s</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id k'>k</span>
  <span class='kw'>end</span>
  <span class='ivar'>@options</span><span class='lbracket'>[</span><span class='symbol'>:prefixes</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>  <span class='comment'># Will define actual used when matched
</span>  
  <span class='comment'># Process each statement to establish CURIEs and Terms
</span>  <span class='ivar'>@graph</span><span class='period'>.</span><span class='id each'>each</span> <span class='lbrace'>{</span><span class='op'>|</span><span class='id statement'>statement</span><span class='op'>|</span> <span class='id preprocess_statement'>preprocess_statement</span><span class='lparen'>(</span><span class='id statement'>statement</span><span class='rparen'>)</span><span class='rbrace'>}</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="preprocess_statement-instance_method">
  
    - (<tt>ignored</tt>) <strong>preprocess_statement</strong>(statement)  <span class="extras">(protected)</span>
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>Perform any statement preprocessing required. This is used to perform reference counts and determine required
prefixes.</p>

  </div>
</div>
<div class="tags">
  <h3>Parameters:</h3>
<ul class="param">
  
    <li>
      
        <span class='name'>statement</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../Statement.html" title="RDF::Statement (class)">RDF::Statement</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>
<h3>Returns:</h3>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>ignored</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


538
539
540
541
542
543
544
545
546
547</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'vendor/bundler/ruby/1.8/gems/rdf-rdfa-0.3.3/lib/rdf/rdfa/writer.rb', line 538</span>

<span class='kw'>def</span> <span class='id preprocess_statement'>preprocess_statement</span><span class='lparen'>(</span><span class='id statement'>statement</span><span class='rparen'>)</span>
  <span class='comment'>#add_debug &quot;preprocess: #{statement.inspect}&quot;
</span>  <span class='id references'>references</span> <span class='op'>=</span> <span class='id ref_count'>ref_count</span><span class='lparen'>(</span><span class='id statement'>statement</span><span class='period'>.</span><span class='id object'>object</span><span class='rparen'>)</span> <span class='op'>+</span> <span class='int'>1</span>
  <span class='ivar'>@references</span><span class='lbracket'>[</span><span class='id statement'>statement</span><span class='period'>.</span><span class='id object'>object</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id references'>references</span>
  <span class='ivar'>@subjects</span><span class='lbracket'>[</span><span class='id statement'>statement</span><span class='period'>.</span><span class='id subject'>subject</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='kw'>true</span>
  <span class='id get_curie'>get_curie</span><span class='lparen'>(</span><span class='id statement'>statement</span><span class='period'>.</span><span class='id subject'>subject</span><span class='rparen'>)</span>
  <span class='id get_curie'>get_curie</span><span class='lparen'>(</span><span class='id statement'>statement</span><span class='period'>.</span><span class='id predicate'>predicate</span><span class='rparen'>)</span>
  <span class='id get_curie'>get_curie</span><span class='lparen'>(</span><span class='id statement'>statement</span><span class='period'>.</span><span class='id object'>object</span><span class='rparen'>)</span>
  <span class='id get_curie'>get_curie</span><span class='lparen'>(</span><span class='id statement'>statement</span><span class='period'>.</span><span class='id object'>object</span><span class='period'>.</span><span class='id datatype'>datatype</span><span class='rparen'>)</span> <span class='kw'>if</span> <span class='id statement'>statement</span><span class='period'>.</span><span class='id object'>object</span><span class='period'>.</span><span class='id literal?'>literal?</span> <span class='op'>&amp;&amp;</span> <span class='id statement'>statement</span><span class='period'>.</span><span class='id object'>object</span><span class='period'>.</span><span class='id has_datatype?'>has_datatype?</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="profile_repository-instance_method">
  
    - (<tt><span class='object_link'><a href="../Repository.html" title="RDF::Repository (class)">RDF::Repository</a></span></tt>) <strong>profile_repository</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  <h3>Returns:</h3>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../Repository.html" title="RDF::Repository (class)">RDF::Repository</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


147
148
149</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'vendor/bundler/ruby/1.8/gems/rdf-rdfa-0.3.3/lib/rdf/rdfa/writer.rb', line 147</span>

<span class='kw'>def</span> <span class='id profile_repository'>profile_repository</span>
  <span class='const'>Profile</span><span class='period'>.</span><span class='id repository'>repository</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="profile_repository=-instance_method">
  
    - (<tt><span class='object_link'><a href="../Repository.html" title="RDF::Repository (class)">RDF::Repository</a></span></tt>) <strong>profile_repository=</strong>(repo) 
  

  
</p><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  <h3>Parameters:</h3>
<ul class="param">
  
    <li>
      
        <span class='name'>repo</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../Repository.html" title="RDF::Repository (class)">RDF::Repository</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>
<h3>Returns:</h3>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../Repository.html" title="RDF::Repository (class)">RDF::Repository</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


153
154
155</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'vendor/bundler/ruby/1.8/gems/rdf-rdfa-0.3.3/lib/rdf/rdfa/writer.rb', line 153</span>

<span class='kw'>def</span> <span class='id profile_repository='>profile_repository=</span><span class='lparen'>(</span><span class='id repo'>repo</span><span class='rparen'>)</span>
  <span class='const'>Profile</span><span class='period'>.</span><span class='id repository'>repository</span> <span class='op'>=</span> <span class='id repo'>repo</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="render_document-instance_method">
  
    - (<tt><span class='object_link'><a href="../../Object.html" title="Object (class)">Object</a></span></tt>) <strong>render_document</strong>(subjects, options = {}) {|subject| ... } <span class="extras">(protected)</span>
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>Render document using haml_template[:doc].
Yields each subject to be rendered separately.</p>

<p>The default Haml template is:</p>

<pre class="code">!!! XML
!!! 5
%html{:xmlns =&gt; &quot;http://www.w3.org/1999/xhtml&quot;, :lang =&gt; lang, :profile =&gt; profile, :prefix =&gt; prefix}
  - if base || title
    %head
      - if base
        %base{:href =&gt; base}
      - if title
        %title= title
  %body
    - subjects.each do |subject|
      != yield(subject)
</pre>

  </div>
</div>
<div class="tags">
  <h3>Parameters:</h3>
<ul class="param">
  
    <li>
      
        <span class='name'>subjects</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../../Array.html" title="Array (class)">Array</a></span>&lt;<span class='object_link'><a href="../Resource.html" title="RDF::Resource (module)">RDF::Resource</a></span>&gt;</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Ordered list of subjects. Template must yield to each subject, which returns
the serialization of that subject (@see subject_template)</p></div>
      
    </li>
  
    <li>
      
        <span class='name'>options</span>
      
      
        <span class='type'>(<tt>Hash{<span class='object_link'><a href="../../Symbol.html" title="Symbol (class)">Symbol</a></span> =&gt; <span class='object_link'><a href="../../Object.html" title="Object (class)">Object</a></span>}</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>{}</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>Rendering options passed to Haml render.</p></div>
      
    </li>
  
</ul>

  
    
    
    
    
    <h3>Options Hash (<tt>options</tt>):</h3>
    <ul class="option">
      
        <li>
          <span class="name">base</span>
          <span class="type">(<tt><span class='object_link'><a href="../URI.html" title="RDF::URI (class)">RDF::URI</a></span></tt>)</span>
          <span class="default">
            
              &mdash; default:
              <tt>nil</tt>
            
          </span>
          &mdash; <div class='inline'><p>Base URI added to document, used for shortening URIs within the document.</p></div>
        </tr>
      
        <li>
          <span class="name">language</span>
          <span class="type">(<tt><span class='object_link'><a href="../../Symbol.html" title="Symbol (class)">Symbol</a></span></tt>, <tt><span class='object_link'><a href="../../String.html" title="String (class)">String</a></span></tt>)</span>
          <span class="default">
            
              &mdash; default:
              <tt>nil</tt>
            
          </span>
          &mdash; <div class='inline'><p>Value of @lang attribute in document, also allows included literals to omit
an @lang attribute if it is equivalent to that of the document.</p></div>
        </tr>
      
        <li>
          <span class="name">title</span>
          <span class="type">(<tt><span class='object_link'><a href="../../String.html" title="String (class)">String</a></span></tt>)</span>
          <span class="default">
            
              &mdash; default:
              <tt>nil</tt>
            
          </span>
          &mdash; <div class='inline'><p>Value of html>head>title element.</p></div>
        </tr>
      
        <li>
          <span class="name">profile</span>
          <span class="type">(<tt><span class='object_link'><a href="../../String.html" title="String (class)">String</a></span></tt>)</span>
          <span class="default">
            
              &mdash; default:
              <tt>nil</tt>
            
          </span>
          &mdash; <div class='inline'><p>Value of @profile attribute.</p></div>
        </tr>
      
        <li>
          <span class="name">prefix</span>
          <span class="type">(<tt><span class='object_link'><a href="../../String.html" title="String (class)">String</a></span></tt>)</span>
          <span class="default">
            
              &mdash; default:
              <tt>nil</tt>
            
          </span>
          &mdash; <div class='inline'><p>Value of @prefix attribute.</p></div>
        </tr>
      
        <li>
          <span class="name">haml</span>
          <span class="type">(<tt><span class='object_link'><a href="../../String.html" title="String (class)">String</a></span></tt>)</span>
          <span class="default">
            
              &mdash; default:
              <tt>haml_template[:doc]</tt>
            
          </span>
          &mdash; <div class='inline'><p>Haml template to render.</p></div>
        </tr>
      
    </ul>
  
<h3>Yields:</h3>
<ul class="yield">
  
    <li>
      
      
        <span class='type'>(<tt>subject</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Yields each subject</p></div>
      
    </li>
  
</ul>
<h3>Yield Parameters:</h3>
<ul class="yieldparam">
  
    <li>
      
        <span class='name'>subject</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../URI.html" title="RDF::URI (class)">RDF::URI</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>
<h3>Yield Returns:</h3>
<ul class="yieldreturn">
  
    <li>
      
      
        <span class='type'>(<tt>:ignored</tt>)</span>
      
      
      
    </li>
  
</ul>
<h3>Returns:</h3>
<ul class="return">
  
    <li>
      
      
        <span class='type'></span>
      
      
      
        
        <div class='inline'><p>String
The rendered document is returned as a string</p></div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


274
275
276
277
278
279
280
281
282
283
284
285</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'vendor/bundler/ruby/1.8/gems/rdf-rdfa-0.3.3/lib/rdf/rdfa/writer.rb', line 274</span>

<span class='kw'>def</span> <span class='id render_document'>render_document</span><span class='lparen'>(</span><span class='id subjects'>subjects</span><span class='comma'>,</span> <span class='id options'>options</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='id template'>template</span> <span class='op'>=</span> <span class='id options'>options</span><span class='lbracket'>[</span><span class='symbol'>:haml</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='symbol'>:doc</span>
  <span class='id options'>options</span> <span class='op'>=</span> <span class='lbrace'>{</span>
    <span class='symbol'>:prefix</span> <span class='op'>=&gt;</span> <span class='kw'>nil</span><span class='comma'>,</span>
    <span class='symbol'>:profile</span> <span class='op'>=&gt;</span> <span class='kw'>nil</span><span class='comma'>,</span>
    <span class='symbol'>:subjects</span> <span class='op'>=&gt;</span> <span class='id subjects'>subjects</span><span class='comma'>,</span>
    <span class='symbol'>:title</span> <span class='op'>=&gt;</span> <span class='kw'>nil</span><span class='comma'>,</span>
  <span class='rbrace'>}</span><span class='period'>.</span><span class='id merge'>merge</span><span class='lparen'>(</span><span class='id options'>options</span><span class='rparen'>)</span>
  <span class='id hamlify'>hamlify</span><span class='lparen'>(</span><span class='id template'>template</span><span class='comma'>,</span> <span class='id options'>options</span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id subject'>subject</span><span class='op'>|</span>
    <span class='kw'>yield</span><span class='lparen'>(</span><span class='id subject'>subject</span><span class='rparen'>)</span> <span class='kw'>if</span> <span class='id block_given?'>block_given?</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="render_property-instance_method">
  
    - (<tt><span class='object_link'><a href="../../Object.html" title="Object (class)">Object</a></span></tt>) <strong>render_property</strong>(predicate, objects, property, rel, options = {}) {|object| ... } <span class="extras">(protected)</span>
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>Render a single- or multi-valued predicate using haml<em>template[:property</em>value] or haml<em>template[:property</em>values].
Yields each object for optional rendering. The block should only
render for recursive subject definitions (i.e., where the object
is also a subject and is rendered underneath the first referencing subject).</p>

<p>The default Haml template for a single-valued property is:</p>

<pre class="code">- object = objects.first
- if heading_predicates.include?(predicate) &amp;&amp; object.literal?
  %h1{:property =&gt; get_curie(predicate), :content =&gt; get_content(object), :lang =&gt; get_lang(object), :datatype =&gt; get_dt_curie(object)}&amp;= get_value(object)
- else
  %div.property
    %span.label
      = get_predicate_name(predicate)
    - if res = yield(object)
      != res
    - elsif object.node?
      %span{:resource =&gt; get_curie(object), :rel =&gt; get_curie(predicate)}= get_curie(object)
    - elsif object.uri?
      %a{:href =&gt; object.to_s, :rel =&gt; get_curie(predicate)}= object.to_s
    - elsif object.datatype == RDF.XMLLiteral
      %span{:property =&gt; get_curie(predicate), :lang =&gt; get_lang(object), :datatype =&gt; get_dt_curie(object)}&lt;!= get_value(object)
    - else
      %span{:property =&gt; get_curie(predicate), :content =&gt; get_content(object), :lang =&gt; get_lang(object), :datatype =&gt; get_dt_curie(object)}&amp;= get_value(object)
</pre>

<p>The default Haml template for a multi-valued property is:
  %div.property</p>

<pre class="code">%span.label
  = get_predicate_name(predicate)
%ul{:rel =&gt; (get_curie(rel) if rel), :property =&gt; (get_curie(property) if property)}
  - objects.each do |object|
    - if res = yield(object)
      != res
    - elsif object.node?
      %li{:resource =&gt; get_curie(object)}= get_curie(object)
    - elsif object.uri?
      %li
        %a{:href =&gt; object.to_s}= object.to_s
    - elsif object.datatype == RDF.XMLLiteral
      %li{:lang =&gt; get_lang(object), :datatype =&gt; get_curie(object.datatype)}&lt;!= get_value(object)
    - else
      %li{:content =&gt; get_content(object), :lang =&gt; get_lang(object), :datatype =&gt; get_dt_curie(object)}&amp;= get_value(object)
</pre>

  </div>
</div>
<div class="tags">
  <h3>Parameters:</h3>
<ul class="param">
  
    <li>
      
        <span class='name'>predicate</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../../Array.html" title="Array (class)">Array</a></span>&lt;<span class='object_link'><a href="../Resource.html" title="RDF::Resource (module)">RDF::Resource</a></span>&gt;</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Predicate to render.</p></div>
      
    </li>
  
    <li>
      
        <span class='name'>objects</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../../Array.html" title="Array (class)">Array</a></span>&lt;<span class='object_link'><a href="../Resource.html" title="RDF::Resource (module)">RDF::Resource</a></span>&gt;</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>List of objects to render.
If the list contains only a single element, the :property<em>value template will be used.
Otherwise, the :property</em>values template is used.</p></div>
      
    </li>
  
    <li>
      
        <span class='name'>property</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../Resource.html" title="RDF::Resource (module)">RDF::Resource</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Value of @property, which should only be defined for literal objects</p></div>
      
    </li>
  
    <li>
      
        <span class='name'>rel</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../Resource.html" title="RDF::Resource (module)">RDF::Resource</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Value of @rel, which should only be defined for Node or URI objects.</p></div>
      
    </li>
  
    <li>
      
        <span class='name'>options</span>
      
      
        <span class='type'>(<tt>Hash{<span class='object_link'><a href="../../Symbol.html" title="Symbol (class)">Symbol</a></span> =&gt; <span class='object_link'><a href="../../Object.html" title="Object (class)">Object</a></span>}</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>{}</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>Rendering options passed to Haml render.</p></div>
      
    </li>
  
</ul>

  
    
    
    
    
    
    
    
    
    
    
    <h3>Options Hash (<tt>options</tt>):</h3>
    <ul class="option">
      
        <li>
          <span class="name">haml</span>
          <span class="type">(<tt><span class='object_link'><a href="../../String.html" title="String (class)">String</a></span></tt>)</span>
          <span class="default">
            
              &mdash; default:
              <tt>haml_template[:property_value]</tt>, <tt>haml_template[:property_values]</tt>
            
          </span>
          &mdash; <div class='inline'><p>Haml template to render. Otherwise, uses haml<em>template[:property</em>value] or haml<em>template[:property</em>values]
depending on the cardinality of objects.</p></div>
        </tr>
      
    </ul>
  
<h3>Yields:</h3>
<ul class="yield">
  
    <li>
      
      
        <span class='type'>(<tt>object</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Yields object.</p></div>
      
    </li>
  
</ul>
<h3>Yield Parameters:</h3>
<ul class="yieldparam">
  
    <li>
      
        <span class='name'>object</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../Resource.html" title="RDF::Resource (module)">RDF::Resource</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>
<h3>Yield Returns:</h3>
<ul class="yieldreturn">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../../String.html" title="String (class)">String</a></span></tt>, <tt>nil</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>The block should only return a string for recursive object definitions.</p></div>
      
    </li>
  
</ul>
<h3>Returns:</h3>
<ul class="return">
  
    <li>
      
      
        <span class='type'></span>
      
      
      
        
        <div class='inline'><p>String
The rendered document is returned as a string</p></div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


425
426
427
428
429
430
431
432
433
434
435
436</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'vendor/bundler/ruby/1.8/gems/rdf-rdfa-0.3.3/lib/rdf/rdfa/writer.rb', line 425</span>

<span class='kw'>def</span> <span class='id render_property'>render_property</span><span class='lparen'>(</span><span class='id predicate'>predicate</span><span class='comma'>,</span> <span class='id objects'>objects</span><span class='comma'>,</span> <span class='id property'>property</span><span class='comma'>,</span> <span class='id rel'>rel</span><span class='comma'>,</span> <span class='id options'>options</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='id template'>template</span> <span class='op'>=</span> <span class='id options'>options</span><span class='lbracket'>[</span><span class='symbol'>:haml</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='lparen'>(</span><span class='id objects'>objects</span><span class='period'>.</span><span class='id to_a'>to_a</span><span class='period'>.</span><span class='id length'>length</span> <span class='op'>==</span> <span class='int'>1</span> <span class='op'>?</span> <span class='symbol'>:property_value</span> <span class='op'>:</span> <span class='symbol'>:property_values</span><span class='rparen'>)</span>
  <span class='id options'>options</span> <span class='op'>=</span> <span class='lbrace'>{</span>
    <span class='symbol'>:objects</span>    <span class='op'>=&gt;</span> <span class='id objects'>objects</span><span class='comma'>,</span>
    <span class='symbol'>:predicate</span>  <span class='op'>=&gt;</span> <span class='id predicate'>predicate</span><span class='comma'>,</span>
    <span class='symbol'>:property</span>   <span class='op'>=&gt;</span> <span class='id property'>property</span><span class='comma'>,</span>
    <span class='symbol'>:rel</span>        <span class='op'>=&gt;</span> <span class='id rel'>rel</span><span class='comma'>,</span>
  <span class='rbrace'>}</span><span class='period'>.</span><span class='id merge'>merge</span><span class='lparen'>(</span><span class='id options'>options</span><span class='rparen'>)</span>
  <span class='id hamlify'>hamlify</span><span class='lparen'>(</span><span class='id template'>template</span><span class='comma'>,</span> <span class='id options'>options</span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id object'>object</span><span class='op'>|</span>
    <span class='kw'>yield</span><span class='lparen'>(</span><span class='id object'>object</span><span class='rparen'>)</span> <span class='kw'>if</span> <span class='id block_given?'>block_given?</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="render_subject-instance_method">
  
    - (<tt><span class='object_link'><a href="../../Object.html" title="Object (class)">Object</a></span></tt>) <strong>render_subject</strong>(subject, predicates, options = {}) {|predicate| ... } <span class="extras">(protected)</span>
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>Render a subject using haml_template[:subject].</p>

<p>The <em>subject</em> template may be called either as a top-level element, or recursively under another element
if the <em>rel</em> local is not nil.</p>

<p>Yields each predicate/property to be rendered separately (@see render<em>property</em>value and
render<em>property</em>values).</p>

<p>The default Haml template is:</p>

<pre class="code">- if element == :li
  %li{:about =&gt; get_curie(subject), :typeof =&gt; typeof}
    - if typeof
      %span.type!= typeof
    - predicates.each do |predicate|
      != yield(predicate)
- elsif rel &amp;&amp; typeof
  %div{:rel =&gt; get_curie(rel)}
    %div{:about =&gt; get_curie(subject), :typeof =&gt; typeof}
      %span.type!= typeof
      - predicates.each do |predicate|
        != yield(predicate)
- elsif rel
  %div{:rel =&gt; get_curie(rel), :resource =&gt; get_curie(subject)}
    - predicates.each do |predicate|
      != yield(predicate)
- else
  %div{:about =&gt; get_curie(subject), :typeof =&gt; typeof}
    - if typeof
      %span.type!= typeof
    - predicates.each do |predicate|
      != yield(predicate)
</pre>

<p>Return Haml template for document from haml_template[:subject]</p>

  </div>
</div>
<div class="tags">
  <h3>Parameters:</h3>
<ul class="param">
  
    <li>
      
        <span class='name'>subject</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../../Array.html" title="Array (class)">Array</a></span>&lt;<span class='object_link'><a href="../Resource.html" title="RDF::Resource (module)">RDF::Resource</a></span>&gt;</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Subject to render</p></div>
      
    </li>
  
    <li>
      
        <span class='name'>predicates</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../../Array.html" title="Array (class)">Array</a></span>&lt;<span class='object_link'><a href="../Resource.html" title="RDF::Resource (module)">RDF::Resource</a></span>&gt;</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Predicates of subject. Each property is yielded for separate rendering.</p></div>
      
    </li>
  
    <li>
      
        <span class='name'>options</span>
      
      
        <span class='type'>(<tt>Hash{<span class='object_link'><a href="../../Symbol.html" title="Symbol (class)">Symbol</a></span> =&gt; <span class='object_link'><a href="../../Object.html" title="Object (class)">Object</a></span>}</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>{}</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>Rendering options passed to Haml render.</p></div>
      
    </li>
  
</ul>

  
    
    
    
    
    
    
    <h3>Options Hash (<tt>options</tt>):</h3>
    <ul class="option">
      
        <li>
          <span class="name">about</span>
          <span class="type">(<tt><span class='object_link'><a href="../../String.html" title="String (class)">String</a></span></tt>)</span>
          <span class="default">
            
              &mdash; default:
              <tt>nil</tt>
            
          </span>
          &mdash; <div class='inline'><p>About description, a CURIE, URI or Node definition.
May be nil if no @about is rendered (e.g. unreferenced Nodes)</p></div>
        </tr>
      
        <li>
          <span class="name">resource</span>
          <span class="type">(<tt><span class='object_link'><a href="../../String.html" title="String (class)">String</a></span></tt>)</span>
          <span class="default">
            
              &mdash; default:
              <tt>nil</tt>
            
          </span>
          &mdash; <div class='inline'><p>Resource description, a CURIE, URI or Node definition.
May be nil if no @resource is rendered</p></div>
        </tr>
      
        <li>
          <span class="name">rel</span>
          <span class="type">(<tt><span class='object_link'><a href="../../String.html" title="String (class)">String</a></span></tt>)</span>
          <span class="default">
            
              &mdash; default:
              <tt>nil</tt>
            
          </span>
          &mdash; <div class='inline'><p>Optional @rel property description, a CURIE, URI or Node definition.</p></div>
        </tr>
      
        <li>
          <span class="name">typeof</span>
          <span class="type">(<tt><span class='object_link'><a href="../../String.html" title="String (class)">String</a></span></tt>)</span>
          <span class="default">
            
              &mdash; default:
              <tt>nil</tt>
            
          </span>
          &mdash; <div class='inline'><p>RDF type as a CURIE, URI or Node definition.
If :about is nil, this defaults to the empty string ("").</p></div>
        </tr>
      
        <li>
          <span class="name">element</span>
          <span class="type">(<tt>:li</tt>, <tt>nil</tt>)</span>
          <span class="default">
            
              &mdash; default:
              <tt>nil</tt>
            
          </span>
          &mdash; <div class='inline'><p>Render with <li>, otherwise with template default.</p></div>
        </tr>
      
        <li>
          <span class="name">haml</span>
          <span class="type">(<tt><span class='object_link'><a href="../../String.html" title="String (class)">String</a></span></tt>)</span>
          <span class="default">
            
              &mdash; default:
              <tt>haml_template[:subject]</tt>
            
          </span>
          &mdash; <div class='inline'><p>Haml template to render.</p></div>
        </tr>
      
    </ul>
  
<h3>Yields:</h3>
<ul class="yield">
  
    <li>
      
      
        <span class='type'>(<tt>predicate</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Yields each predicate</p></div>
      
    </li>
  
</ul>
<h3>Yield Parameters:</h3>
<ul class="yieldparam">
  
    <li>
      
        <span class='name'>predicate</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../URI.html" title="RDF::URI (class)">RDF::URI</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>
<h3>Yield Returns:</h3>
<ul class="yieldreturn">
  
    <li>
      
      
        <span class='type'>(<tt>:ignored</tt>)</span>
      
      
      
    </li>
  
</ul>
<h3>Returns:</h3>
<ul class="return">
  
    <li>
      
      
        <span class='type'></span>
      
      
      
        
        <div class='inline'><p>String
The rendered document is returned as a string</p></div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


346
347
348
349
350
351
352
353
354
355
356
357
358
359
360</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'vendor/bundler/ruby/1.8/gems/rdf-rdfa-0.3.3/lib/rdf/rdfa/writer.rb', line 346</span>

<span class='kw'>def</span> <span class='id render_subject'>render_subject</span><span class='lparen'>(</span><span class='id subject'>subject</span><span class='comma'>,</span> <span class='id predicates'>predicates</span><span class='comma'>,</span> <span class='id options'>options</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='id template'>template</span> <span class='op'>=</span> <span class='id options'>options</span><span class='lbracket'>[</span><span class='symbol'>:haml</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='symbol'>:subject</span>
  <span class='id options'>options</span> <span class='op'>=</span> <span class='lbrace'>{</span>
    <span class='symbol'>:about</span>      <span class='op'>=&gt;</span> <span class='lparen'>(</span><span class='id get_curie'>get_curie</span><span class='lparen'>(</span><span class='id subject'>subject</span><span class='rparen'>)</span> <span class='kw'>unless</span> <span class='id options'>options</span><span class='lbracket'>[</span><span class='symbol'>:rel</span><span class='rbracket'>]</span><span class='rparen'>)</span><span class='comma'>,</span>
    <span class='symbol'>:element</span>    <span class='op'>=&gt;</span> <span class='kw'>nil</span><span class='comma'>,</span>
    <span class='symbol'>:predicates</span> <span class='op'>=&gt;</span> <span class='id predicates'>predicates</span><span class='comma'>,</span>
    <span class='symbol'>:rel</span>        <span class='op'>=&gt;</span> <span class='kw'>nil</span><span class='comma'>,</span>
    <span class='symbol'>:resource</span>   <span class='op'>=&gt;</span> <span class='lparen'>(</span><span class='id get_curie'>get_curie</span><span class='lparen'>(</span><span class='id subject'>subject</span><span class='rparen'>)</span> <span class='kw'>if</span> <span class='id options'>options</span><span class='lbracket'>[</span><span class='symbol'>:rel</span><span class='rbracket'>]</span><span class='rparen'>)</span><span class='comma'>,</span>
    <span class='symbol'>:subject</span>    <span class='op'>=&gt;</span> <span class='id subject'>subject</span><span class='comma'>,</span>
    <span class='symbol'>:typeof</span>     <span class='op'>=&gt;</span> <span class='kw'>nil</span><span class='comma'>,</span>
  <span class='rbrace'>}</span><span class='period'>.</span><span class='id merge'>merge</span><span class='lparen'>(</span><span class='id options'>options</span><span class='rparen'>)</span>
  <span class='id hamlify'>hamlify</span><span class='lparen'>(</span><span class='id template'>template</span><span class='comma'>,</span> <span class='id options'>options</span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id predicate'>predicate</span><span class='op'>|</span>
    <span class='kw'>yield</span><span class='lparen'>(</span><span class='id predicate'>predicate</span><span class='rparen'>)</span> <span class='kw'>if</span> <span class='id block_given?'>block_given?</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="reset-instance_method">
  
    - (<tt><span class='object_link'><a href="../../Object.html" title="Object (class)">Object</a></span></tt>) <strong>reset</strong>  <span class="extras">(protected)</span>
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>Reset parser to run again</p>

  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


550
551
552
553
554
555
556</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'vendor/bundler/ruby/1.8/gems/rdf-rdfa-0.3.3/lib/rdf/rdfa/writer.rb', line 550</span>

<span class='kw'>def</span> <span class='id reset'>reset</span>
  <span class='ivar'>@depth</span> <span class='op'>=</span> <span class='int'>0</span>
  <span class='id prefixes'>prefixes</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
  <span class='ivar'>@references</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
  <span class='ivar'>@serialized</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
  <span class='ivar'>@subjects</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="subject-instance_method">
  
    - (<tt>Nokogiri::XML::Element</tt>, <tt>{Namespace}</tt>) <strong>subject</strong>(subject, options = {})  <span class="extras">(protected)</span>
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>Display a subject.</p>

  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <h3>Examples:</h3>
    
      <h4><div class='inline'><p>Displays a subject as a Resource Definition:</p></div></h4>
      <pre class="example code">&lt;div typeof=&quot;rdfs:Resource&quot; about=&quot;http://example.com/resource&quot;&gt;
  &lt;h1 property=&quot;dc:title&quot;&gt;label&lt;/h1&gt;
  &lt;ul&gt;
    &lt;li content=&quot;2009-04-30T06:15:51Z&quot; property=&quot;dc:created&quot;&gt;2009-04-30T06:15:51+00:00&lt;/li&gt;
  &lt;/ul&gt;
&lt;/div&gt;</pre>
    
  </div>
<h3>Parameters:</h3>
<ul class="param">
  
    <li>
      
        <span class='name'>subject</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../Resource.html" title="RDF::Resource (module)">RDF::Resource</a></span></tt>)</span>
      
      
      
    </li>
  
    <li>
      
        <span class='name'>options</span>
      
      
        <span class='type'>(<tt>Hash{<span class='object_link'><a href="../../Symbol.html" title="Symbol (class)">Symbol</a></span> =&gt; <span class='object_link'><a href="../../Object.html" title="Object (class)">Object</a></span>}</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>{}</tt>)</em>
      
      
    </li>
  
</ul>

  
    
    
    
    
    <h3>Options Hash (<tt>options</tt>):</h3>
    <ul class="option">
      
        <li>
          <span class="name">:element(:div)</span>
          <span class="type">(<tt>:li</tt>, <tt>nil</tt>)</span>
          <span class="default">
            
          </span>
          &mdash; <div class='inline'><p>Serialize using <li> rather than template default element</p></div>
        </tr>
      
        <li>
          <span class="name">:rel</span>
          <span class="type">(<tt><span class='object_link'><a href="../Resource.html" title="RDF::Resource (module)">RDF::Resource</a></span></tt>)</span>
          <span class="default">
            
              &mdash; default:
              <tt>nil</tt>
            
          </span>
          &mdash; <div class='inline'><p>Optional @rel property</p></div>
        </tr>
      
    </ul>
  
<h3>Returns:</h3>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Nokogiri::XML::Element</tt>, <tt>{Namespace}</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


577
578
579
580
581
582
583
584
585
586
587
588
589
590
591
592
593
594
595
596
597
598
599
600
601
602
603
604
605
606
607
608
609
610
611
612
613</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'vendor/bundler/ruby/1.8/gems/rdf-rdfa-0.3.3/lib/rdf/rdfa/writer.rb', line 577</span>

<span class='kw'>def</span> <span class='id subject'>subject</span><span class='lparen'>(</span><span class='id subject'>subject</span><span class='comma'>,</span> <span class='id options'>options</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='kw'>return</span> <span class='kw'>if</span> <span class='id is_done?'>is_done?</span><span class='lparen'>(</span><span class='id subject'>subject</span><span class='rparen'>)</span>
  
  <span class='id subject_done'>subject_done</span><span class='lparen'>(</span><span class='id subject'>subject</span><span class='rparen'>)</span>
  
  <span class='id properties'>properties</span> <span class='op'>=</span> <span class='ivar'>@graph</span><span class='period'>.</span><span class='id properties'>properties</span><span class='lparen'>(</span><span class='id subject'>subject</span><span class='rparen'>)</span>
  <span class='id prop_list'>prop_list</span> <span class='op'>=</span> <span class='id order_properties'>order_properties</span><span class='lparen'>(</span><span class='id properties'>properties</span><span class='rparen'>)</span>
  
  <span class='comment'># Find appropriate template
</span>  <span class='id curie'>curie</span> <span class='op'>||=</span> <span class='kw'>case</span>
  <span class='kw'>when</span> <span class='id subject'>subject</span><span class='period'>.</span><span class='id node?'>node?</span>
    <span class='id subject'>subject</span><span class='period'>.</span><span class='id to_s'>to_s</span> <span class='kw'>if</span> <span class='id ref_count'>ref_count</span><span class='lparen'>(</span><span class='id subject'>subject</span><span class='rparen'>)</span> <span class='op'>&gt;=</span> <span class='lparen'>(</span><span class='ivar'>@depth</span> <span class='op'>==</span> <span class='int'>0</span> <span class='op'>?</span> <span class='int'>0</span> <span class='op'>:</span> <span class='int'>1</span><span class='rparen'>)</span>
  <span class='kw'>else</span>
    <span class='id get_curie'>get_curie</span><span class='lparen'>(</span><span class='id subject'>subject</span><span class='rparen'>)</span>
  <span class='kw'>end</span>

  <span class='id typeof'>typeof</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='id properties'>properties</span><span class='period'>.</span><span class='id delete'>delete</span><span class='lparen'>(</span><span class='const'>RDF</span><span class='period'>.</span><span class='id type'>type</span><span class='period'>.</span><span class='id to_s'>to_s</span><span class='rparen'>)</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id flatten'>flatten</span><span class='period'>.</span><span class='id compact'>compact</span><span class='period'>.</span><span class='id map'>map</span> <span class='lbrace'>{</span><span class='op'>|</span><span class='id r'>r</span><span class='op'>|</span> <span class='id get_curie'>get_curie</span><span class='lparen'>(</span><span class='id r'>r</span><span class='rparen'>)</span><span class='rbrace'>}</span><span class='period'>.</span><span class='id join'>join</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'> </span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
  <span class='id typeof'>typeof</span> <span class='op'>=</span> <span class='kw'>nil</span> <span class='kw'>if</span> <span class='id typeof'>typeof</span><span class='period'>.</span><span class='id empty?'>empty?</span>
  
  <span class='comment'># Nodes without a curie need a blank @typeof to generate a subject
</span>  <span class='id typeof'>typeof</span> <span class='op'>||=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>unless</span> <span class='id curie'>curie</span>
  <span class='id prop_list'>prop_list</span> <span class='op'>-=</span> <span class='lbracket'>[</span><span class='const'>RDF</span><span class='period'>.</span><span class='id type'>type</span><span class='period'>.</span><span class='id to_s'>to_s</span><span class='rbracket'>]</span>

  <span class='id add_debug'>add_debug</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>subject: </span><span class='embexpr_beg'>#{</span><span class='id curie'>curie</span><span class='period'>.</span><span class='id inspect'>inspect</span><span class='rbrace'>}</span><span class='tstring_content'>, typeof: </span><span class='embexpr_beg'>#{</span><span class='id typeof'>typeof</span><span class='period'>.</span><span class='id inspect'>inspect</span><span class='rbrace'>}</span><span class='tstring_content'>, props: </span><span class='embexpr_beg'>#{</span><span class='id prop_list'>prop_list</span><span class='period'>.</span><span class='id inspect'>inspect</span><span class='rbrace'>}</span><span class='tstring_end'>&quot;</span></span>

  <span class='comment'># Render this subject
</span>  <span class='comment'># If :rel is specified and :typeof is nil, use @resource instead of @about.
</span>  <span class='comment'># Pass other options from calling context
</span>  <span class='id render_opts'>render_opts</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='symbol'>:typeof</span> <span class='op'>=&gt;</span> <span class='id typeof'>typeof</span><span class='rbrace'>}</span><span class='period'>.</span><span class='id merge'>merge</span><span class='lparen'>(</span><span class='id options'>options</span><span class='rparen'>)</span>
  <span class='id render_subject'>render_subject</span><span class='lparen'>(</span><span class='id subject'>subject</span><span class='comma'>,</span> <span class='id prop_list'>prop_list</span><span class='comma'>,</span> <span class='id render_opts'>render_opts</span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id pred'>pred</span><span class='op'>|</span>
    <span class='id depth'>depth</span> <span class='kw'>do</span>
      <span class='id values'>values</span> <span class='op'>=</span> <span class='id properties'>properties</span><span class='lbracket'>[</span><span class='id pred'>pred</span><span class='period'>.</span><span class='id to_s'>to_s</span><span class='rbracket'>]</span>
      <span class='id add_debug'>add_debug</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>subject: </span><span class='embexpr_beg'>#{</span><span class='id get_curie'>get_curie</span><span class='lparen'>(</span><span class='id subject'>subject</span><span class='rparen'>)</span><span class='rbrace'>}</span><span class='tstring_content'>, pred: </span><span class='embexpr_beg'>#{</span><span class='id get_curie'>get_curie</span><span class='lparen'>(</span><span class='id pred'>pred</span><span class='rparen'>)</span><span class='rbrace'>}</span><span class='tstring_content'>, values: </span><span class='embexpr_beg'>#{</span><span class='id values'>values</span><span class='period'>.</span><span class='id inspect'>inspect</span><span class='rbrace'>}</span><span class='tstring_end'>&quot;</span></span>
      <span class='id predicate'>predicate</span><span class='lparen'>(</span><span class='id pred'>pred</span><span class='comma'>,</span> <span class='id values'>values</span><span class='rparen'>)</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="write_epilogue-instance_method">
  
    - <strong>write_epilogue</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p class="note returns_void">This method returns an undefined value.</p><p>Outputs the XHTML+RDFa representation of all stored triples.</p>

  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


190
191
192
193
194
195
196
197
198
199
200
201
202
203
204
205
206
207
208
209
210
211
212
213
214
215
216
217
218
219
220
221
222
223
224
225
226
227
228
229
230</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'vendor/bundler/ruby/1.8/gems/rdf-rdfa-0.3.3/lib/rdf/rdfa/writer.rb', line 190</span>

<span class='kw'>def</span> <span class='id write_epilogue'>write_epilogue</span>
  <span class='ivar'>@base_uri</span> <span class='op'>=</span> <span class='const'>RDF</span><span class='op'>::</span><span class='const'>URI</span><span class='lparen'>(</span><span class='ivar'>@options</span><span class='lbracket'>[</span><span class='symbol'>:base_uri</span><span class='rbracket'>]</span><span class='rparen'>)</span> <span class='kw'>if</span> <span class='ivar'>@options</span><span class='lbracket'>[</span><span class='symbol'>:base_uri</span><span class='rbracket'>]</span>
  <span class='ivar'>@lang</span> <span class='op'>=</span> <span class='ivar'>@options</span><span class='lbracket'>[</span><span class='symbol'>:lang</span><span class='rbracket'>]</span>
  <span class='ivar'>@debug</span> <span class='op'>=</span> <span class='ivar'>@options</span><span class='lbracket'>[</span><span class='symbol'>:debug</span><span class='rbracket'>]</span>
  <span class='kw'>self</span><span class='period'>.</span><span class='id reset'>reset</span>

  <span class='id add_debug'>add_debug</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\nserialize: graph size: </span><span class='embexpr_beg'>#{</span><span class='ivar'>@graph</span><span class='period'>.</span><span class='id size'>size</span><span class='rbrace'>}</span><span class='tstring_end'>&quot;</span></span>

  <span class='id preprocess'>preprocess</span>

  <span class='comment'># Profiles
</span>  <span class='id profile'>profile</span> <span class='op'>=</span> <span class='ivar'>@options</span><span class='lbracket'>[</span><span class='symbol'>:profiles</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id join'>join</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'> </span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span> <span class='kw'>if</span> <span class='ivar'>@options</span><span class='lbracket'>[</span><span class='symbol'>:profiles</span><span class='rbracket'>]</span>

  <span class='comment'># Prefixes
</span>  <span class='id prefix'>prefix</span> <span class='op'>=</span> <span class='id prefixes'>prefixes</span><span class='period'>.</span><span class='id keys'>keys</span><span class='period'>.</span><span class='id map'>map</span> <span class='lbrace'>{</span><span class='op'>|</span><span class='id pk'>pk</span><span class='op'>|</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id pk'>pk</span><span class='rbrace'>}</span><span class='tstring_content'>: </span><span class='embexpr_beg'>#{</span><span class='id prefixes'>prefixes</span><span class='lbracket'>[</span><span class='id pk'>pk</span><span class='rbracket'>]</span><span class='rbrace'>}</span><span class='tstring_end'>&quot;</span></span><span class='rbrace'>}</span><span class='period'>.</span><span class='id sort'>sort</span><span class='period'>.</span><span class='id join'>join</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'> </span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span> <span class='kw'>unless</span> <span class='id prefixes'>prefixes</span><span class='period'>.</span><span class='id empty?'>empty?</span>
  <span class='id add_debug'>add_debug</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\nserialize: prefixes: </span><span class='embexpr_beg'>#{</span><span class='id prefix'>prefix</span><span class='period'>.</span><span class='id inspect'>inspect</span><span class='rbrace'>}</span><span class='tstring_end'>&quot;</span></span>

  <span class='id subjects'>subjects</span> <span class='op'>=</span> <span class='id order_subjects'>order_subjects</span>
  
  <span class='comment'># Take title from first subject having a heading predicate
</span>  <span class='id doc_title'>doc_title</span> <span class='op'>=</span> <span class='kw'>nil</span>
  <span class='id titles'>titles</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
  <span class='id heading_predicates'>heading_predicates</span><span class='period'>.</span><span class='id each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id pred'>pred</span><span class='op'>|</span>
    <span class='ivar'>@graph</span><span class='period'>.</span><span class='id query'>query</span><span class='lparen'>(</span><span class='symbol'>:predicate</span> <span class='op'>=&gt;</span> <span class='id pred'>pred</span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id statement'>statement</span><span class='op'>|</span>
      <span class='id titles'>titles</span><span class='lbracket'>[</span><span class='id statement'>statement</span><span class='period'>.</span><span class='id subject'>subject</span><span class='rbracket'>]</span> <span class='op'>||=</span> <span class='id statement'>statement</span><span class='period'>.</span><span class='id object'>object</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
  <span class='id title_subject'>title_subject</span> <span class='op'>=</span> <span class='id subjects'>subjects</span><span class='period'>.</span><span class='id detect'>detect</span> <span class='lbrace'>{</span><span class='op'>|</span><span class='id subject'>subject</span><span class='op'>|</span> <span class='id titles'>titles</span><span class='lbracket'>[</span><span class='id subject'>subject</span><span class='rbracket'>]</span><span class='rbrace'>}</span>
  <span class='id doc_title'>doc_title</span> <span class='op'>=</span> <span class='id titles'>titles</span><span class='lbracket'>[</span><span class='id title_subject'>title_subject</span><span class='rbracket'>]</span>

  <span class='comment'># Generate document
</span>  <span class='id doc'>doc</span> <span class='op'>=</span> <span class='id render_document'>render_document</span><span class='lparen'>(</span><span class='id subjects'>subjects</span><span class='comma'>,</span>
    <span class='symbol'>:lang</span>     <span class='op'>=&gt;</span> <span class='ivar'>@lang</span><span class='comma'>,</span>
    <span class='symbol'>:base</span>     <span class='op'>=&gt;</span> <span class='ivar'>@base_uri</span><span class='comma'>,</span>
    <span class='symbol'>:title</span>    <span class='op'>=&gt;</span> <span class='id doc_title'>doc_title</span><span class='comma'>,</span>
    <span class='symbol'>:profile</span>  <span class='op'>=&gt;</span> <span class='id profile'>profile</span><span class='comma'>,</span>
    <span class='symbol'>:prefix</span>   <span class='op'>=&gt;</span> <span class='id prefix'>prefix</span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id s'>s</span><span class='op'>|</span>
    <span class='id subject'>subject</span><span class='lparen'>(</span><span class='id s'>s</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
  <span class='ivar'>@output</span><span class='period'>.</span><span class='id write'>write</span><span class='lparen'>(</span><span class='id doc'>doc</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="write_graph-instance_method">
  
    - <strong>write_graph</strong>(graph) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p class="note returns_void">This method returns an undefined value.</p><p>Write whole graph</p>

  </div>
</div>
<div class="tags">
  <h3>Parameters:</h3>
<ul class="param">
  
    <li>
      
        <span class='name'>graph</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../Graph.html" title="RDF::Graph (class)">Graph</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


162
163
164</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'vendor/bundler/ruby/1.8/gems/rdf-rdfa-0.3.3/lib/rdf/rdfa/writer.rb', line 162</span>

<span class='kw'>def</span> <span class='id write_graph'>write_graph</span><span class='lparen'>(</span><span class='id graph'>graph</span><span class='rparen'>)</span>
  <span class='ivar'>@graph</span> <span class='op'>=</span> <span class='id graph'>graph</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="write_statement-instance_method">
  
    - <strong>write_statement</strong>(statement) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p class="note returns_void">This method returns an undefined value.</p><p>Addes a statement to be serialized</p>

  </div>
</div>
<div class="tags">
  <h3>Parameters:</h3>
<ul class="param">
  
    <li>
      
        <span class='name'>statement</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../Statement.html" title="RDF::Statement (class)">RDF::Statement</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


170
171
172</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'vendor/bundler/ruby/1.8/gems/rdf-rdfa-0.3.3/lib/rdf/rdfa/writer.rb', line 170</span>

<span class='kw'>def</span> <span class='id write_statement'>write_statement</span><span class='lparen'>(</span><span class='id statement'>statement</span><span class='rparen'>)</span>
  <span class='ivar'>@graph</span><span class='period'>.</span><span class='id insert'>insert</span><span class='lparen'>(</span><span class='id statement'>statement</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="write_triple-instance_method">
  
    - <strong>write_triple</strong>(subject, predicate, object) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <div class="note abstract">
  <strong>This method is abstract.</strong> 
  <div class='inline'></div>
</div>
<p class="note returns_void">This method returns an undefined value.</p><p>Addes a triple to be serialized</p>

  </div>
</div>
<div class="tags">
  <h3>Parameters:</h3>
<ul class="param">
  
    <li>
      
        <span class='name'>subject</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../Resource.html" title="RDF::Resource (module)">RDF::Resource</a></span></tt>)</span>
      
      
      
    </li>
  
    <li>
      
        <span class='name'>predicate</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../URI.html" title="RDF::URI (class)">RDF::URI</a></span></tt>)</span>
      
      
      
    </li>
  
    <li>
      
        <span class='name'>object</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../Value.html" title="RDF::Value (module)">RDF::Value</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>
<h3>Raises:</h3>
<ul class="raise">
  
    <li>
      
      
        <span class='type'>(<tt>NotImplementedError</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>unless implemented in subclass</p></div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


182
183
184</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'vendor/bundler/ruby/1.8/gems/rdf-rdfa-0.3.3/lib/rdf/rdfa/writer.rb', line 182</span>

<span class='kw'>def</span> <span class='id write_triple'>write_triple</span><span class='lparen'>(</span><span class='id subject'>subject</span><span class='comma'>,</span> <span class='id predicate'>predicate</span><span class='comma'>,</span> <span class='id object'>object</span><span class='rparen'>)</span>
  <span class='ivar'>@graph</span><span class='period'>.</span><span class='id insert'>insert</span><span class='lparen'>(</span><span class='const'>Statement</span><span class='period'>.</span><span class='id new'>new</span><span class='lparen'>(</span><span class='id subject'>subject</span><span class='comma'>,</span> <span class='id predicate'>predicate</span><span class='comma'>,</span> <span class='id object'>object</span><span class='rparen'>)</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>
    
    <div id="footer">
  Generated on Mon Aug 22 16:49:30 2011 by 
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.7.2 (ruby-1.9.2).
</div>

  </body>
</html>