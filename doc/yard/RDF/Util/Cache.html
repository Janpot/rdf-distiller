<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>
  Class: RDF::Util::Cache
  
    &mdash; Web portal for RDF.rb.
  
</title>

  <link rel="stylesheet" href="../../css/style.css" type="text/css" media="screen" charset="utf-8" />

  <link rel="stylesheet" href="../../css/common.css" type="text/css" media="screen" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  relpath = '../..';
  if (relpath != '') relpath += '/';
</script>

  <script type="text/javascript" charset="utf-8" src="../../js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="../../js/app.js"></script>


  </head>
  <body>
    <script type="text/javascript" charset="utf-8">
      if (window.top.frames.main) document.body.className = 'frames';
    </script>
    
    <div id="header">
      <div id="menu">
  
    <a href="../../_index.html">Index (C)</a> &raquo; 
    <span class='title'><span class='object_link'><a href="../../RDF.html" title="RDF (module)">RDF</a></span></span> &raquo; <span class='title'><span class='object_link'><a href="../Util.html" title="RDF::Util (module)">Util</a></span></span>
     &raquo; 
    <span class="title">Cache</span>
  
  
  <div class="noframes"><span class="title">(</span><a href="." target="_top">no frames</a><span class="title">)</span></div>
</div>

      <div id="search">
  
    <a id="class_list_link" href="#">Class List</a>
  
    <a id="method_list_link" href="#">Method List</a>
  
    <a id="file_list_link" href="#">File List</a>
  
</div>
      <div class="clear"></div>
    </div>
    
    <iframe id="search_frame"></iframe>
    
    <div id="content"><h1>Class: RDF::Util::Cache
  
  
  
</h1>

<dl class="box">
  
    <dt class="r1">Inherits:</dt>
    <dd class="r1">
      <span class="inheritName"><span class='object_link'><a href="../../Object.html" title="Object (class)">Object</a></span></span>
      
        <ul class="fullTree">
          <li><span class='object_link'><a href="../../Object.html" title="Object (class)">Object</a></span></li>
          
            <li class="next">RDF::Util::Cache</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
      </dd>
    
  
  
    
  
    
  
  
  
    <dt class="r2 last">Defined in:</dt>
    <dd class="r2 last">vendor/bundler/ruby/1.8/bundler/gems/rdf-ba565bd566df/lib/rdf/util/cache.rb<span class="defines">,<br />
  vendor/bundler/ruby/1.8/bundler/gems/rdf-f7bf3fbb7bf9/lib/rdf/util/cache.rb,<br /> vendor/bundler/ruby/1.9.1/bundler/gems/rdf-9224732b13c9/lib/rdf/util/cache.rb,<br /> vendor/bundler/ruby/1.9.1/bundler/gems/rdf-f7bf3fbb7bf9/lib/rdf/util/cache.rb</span>
</dd>
  
</dl>
<div class="clear"></div>

<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    <p>A <code>Hash</code>-like cache that holds only weak references to the values it
caches, meaning that values contained in the cache can be garbage
collected. This allows the cache to dynamically adjust to changing
memory conditions, caching more objects when memory is plentiful, but
evicting most objects if memory pressure increases to the point of
scarcity.</p>

<p>While this cache is something of an internal implementation detail of
RDF.rb, some external libraries do currently make use of it as well,
including <a href="http://sparql.rubyforge.org/algebra/">SPARQL::Algebra</a> and
<a href="http://spira.rubyforge.org/">Spira</a>. Do be sure to include any changes
here in the RDF.rb changelog.</p>

  </div>
</div>
<div class="tags">
  
  <h3>See Also:</h3>
  <ul class="see">
    
      <li><span class='object_link'><a href="../URI.html#intern-class_method" title="RDF::URI.intern (method)">RDF::URI.intern</a></span></li>
    
      <li><a href="http://en.wikipedia.org/wiki/Weak_reference" target="_parent" title="http://en.wikipedia.org/wiki/Weak_reference">http://en.wikipedia.org/wiki/Weak_reference</a></li>
    
  </ul>
<h3>Since:</h3>
<ul class="since">
  
    <li>
      
      
      
      
        
        <div class='inline'><p>0.2.0</p></div>
      
    </li>
  
</ul>

</div><div id="subclasses">
  <h2>Direct Known Subclasses</h2>
  <p class="children"><span class='object_link'><a href="Cache/ObjectSpaceCache.html" title="RDF::Util::Cache::ObjectSpaceCache (class)">ObjectSpaceCache</a></span>, <span class='object_link'><a href="Cache/WeakRefCache.html" title="RDF::Util::Cache::WeakRefCache (class)">WeakRefCache</a></span></p>
</div>
<h2>Defined Under Namespace</h2>
<p class="children">
   
    
   
    
      <strong class="classes">Classes:</strong> <span class='object_link'><a href="Cache/ObjectSpaceCache.html" title="RDF::Util::Cache::ObjectSpaceCache (class)">ObjectSpaceCache</a></span>, <span class='object_link'><a href="Cache/WeakRefCache.html" title="RDF::Util::Cache::WeakRefCache (class)">WeakRefCache</a></span>
    
  
</p>





  
    <h2>
      Instance Method Summary
      <small>(<a href="#" class="summary_toggle">collapse</a>)</small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#define_finalizer%21-instance_method" title="#define_finalizer! (instance method)">- <strong>define_finalizer!</strong>(value) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#finalizer-instance_method" title="#finalizer (instance method)">- (Proc) <strong>finalizer</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#has_capacity%3F-instance_method" title="#has_capacity? (instance method)">- (Boolean) <strong>has_capacity?</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#initialize-instance_method" title="#initialize (instance method)">- (Cache) <strong>initialize</strong>(capacity = -1) </a>
    

    
  </span>
  
    <span class="note title constructor">constructor</span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>A new instance of Cache.</p></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#size-instance_method" title="#size (instance method)">- (Integer) <strong>size</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
    </ul>
  

<div id="constructor_details" class="method_details_list">
  <h2>Constructor Details</h2>
  
    <div class="method_details first">
  <p class="signature first" id="initialize-instance_method">
  
    - (<tt><span class='object_link'><a href="" title="RDF::Util::Cache (class)">Cache</a></span></tt>) <strong>initialize</strong>(capacity = -1) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>A new instance of Cache</p>

  </div>
</div>
<div class="tags">
  <h3>Parameters:</h3>
<ul class="param">
  
    <li>
      
        <span class='name'>capacity</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../../Integer.html" title="Integer (class)">Integer</a></span></tt>)</span>
      
      
        <em class="default">(defaults to: <tt>-1</tt>)</em>
      
      
    </li>
  
</ul>
<h3>Since:</h3>
<ul class="since">
  
    <li>
      
      
      
      
        
        <div class='inline'><p>0.2.0</p></div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


37
38
39
40
41</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'vendor/bundler/ruby/1.8/bundler/gems/rdf-ba565bd566df/lib/rdf/util/cache.rb', line 37</span>

<span class='def def kw'>def</span> <span class='initialize identifier id'>initialize</span><span class='lparen token'>(</span><span class='capacity identifier id'>capacity</span> <span class='assign token'>=</span> <span class='integer val'>-1</span><span class='rparen token'>)</span>
  <span class='@capacity ivar id'>@capacity</span> <span class='assign token'>=</span> <span class='capacity identifier id'>capacity</span>
  <span class='@cache ivar id'>@cache</span>  <span class='opasgn op'>||=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span>
  <span class='@index ivar id'>@index</span>  <span class='opasgn op'>||=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
  
</div>


  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>
    
    
      <div class="method_details first">
  <p class="signature first" id="define_finalizer!-instance_method">
  
    - <strong>define_finalizer!</strong>(value) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p class="note returns_void">This method returns an undefined value.</p>

  </div>
</div>
<div class="tags">
  <h3>Parameters:</h3>
<ul class="param">
  
    <li>
      
        <span class='name'>value</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../../Object.html" title="Object (class)">Object</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>
<h3>Since:</h3>
<ul class="since">
  
    <li>
      
      
      
      
        
        <div class='inline'><p>0.2.0</p></div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


58
59
60</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'vendor/bundler/ruby/1.8/bundler/gems/rdf-ba565bd566df/lib/rdf/util/cache.rb', line 58</span>

<span class='def def kw'>def</span> <span class='define_finalizer! fid id'>define_finalizer!</span><span class='lparen token'>(</span><span class='value identifier id'>value</span><span class='rparen token'>)</span>
  <span class='ObjectSpace constant id'>ObjectSpace</span><span class='dot token'>.</span><span class='define_finalizer identifier id'>define_finalizer</span><span class='lparen token'>(</span><span class='value identifier id'>value</span><span class='comma token'>,</span> <span class='finalizer identifier id'>finalizer</span><span class='rparen token'>)</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="finalizer-instance_method">
  
    - (<tt>Proc</tt>) <strong>finalizer</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  <h3>Returns:</h3>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Proc</tt>)</span>
      
      
      
    </li>
  
</ul>
<h3>Since:</h3>
<ul class="since">
  
    <li>
      
      
      
      
        
        <div class='inline'><p>0.2.0</p></div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


64
65
66</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'vendor/bundler/ruby/1.8/bundler/gems/rdf-ba565bd566df/lib/rdf/util/cache.rb', line 64</span>

<span class='def def kw'>def</span> <span class='finalizer identifier id'>finalizer</span>
  <span class='lambda identifier id'>lambda</span> <span class='lbrace token'>{</span> <span class='bitor op'>|</span><span class='object_id identifier id'>object_id</span><span class='bitor op'>|</span> <span class='@cache ivar id'>@cache</span><span class='dot token'>.</span><span class='delete identifier id'>delete</span><span class='lparen token'>(</span><span class='@index ivar id'>@index</span><span class='dot token'>.</span><span class='delete identifier id'>delete</span><span class='lparen token'>(</span><span class='object_id identifier id'>object_id</span><span class='rparen token'>)</span><span class='rparen token'>)</span> <span class='rbrace token'>}</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="has_capacity?-instance_method">
  
    - (<tt>Boolean</tt>) <strong>has_capacity?</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  <h3>Returns:</h3>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>
<h3>Since:</h3>
<ul class="since">
  
    <li>
      
      
      
      
        
        <div class='inline'><p>0.2.0</p></div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


51
52
53</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'vendor/bundler/ruby/1.8/bundler/gems/rdf-ba565bd566df/lib/rdf/util/cache.rb', line 51</span>

<span class='def def kw'>def</span> <span class='has_capacity? fid id'>has_capacity?</span>
  <span class='@capacity ivar id'>@capacity</span><span class='dot token'>.</span><span class='equal? fid id'>equal?</span><span class='lparen token'>(</span><span class='integer val'>-1</span><span class='rparen token'>)</span> <span class='orop op'>||</span> <span class='@capacity ivar id'>@capacity</span> <span class='gt op'>&gt;</span> <span class='@cache ivar id'>@cache</span><span class='dot token'>.</span><span class='size identifier id'>size</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="size-instance_method">
  
    - (<tt><span class='object_link'><a href="../../Integer.html" title="Integer (class)">Integer</a></span></tt>) <strong>size</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  <h3>Returns:</h3>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../../Integer.html" title="Integer (class)">Integer</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>
<h3>Since:</h3>
<ul class="since">
  
    <li>
      
      
      
      
        
        <div class='inline'><p>0.2.0</p></div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


45
46
47</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'vendor/bundler/ruby/1.8/bundler/gems/rdf-ba565bd566df/lib/rdf/util/cache.rb', line 45</span>

<span class='def def kw'>def</span> <span class='size identifier id'>size</span>
  <span class='@cache ivar id'>@cache</span><span class='dot token'>.</span><span class='size identifier id'>size</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>
    
    <div id="footer">
  Generated on Wed Jun 29 20:18:09 2011 by 
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.7.2 (ruby-1.8.7).
</div>

  </body>
</html>